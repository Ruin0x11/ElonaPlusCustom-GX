*fltChara
	dbid = 0
	if ( gdata(GDATA_AREA) == AREA_CYBER_DOME ) {
		flt calcobjlv(10), calcfixlv(FIX_QUALITY_GOOD)
		fltn "sf"
		return
	}
	if ( mdata(MDATA_TYPE) == MAP_TYPE_TOWN | mdata(MDATA_TYPE) == MAP_TYPE_VILLAGE ) {
		flt calcobjlv(10), calcfixlv(FIX_QUALITY_GOOD)
		fltselect = 5
		if ( gdata(GDATA_LEVEL) == 1 ) {
			if ( gdata(GDATA_FLAG_MAIN) >= 390 & gdata(GDATA_FLAG_MAIN) <= 660 ) {
				if ( gdata(GDATA_WORLD) == AREA_NORTH_TYRIS | gdata(GDATA_WORLD) == AREA_SOUTH_TYRIS ) {
					if ( rnd(30) == 0 ) {
						dbid = CREATURE_ID_CHAOS_SPIRIT
						return
					}
				}
			}
			if ( gdata(GDATA_WORLD) == AREA_NORTH_TYRIS | gdata(GDATA_WORLD) == AREA_SOUTH_TYRIS ) {
				if ( mdata(MDATA_TYPE) == MAP_TYPE_TOWN ) {
					if ( gdata(GDATA_AREA) != AREA_MELUGAS ) {
						if ( rnd(100) == 0 ) {
							dbid = CREATURE_ID_WEREWOLF
							return
						}
					}
				}
			}
			if ( gdata(GDATA_WORLD) == AREA_NORTH_TYRIS | gdata(GDATA_WORLD) == AREA_SOUTH_TYRIS ) {
				if ( mdata(MDATA_TYPE) == MAP_TYPE_TOWN ) {
					if ( gdata(GDATA_AREA) != AREA_MELUGAS ) {
						if ( rnd(100) == 0 ) {
							dbid = CREATURE_ID_SUNBARARIAN
							return
						}
					}
				}
			}
			if ( gdata(GDATA_WORLD) == AREA_NORTH_TYRIS | gdata(GDATA_WORLD) == AREA_SOUTH_TYRIS ) {
				if ( mdata(MDATA_TYPE) == MAP_TYPE_TOWN ) {
					if ( gdata(GDATA_AREA) != AREA_MELUGAS ) {
						if ( rnd(300) == 0 ) {
							dbid = CREATURE_ID_FOX_SPIRIT
							return
						}
					}
				}
			}
			if ( gdata(GDATA_AREA) == AREA_YOWYN ) {
				if ( rnd(2) ) {
					dbid = CREATURE_ID_FARMER
					return
				}
			}
			if ( gdata(GDATA_AREA) == AREA_NOYEL ) {
				if ( rnd(3) == 0 ) {
					dbid = CREATURE_ID_NUN
					return
				}
			}
			if ( gdata(GDATA_AREA) == AREA_DERPHY ) {
				if ( rnd(3) == 0 ) {
					dbid = CREATURE_ID_ROGUE
					return
				}
				else {
					if ( rnd(2) == 0 ) {
						dbid = CREATURE_ID_PROSTITUTE
						return
					}
				}
			}
			if ( gdata(GDATA_AREA) == AREA_LUMIEST ) {
				if ( rnd(3) == 0 ) {
					dbid = CREATURE_ID_ARTIST
					return
				}
			}
			if ( gdata(GDATA_AREA) == AREA_VERNIS ) {
				if ( rnd(2) ) {
					dbid = CREATURE_ID_MINER
					return
				}
			}
			if ( gdata(GDATA_AREA) == AREA_PALMIA ) {
				if ( rnd(3) == 0 ) {
					dbid = CREATURE_ID_NOBLE
					return
				}
			}
			if ( gdata(GDATA_AREA) == AREA_EIREL ) {
				if ( rnd(3) == 0 ) {
					dbid = CREATURE_ID_CAT
					return
				}
				else {
					if ( rnd(2) == 0 ) {
						dbid = CREATURE_ID_MILITARY_PUTIT
						return
					}
				}
			}
			if ( gdata(GDATA_AREA) == AREA_RUOZA ) {
				if ( rnd(3) == 0 ) {
					dbid = CREATURE_ID_FALLEN_SOLDIER
					return
				}
				else {
					if ( rnd(2) == 0 ) {
						dbid = CREATURE_ID_BEGGAR
						return
					}
				}
			}
			if ( gdata(GDATA_AREA) == AREA_MELKAWN ) {
				if ( rnd(3) == 0 ) {
					dbid = CREATURE_ID_TRAVELER
					return
				}
				else {
					if ( rnd(2) == 0 ) {
						dbid = CREATURE_ID_ROGUE
						return
					}
				}
			}
			if ( gdata(GDATA_AREA) == AREA_KURUALM ) {
				if ( rnd(4) == 0 ) {
					dbid = CREATURE_ID_ROGUE
					return
				}
			}
			if ( gdata(GDATA_AREA) == AREA_VALM ) {
				if ( rnd(3) == 0 ) {
					dbid = CREATURE_ID_SWIMMER
					return
				}
			}
			if ( gdata(GDATA_AREA) == AREA_MELUGAS ) {
				dbid = CREATURE_ID_MILITARY_PUTIT
				return
			}
			if ( gdata(GDATA_AREA) == AREA_LUDUS ) {
				if ( rnd(2) ) {
					dbid = CREATURE_ID_FARMER
					return
				}
			}
			if ( gdata(GDATA_AREA) == AREA_ULM_LESON ) {
				if ( rnd(2) ) {
					dbid = CREATURE_ID_TRAVELER
					return
				}
				else {
					dbid = CREATURE_ID_FALLEN_SOLDIER
					return
				}
			}
			if ( gdata(GDATA_AREA) == AREA_SEBI ) {
				dbid = CREATURE_ID_OBLIVION_BEAST
				return
			}
			if ( gdata(GDATA_AREA) == AREA_YLVA_LIBRARY ) {
				dbid = CREATURE_ID_SCHOLAR
				return
			}
			if ( gdata(GDATA_AREA) == AREA_BLIMP ) {
				dbid = CREATURE_ID_SCHOLAR
				return
			}
			if ( gdata(GDATA_AREA) == AREA_AMUR_CAGE ) {
				dbid = CREATURE_ID_WISP
				return
			}
			if ( gdata(GDATA_AREA) == AREA_MIRAGE_TOWER ) {
				dbid = CREATURE_ID_CAT
				return
			}
			if ( gdata(GDATA_AREA) == AREA_RUST_PLAZA ) {
				dbid = CREATURE_ID_HILL_CHILD
				return
			}
			if ( gdata(GDATA_AREA) == AREA_GUARDIAN_SHRINE ) {
				dbid = CREATURE_ID_TRAVELER
				return
			}
			if ( gdata(GDATA_AREA) == AREA_DOCK ) {
				dbid = CREATURE_ID_WORKER_01
				return
			}
			if ( gdata(GDATA_AREA) == area ) {
				if ( rnd(2) ) {
					dbid = CREATURE_ID_TRAVELER
					return
				}
				else {
					dbid = CREATURE_ID_FALLEN_SOLDIER
					return
				}
			}
		}
		if ( gdata(GDATA_AREA) == AREA_LARNA ) {
			if ( rnd(20) ) {
				dbid = CREATURE_ID_CAPYBARA
				return
			}
			else {
				if ( rnd(4) == 0 ) {
					dbid = CREATURE_ID_HOT_SPRING_MANIAC
				}
			}
		}
		if ( gdata(GDATA_AREA) == AREA_VALM ) {
			if ( gdata(GDATA_LEVEL) == 3 ) {
				if ( rnd(2) == 0 ) {
					dbid = CREATURE_ID_ABYSS_ANIMAL
				}
				else {
					dbid = CREATURE_ID_ABYSS_DWELLER
				}
			}
		}
		if ( gdata(GDATA_AREA) == AREA_LUMIEST ) {
			if ( gdata(GDATA_LEVEL) == 3 ) {
				dbid = CREATURE_ID_MAGE_GUILD_MEMBER
			}
		}
		if ( gdata(GDATA_AREA) == AREA_DERPHY ) {
			if ( gdata(GDATA_LEVEL) == 3 ) {
				dbid = CREATURE_ID_THIEF_GUILD_MEMBER
			}
		}
		if ( gdata(GDATA_AREA) == AREA_PORT_KAPUL ) {
			if ( gdata(GDATA_LEVEL) == 3 ) {
				dbid = CREATURE_ID_FIGHTER_GUILD_MEMBER
			}
		}
		if ( gdata(GDATA_AREA) == AREA_MELKAWN ) {
			if ( gdata(GDATA_LEVEL) == 3 ) {
				if ( rnd(2) == 0 ) {
					dbid = CREATURE_ID_STAFF
				}
				else {
					dbid = CREATURE_ID_GAMBLER
				}
			}
		}
		return
	}
	if ( gdata(GDATA_AREA) == AREA_LESIMAS ) {
		flt calcobjlv(gdata(GDATA_LEVEL)), calcfixlv(FIX_QUALITY_GOOD)
		if ( gdata(GDATA_LEVEL) < 4 ) {
			if ( objlv > 5 ) {
				objlv = 5
			}
		}
		return
	}
	if ( gdata(GDATA_AREA) == AREA_VOID ) {
		flt calcobjlv((gdata(GDATA_LEVEL) - 50) \ 200 + 5), calcfixlv(FIX_QUALITY_GOOD)
		return
	}
	if ( gdata(GDATA_AREA) == AREA_DRAGON_NEST ) {
		flt calcobjlv(gdata(GDATA_LEVEL)), calcfixlv(FIX_QUALITY_GOOD)
		return
	}
	if ( gdata(GDATA_AREA) == AREA_CRYPT_OF_THE_DAMNED ) {
		flt calcobjlv(gdata(GDATA_LEVEL)), calcfixlv(FIX_QUALITY_GOOD)
		fltn "undead"
		return
	}
	if ( gdata(GDATA_AREA) == AREA_TOWER_OF_FIRE ) {
		flt calcobjlv(gdata(GDATA_LEVEL)), calcfixlv(FIX_QUALITY_GOOD)
		fltn "fire"
		return
	}
	if ( gdata(GDATA_AREA) == AREA_ANCIENT_CASTLE ) {
		flt calcobjlv(gdata(GDATA_LEVEL)), calcfixlv(FIX_QUALITY_GOOD)
		if ( rnd(2) == 0 ) {
			fltn "man"
		}
		return
	}
	if ( gdata(GDATA_AREA) == AREA_PYRAMID ) {
		flt calcobjlv(gdata(GDATA_LEVEL)), calcfixlv(FIX_QUALITY_GOOD)
		flttypemajor = FILTER_RACE_MUMMY
		return
	}
	if ( gdata(GDATA_AREA) == AREA_GRAVEYARD | gdata(GDATA_AREA) == AREA_TRUCE_GROUND | gdata(GDATA_AREA) == AREA_WAR_GROUND ) {
		flt calcobjlv(20), calcfixlv(FIX_QUALITY_GOOD)
		fltselect = 4
		return
	}
	if ( gdata(GDATA_AREA) == AREA_QUEST ) {
		if ( gdata(GDATA_QUEST) >= STARTING_QUEST_TYPE ) {
			flt calcobjlv(qdata(QDATA_LEVEL, gdata(GDATA_QUEST_REF)) + 1), calcfixlv(FIX_QUALITY_GOOD)
		}
		if ( gdata(GDATA_QUEST) == QUEST_TYPE_HARVEST ) {
			fltn "wild"
			objlv = limit(objlv / 4, 1, 8)
		}
		return
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_YEEK_NEST ) {
		flt calcobjlv(gdata(GDATA_LEVEL)), calcfixlv(FIX_QUALITY_GOOD)
		if ( rnd(2) ) {
			fltn "yeek"
		}
		return
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_MINOTAUR_NEST ) {
		flt calcobjlv(gdata(GDATA_LEVEL)), calcfixlv(FIX_QUALITY_GOOD)
		if ( rnd(2) ) {
			fltn "mino"
		}
		return
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_RANDOM_DUNGEON ) {
		flt calcobjlv(gdata(GDATA_LEVEL)), calcfixlv(FIX_QUALITY_GOOD)
		if ( objlv < 5 ) {
			objlv = 5
		}
		if ( rnd(20) != 0 ) {
			if ( mdata(MDATA_TYPE) == MAP_TYPE_DUNGEON ) {
				fltn "nefia1"
			}
			if ( mdata(MDATA_TYPE) == MAP_TYPE_FOREST ) {
				fltn "nefia2"
			}
			if ( mdata(MDATA_TYPE) == MAP_TYPE_TOWER ) {
				fltn "nefia3"
			}
			if ( mdata(MDATA_TYPE) == MAP_TYPE_FORT ) {
				fltn "nefia4"
			}
			if ( mdata(MDATA_TYPE) == MAP_TYPE_NEST ) {
				fltn "nefia5"
			}
			if ( mdata(MDATA_TYPE) == MAP_TYPE_CEMETERY ) {
				fltn "nefia6"
			}
			if ( mdata(MDATA_TYPE) == MAP_TYPE_MINE ) {
				fltn "nefia7"
			}
			if ( mdata(MDATA_TYPE) == MAP_TYPE_LAKE ) {
				fltn "nefia8"
			}
		}
		else {
			fltn "nefia0"
		}
		return
	}
	if ( mdata(MDATA_TYPE) >= MAP_TYPE_DUNGEON_MIN ) {
		flt calcobjlv(gdata(GDATA_LEVEL)), calcfixlv(FIX_QUALITY_GOOD)
		return
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_MUSEUM | adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_SHOP ) {
		flt calcobjlv(100), calcfixlv(FIX_QUALITY_GOOD)
		if ( rnd(1) ) {
			fltselect = 5
		}
		else {
			fltselect = 7
		}
		if ( gdata(GDATA_WORLD) == AREA_LOST_YLVA ) {
			if ( rnd(3) != 0 ) {
				fltselect = 10
			}
		}
		return
	}
	if ( gdata(GDATA_AREA) == AREA_REMIDO ) {
		flt calcobjlv(gdata(GDATA_LEVEL) - 20), calcfixlv(FIX_QUALITY_GOOD)
		return
	}
	if ( gdata(GDATA_AREA) == AREA_CHAOS_CRADLE ) {
		if ( gdata(GDATA_FLAG_MAIN) >= 390 & gdata(GDATA_FLAG_MAIN) <= 450 ) {
			if ( gdata(GDATA_LEVEL) == 146 ) {
				dbid = CREATURE_ID_CHAOS_SPIRIT
				return
			}
		}
		flt calcobjlv(gdata(GDATA_LEVEL)), calcfixlv(FIX_QUALITY_GOOD)
		return
	}
	if ( gdata(GDATA_AREA) == AREA_CHAOS_SHRINE ) {
		flt calcobjlv(gdata(GDATA_LEVEL)), calcfixlv(FIX_QUALITY_GOOD)
		return
	}
	if ( gdata(GDATA_AREA) == AREA_MELKA_FOREST ) {
		flt calcobjlv(gdata(GDATA_LEVEL)), calcfixlv(FIX_QUALITY_GOOD)
		return
	}
	if ( gdata(GDATA_AREA) == AREA_GRAVITY_VALLEY ) {
		flt calcobjlv(gdata(GDATA_LEVEL)), calcfixlv(FIX_QUALITY_GOOD)
		return
	}
	if ( gdata(GDATA_AREA) == AREA_MOUNTAIN_RUIN ) {
		flt calcobjlv(gdata(GDATA_LEVEL)), calcfixlv(FIX_QUALITY_GOOD)
		return
	}
	if ( gdata(GDATA_AREA) == AREA_VALLEY_HADES ) {
		flt calcobjlv(gdata(GDATA_LEVEL)), calcfixlv(FIX_QUALITY_GOOD)
		return
	}
	if ( gdata(GDATA_AREA) == AREA_MACHINERY_FORT ) {
		flt calcobjlv(gdata(GDATA_LEVEL)), calcfixlv(FIX_QUALITY_GOOD)
		return
	}
	if ( gdata(GDATA_AREA) == AREA_DRAGON_VOLCANO ) {
		flt calcobjlv(gdata(GDATA_LEVEL)), calcfixlv(FIX_QUALITY_GOOD)
		return
	}
	if ( gdata(GDATA_AREA) == AREA_HARVEST_SHIP ) {
		dbid = CREATURE_ID_PALMIAN_ELITE_SOLDIER
		return
	}
	if ( gdata(GDATA_AREA) == AREA_MAID_MANSION ) {
		if ( gdata(GDATA_LEVEL) == 1 ) {
			dbid = CREATURE_ID_MAIDSANN
			return
		}
	}
	flt calcobjlv(cdata(CDATA_LEVEL, CHARA_PLAYER)), calcfixlv(FIX_QUALITY_GOOD)
	return

*chara_spawn
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_MUSEUM | adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_SHOP ) {
		if ( gdata(GDATA_CROWD) < mdata(MDATA_MODERATE_CROWD) / 2 ) {
			if ( rnd(4) == 0 ) {
				gosub *fltChara
				characreate -1, dbid, -2, 0
			}
		}
	}
	if ( mdata(MDATA_MODERATE_CROWD) == 0 ) {
		return
	}
	if ( mdata(MDATA_TYPE) >= MAP_TYPE_DUNGEON_MIN ) {
		if ( rnd(20) > 0 ) {
			return
		}
	}
	if ( gdata(GDATA_CROWD) < mdata(MDATA_MODERATE_CROWD) / 4 ) {
		if ( rnd(2) == 0 ) {
			gosub *fltChara
			characreate -1, dbid, -2, 0
		}
	}
	if ( gdata(GDATA_CROWD) < mdata(MDATA_MODERATE_CROWD) / 2 ) {
		if ( rnd(3) == 0 ) {
			gosub *fltChara
			characreate -1, dbid, -2, 0
		}
	}
	if ( gdata(GDATA_CROWD) * 3 < mdata(MDATA_MODERATE_CROWD) * 2 ) {
		if ( rnd(4) == 0 ) {
			gosub *fltChara
			characreate -1, dbid, -2, 0
		}
	}
	if ( gdata(GDATA_CROWD) < mdata(MDATA_MODERATE_CROWD) ) {
		if ( rnd(10) == 0 ) {
			gosub *fltChara
			characreate -1, dbid, -2, 0
		}
	}
	return

*map_exit
	proc "map_exit"
	gdata(GDATA_TIME_LIMIT) = 0
	gdata(GDATA_MAP_EVENT) = 0
	if ( mdata(MDATA_TYPE) == MAP_TYPE_HOME ) {
		if ( cfg_extrahelp ) {
			if ( gdata(STARTING_GDATA_HELP + 1) == 0 ) {
				if ( mode == MODELIST_MAIN ) {
					if ( cdata(CDATA_ACTION_PERIOD, CHARA_PLAYER) == 0 ) {
						gdata(STARTING_GDATA_HELP + 1) = 1
						ghelp = 1
						gosub *elona_help
					}
				}
			}
		}
	}
	msg_newline
	msgtemp = "  "
	if ( gdata(GDATA_AREA) == AREA_SHOW_HOUSE | gdata(GDATA_AREA) == AREA_ARENA | gdata(GDATA_AREA) == AREA_PET_ARENA ) {
		usermapid = 0
	}
	rdtry = 0
	fixstart = 0
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_RANDOM_DUNGEON ) {
		if ( gdata(GDATA_LEVEL) == adata(ADATA_MAX_LEVEL, gdata(GDATA_AREA)) ) {
			if ( adata(ADATA_BOSS, gdata(GDATA_AREA)) > 0 ) {
				chara_vanquish adata(ADATA_BOSS, gdata(GDATA_AREA))
				adata(ADATA_BOSS, gdata(GDATA_AREA)) = -1
			}
		}
	}
	if ( gdata(GDATA_QUEST) == QUEST_TYPE_THIEVES ) {
		gdata(GDATA_QUEST) = QUEST_TYPE_NONE
	}
	repeat MAX_CHARA_TOTAL
		if ( cnt != CHARA_PLAYER ) {
			cdata(CDATA_CAN_REVIVE, cnt) = 1
		}
		cdata(CDATA_FRIENDSHIP, CHARA_PLAYER) = 0
		cbitmod CHARA_BIT_MAGNETISM_S_POLE, cnt, FALSE
		cbitmod CHARA_BIT_MAGNETISM_N_POLE, cnt, FALSE
		if ( gdata(GDATA_AREA) == AREA_WILDERNESS ) {
			gdata(GDATA_FLAG_COLLECTED_WISHES) = 0
		}
		cdata(CDATA_POWER_GAUGE, cnt) = 0
		if ( cnt < MAX_CHARA_FOLLOWER ) {
			if ( cdata(CDATA_ROLE_SHOP_LEVEL, cnt) > 0 ) {
				cdata(CDATA_POWER_GAUGE, cnt) = 3
			}
		}
		cdata(CDATA_DRAIN_HP, cnt) = 0
		gdata(GDATA_FLAG_MINEFIELD_QUEST_LEVEL) = 0
		if ( cdata(CDATA_EXIST, cnt) != CHAR_STATE_ALIVE ) {
			continue
		}
		if ( cdata(CDATA_ALLIED, cnt) == 100 ) {
			cdata(CDATA_THIRST, cnt) = 10000 + 1000
		}
		cdata(CDATA_CONDITION_GRAVITY, cnt) = 0
		if ( cdata(CDATA_ID, cnt) == CREATURE_ID_LAST_DANCER ) {
			if ( cbit(CHARA_BIT_SANDBAG, cnt) == 0 ) {
				if ( cdata(CDATA_ALLIED, cnt) == 0 ) {
					cdata(CDATA_EXIST, cnt) = CHAR_STATE_DEAD
					map(cdata(CDATA_X, cnt), cdata(CDATA_Y, cnt), 1) = 0
				}
			}
		}
	loop
	gdata(GDATA_SENSE_OBJECT) = 0
	gdata(GDATA_FLAG_DUEL_TARGET) = -1
	item_find ITEM_ID_DD_CEMETERY_KEY, 3, 1
	if ( stat != (-1) ) {
		ci = stat
		if ( inv(INV_ITEM_NUM, ci) >= 1 ) {
			invfile = 9
			file = "shoptmp.s2"
			fmode = 4
			gosub *game_ctrlFile
			file = "shop" + 9 + ".s2"
			existwrapper exedir + "tmp\\" + file
			if ( strsize != (-1) ) {
				fmode = 3
				gosub *game_ctrlFile
			}
			else {
				inv_getheader -1
				repeat invrange, invhead
					inv(INV_ITEM_NUM, cnt) = 0
				loop
			}
			mode = MODELIST_SHOP
			repeat MAX_CHARA_TOTAL
				if ( cdata(CDATA_EXIST, cnt) != CHAR_STATE_ALIVE ) {
					continue
				}
				if ( cnt == CHARA_PLAYER ) {
					continue
				}
				tc = cnt
				if ( cbit(CHARA_BIT_LIVESTOCK, tc) != 1 ) {
					if ( tc >= MAX_CHARA_FOLLOWER ) {
						if ( cbit(CHARA_BIT_NECRO, tc) == 1 ) {
							necrop = 0
							if ( cdata(CDATA_ID, tc) == CREATURE_ID_CAT_ZOMBIE ) {
								necrop = 2
							}
							if ( cdata(CDATA_ID, tc) == CREATURE_ID_ZOMBIE ) {
								necrop = 3
							}
							if ( cdata(CDATA_ID, tc) == CREATURE_ID_MUMMY ) {
								necrop = 4
							}
							if ( cdata(CDATA_ID, tc) == CREATURE_ID_SKELETON_WARRIOR ) {
								necrop = 5
							}
							if ( cdata(CDATA_ID, tc) == CREATURE_ID_LICH ) {
								necrop = 6
							}
							if ( cdata(CDATA_ID, tc) == CREATURE_ID_NECRO_DOLL ) {
								necrop = 7
							}
							if ( cdata(CDATA_ID, tc) == CREATURE_ID_DRAGON_ZOMBIE ) {
								necrop = 8
							}
							if ( cdata(CDATA_ID, tc) == CREATURE_ID_DEAD_EYES_BLOOD_DRAGON ) {
								necrop = 9
							}
							necrop3 = cdata(CDATA_CHARA_PIC, tc)
							if ( necrop != 0 ) {
								if ( inv_getspace(CHARA_PLAYER) != 0 ) {
									flt
									itemcreate 0, ITEM_ID_COFFIN_OF_NECROMANCY, -1, -1, 0
									inv(INV_ITEM_PARAM1, ci) = necrop
									inv(INV_ITEM_PARAM2, ci) = cdata(CDATA_FORM_SHIFT_PIC, tc)
									inv(INV_ITEM_WEIGHT, ci) += necrop * 1000
									inv(INV_ITEM_CHARGE, ci) = 6666
									inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_NORMAL
									inv(INV_ITEM_KNOWN, ci) = ITEM_KNOWN_NECRO
									inv(INV_ITEM_CHARA_PIC, ci) = necrop3
									item_stack CHARA_PLAYER, ci, 1
								}
								else {
									flt
									itemcreate -1, ITEM_ID_COFFIN_OF_NECROMANCY, -1, -1, 1
									inv(INV_ITEM_PARAM1, ci) = necrop
									inv(INV_ITEM_PARAM2, ci) = cdata(CDATA_FORM_SHIFT_PIC, tc)
									inv(INV_ITEM_WEIGHT, ci) += necrop * 1000
									inv(INV_ITEM_CHARGE, ci) = 6666
									inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_NORMAL
									inv(INV_ITEM_KNOWN, ci) = ITEM_KNOWN_NECRO
									inv(INV_ITEM_CHARA_PIC, ci) = necrop3
								}
							}
							chara_vanquish tc
						}
					}
				}
			loop
			file = "shop" + invfile + ".s2"
			fmode = 4
			gosub *game_ctrlFile
			file = "shoptmp.s2"
			fmode = 3
			gosub *game_ctrlFile
			mode = MODELIST_MAIN
		}
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) != AREA_SHOP & adata(ADATA_ID, gdata(GDATA_AREA)) != AREA_RANCH ) {
		adata(ADATA_SHOP_SALE_RESTRICTION, gdata(GDATA_AREA)) = 0
	}
	gdata(GDATA_AREA_PREV) = gdata(GDATA_AREA)
	if ( gdata(GDATA_AREA_PREV) == AREA_OL_DRAN ) {
		if ( gdata(GDATA_LEVEL) == 5 ) {
			if ( gdata(GDATA_FLAG_SUB_KARAVIKA_OF_SONG_AND_DANCE) \ 3 == 0 ) {
				txtef COLOR_GREEN
				txt lang("コンサートを守り抜いた！", "A Legendary stage!")
			}
			else {
				txtef COLOR_PURPLE
				txt lang("コンサートを守れなかった…", "The party turned out to be a big flop...")
			}
		}
	}
	if ( gdata(GDATA_AREA_PREV) == AREA_DOCK ) {
		if ( gdata(GDATA_LEVEL) == 100 ) {
			snd SOUNDLIST_BOLT1
			txt lang("あなた達は小型艇で消毒を行ってから帰還した。", "You return via a small boat after disinfecting it.")
			repeat MAX_CHARA_TOTAL
				if ( cdata(CDATA_EXIST, cnt) != CHAR_STATE_ALIVE ) {
					continue
				}
				cdata(CDATA_CONDITION_BLEED, cnt) = 0
				cdata(CDATA_CONDITION_POISON, cnt) = 0
			loop
			gdata(GDATA_HOUR) += 2
			gosub *advance_hour
		}
	}
	if ( gdata(GDATA_AREA_PREV) == AREA_BLIMP ) {
		if ( gdata(GDATA_LEVEL) == 100 ) {
			snd SOUNDLIST_BOLT1
			txt lang("あなた達はエウダーナ王都から帰還した。", "You return from the Eulderna capital.")
			gdata(GDATA_HOUR) += 2
			gosub *advance_hour
		}
	}
	if ( gdata(GDATA_AREA_PREV) == AREA_NOYEL ) {
		if ( gdata(GDATA_LEVEL) == 100 ) {
			snd SOUNDLIST_BOLT1
			await 300
			snd SOUNDLIST_BOLT1
			await 300
			snd SOUNDLIST_ATK_ICE
			await 300
			snd SOUNDLIST_ATK_ICE
			await 300
			snd SOUNDLIST_ATK_ICE
			await 300
			snd SOUNDLIST_EXITMAP1
			repeat MAX_CHARA_TOTAL
				if ( cdata(CDATA_EXIST, cnt) != CHAR_STATE_ALIVE ) {
					continue
				}
				if ( cdata(CDATA_ALLIED, cnt) == 0 & cnt != CHARA_PLAYER ) {
					continue
				}
				cdata(CDATA_CONDITION_CHILLS, cnt) = 50
				cdata(CDATA_HP, cnt) -= 2000 - sdata(SKILL_RES_COLD, cnt) / 50 * 10
				if ( cdata(CDATA_HP, cnt) < 0 ) {
					cdata(CDATA_HP, cnt) = 1
				}
			loop
			txt lang("あなた達はどうにかノイエルに戻ってこられた。", "You somehow make it back to Noyel.")
			gdata(GDATA_HOUR) += 2
			gosub *advance_hour
		}
	}
	if ( gdata(GDATA_AREA_PREV) == AREA_NT_SOUTH_BORDER ) {
		if ( gdata(GDATA_LEVEL) == 100 ) {
			snd SOUNDLIST_LOCKED1
			await 300
			snd SOUNDLIST_BOLT1
			await 300
			snd SOUNDLIST_BOLT1
			await 300
			snd SOUNDLIST_VOMIT
			await 300
			snd SOUNDLIST_BALL1
			await 300
			snd SOUNDLIST_EXITMAP1
			repeat MAX_CHARA_TOTAL
				if ( cdata(CDATA_EXIST, cnt) != CHAR_STATE_ALIVE ) {
					continue
				}
				if ( cdata(CDATA_ALLIED, cnt) == 0 & cdata(CDATA_ID, cnt) != CREATURE_ID_REGULUS_THE_ALTERED & cnt != 0 ) {
					continue
				}
				cdata(CDATA_HP, cnt) -= 2000
				if ( cdata(CDATA_HP, cnt) < 0 ) {
					cdata(CDATA_HP, cnt) = 1
				}
			loop
			txt lang("あなた達はどうにか関所に戻ってこられた。", "You return to the border station.")
			gdata(GDATA_HOUR) += 2
			gosub *advance_hour
		}
	}
	if ( gdata(GDATA_AREA_PREV) == AREA_SHELTER ) {
		gdata(GDATA_AREA) = gdata(GDATA_RETURN_AREA)
		gdata(GDATA_LEVEL) = gdata(GDATA_RETURN_LEVEL)
		mapstartx = gdata(GDATA_RETURN_X)
		mapstarty = gdata(GDATA_RETURN_Y)
		gdata(GDATA_LEVEL_START_ON) = 7
		fixstart = 1
		levelexitby = 5
	}
	if ( levelexitby == 4 ) {
		cell_featread cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
		if ( gdata(GDATA_AREA) == AREA_HOME ) {
			if ( cdata(CDATA_X_NEW, cc) >= 0 & cdata(CDATA_X_NEW, cc) <= mdata(MDATA_WIDTH) - 1 & cdata(CDATA_Y_NEW, cc) >= 0 & cdata(CDATA_Y_NEW, cc) <= mdata(MDATA_HEIGHT) - 1 | gdata(GDATA_LEVEL) == 1 ) {
				if ( mapitemfind(cdata(CDATA_X, cc), cdata(CDATA_Y, cc), ITEM_ID_DOWNSTAIRS) != (-1) ) {
					feat(1) = CELL_FEATURE_DOWNSTAIRS, 0
				}
				if ( mapitemfind(cdata(CDATA_X, cc), cdata(CDATA_Y, cc), ITEM_ID_UPSTAIRS) != (-1) ) {
					feat(1) = CELL_FEATURE_UPSTAIRS, 0
				}
			}
		}
		f = 0
		if ( feat(1) == CELL_FEATURE_DOWNSTAIRS ) {
			msgtemp += lang("階段を降りた。", "You walk down the stairs.")
			f = 1
			gdata(GDATA_LEVEL_START_ON) = 1
			mdata(MDATA_DOWNSTAIRS_POS) = cdata(CDATA_Y, CHARA_PLAYER) * 1000 + cdata(CDATA_X, CHARA_PLAYER)
			if ( feat(2) == 0 ) {
				gdata(GDATA_LEVEL)++
				gdata(GDATA_LEVEL) -= (adata(ADATA_START_ON, gdata(GDATA_AREA)) == 2) * 2
			}
			else {
				gdata(GDATA_LEVEL) = feat(2)
			}
		}
		if ( feat(1) == CELL_FEATURE_UPSTAIRS ) {
			if ( gdata(GDATA_AREA_PREV) != AREA_NT_SOUTH_BORDER & gdata(GDATA_LEVEL) != 100 ) {
				msgtemp += lang("階段を昇った。", "You walk up the stairs.")
			}
			f = 1
			gdata(GDATA_LEVEL_START_ON) = 2
			mdata(MDATA_UPSTAIRS_POS) = cdata(CDATA_Y, CHARA_PLAYER) * 1000 + cdata(CDATA_X, CHARA_PLAYER)
			if ( feat(2) == 0 ) {
				gdata(GDATA_LEVEL)--
				gdata(GDATA_LEVEL) += (adata(ADATA_START_ON, gdata(GDATA_AREA)) == 2) * 2
			}
			else {
				gdata(GDATA_LEVEL) = feat(2)
			}
			zyuusann = 100
		}
		else {
			zyuusann = 0
		}
		if ( f == 0 ) {
			if ( mdata(MDATA_TYPE) == MAP_TYPE_WORLD ) {
				gdata(GDATA_WORLD_X) = cdata(CDATA_X, cc)
				gdata(GDATA_WORLD_Y) = cdata(CDATA_Y, cc)
				gdata(GDATA_LEVEL) = 1
				if ( feat(2) != 0 | feat(3) != 0 ) {
					gdata(GDATA_AREA) = feat(2) + feat(3) * 100
					if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_VOID ) {
						if ( itemfind(CHARA_PLAYER, ITEM_ID_LICENCE_THE_VOID_EXPLORER) == (-1) ) {
							txt lang("あなたはこの洞窟の探索を許可されていない。", "You are not permitted to explore this dungeon.")
							msg_halt
							gdata(GDATA_AREA) = AREA_WILDERNESS
						}
					}
					if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_PYRAMID ) {
						if ( gdata(GDATA_FLAG_SUB_PYRAMID) == 0 ) {
							txt lang("あなたはピラミッドへの招待状を持っていない。", "You don't have an invitation.")
							msg_halt
							gdata(GDATA_AREA) = AREA_WILDERNESS
						}
					}
					if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_JAIL ) {
						txt lang("あなたはガードに追い返された。", "The guards turn you away from the jail.")
						msg_halt
						gdata(GDATA_AREA) = AREA_WILDERNESS
					}
					if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_JAIL2 ) {
						txt lang("あなたはガードに追い返された。", "The guards turn you away from the jail.")
						msg_halt
						gdata(GDATA_AREA) = AREA_WILDERNESS
					}
					if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_MOUNTAIN_PASS_WINDY ) {
						if ( gdata(GDATA_FLAG_MAIN) < 300 ) {
							txt lang("高濃度のエーテルが辺りに充満している。近寄らない方がいいだろう。", "A high concentration of ether fills the area. You'd better stay away.")
							msg_halt
							gdata(GDATA_AREA) = AREA_WILDERNESS
						}
					}
					if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_REMIDO ) {
						if ( gdata(GDATA_FLAG_MAIN) < 260 ) {
							txt lang("イェルス軍が施した電子ロックによって入口は固く閉ざされていた。ロックを解除する方法を探そう。", "The Yerles army has closed the entrance via an electronic lock. I should look for a way through.")
							msg_halt
							gdata(GDATA_AREA) = AREA_WILDERNESS
						}
					}
					if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_ST_NORTH_BORDER ) {
						if ( gdata(GDATA_FLAG_MAIN) == 366 ) {
							txt lang("先にメルガスのガベラのところに話を聞きに行こう。", "I should hear what Gavela in Melugas has to say.")
							msg_halt
							gdata(GDATA_AREA) = AREA_WILDERNESS
						}
					}
					if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_MAID_MANSION ) {
						if ( gdata(GDATA_FLAG_SUB_MANSION_FOR_SALE) < 1000 ) {
							txt lang("どうやら屋敷は売りに出されているらしく、覗いても誰もいなかった。", "No one answered the door. There's a For Sale sign in front of the mansion.")
							msg_halt
							gdata(GDATA_AREA) = AREA_WILDERNESS
						}
					}
					if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_HARVEST_SHIP ) {
						if ( gdata(GDATA_FLAG_SUB_THE_DISTANT_SEA_OF_STARS) < 2 ) {
							txt lang("正面の入り口は固く閉ざされている。どこから入ればよいのだろう。", "The front entrance is shut tight. You have no idea how to get inside.")
							msg_halt
							gdata(GDATA_AREA) = AREA_WILDERNESS
						}
					}
					if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_IRMA_THALIA_WORKSHOP ) {
						if ( gdata(GDATA_FLAG_SUB_BEYOND_THE_GENERATIONS) < 8 ) {
							gdata(GDATA_AREA) = AREA_WILDERNESS
						}
					}
					if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_YLVA_LIBRARY | adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_BLIMP | adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_AMUR_CAGE | adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_MIRAGE_TOWER | adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_RUST_PLAZA | adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_DOCK | adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_OL_DRAN | adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_WAR_GROUND ) {
						if ( gdata(GDATA_FLAG_MAIN) < 368 ) {
							txt lang("先にノルンに言われた森の遺跡に行こう。", "I should go to the ruin of forest ahead.")
							msg_halt
							gdata(GDATA_AREA) = AREA_WILDERNESS
						}
					}
					if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_CHAOS_CRADLE ) {
						if ( gdata(GDATA_FLAG_MAIN) < 370 ) {
							txt lang("ただならぬ気配を感じる。もう少しこのネフィアについて調べてから探索したほうがよいだろう。", "You sense an extraordinary presence. It would be better to learn more information about this Nefia before exploring it.")
							msg_halt
							gdata(GDATA_AREA) = AREA_WILDERNESS
						}
					}
					if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_GUARDIAN_SHRINE ) {
						if ( gdata(GDATA_FLAG_MAIN) < 390 ) {
							txt lang("門が固く閉じられている…。", "The gate is firmly closed...")
							msg_halt
							gdata(GDATA_AREA) = AREA_WILDERNESS
						}
					}
				}
				else {
					if ( gdata(GDATA_WORLD_X) == 51 & gdata(GDATA_WORLD_Y) == 39 & gdata(GDATA_WORLD) == AREA_LOST_YLVA ) {
						txt lang("中に入ろうとすると、塔は幻のように霧散してしまった…。", "When you try to enter it, the tower dissipates as a mirage...")
						msg_halt
					}
					gdata(GDATA_AREA) = AREA_WILDERNESS
				}
				if ( feat(1) != CELL_FEATURE_NEFIA ) {
					gdata(GDATA_AREA) = AREA_WILDERNESS
				}
			}
			if ( mdata(MDATA_TYPE) == MAP_TYPE_TOWN | mdata(MDATA_TYPE) == MAP_TYPE_LOCAL | mdata(MDATA_TYPE) == MAP_TYPE_HOME | mdata(MDATA_TYPE) == MAP_TYPE_FIELD | mdata(MDATA_TYPE) == MAP_TYPE_VILLAGE ) {
				gdata(GDATA_AREA) = gdata(GDATA_WORLD)
			}
		}
		if ( mdata(MDATA_TYPE) >= MAP_TYPE_DUNGEON_MIN | mdata(MDATA_TYPE) == MAP_TYPE_FIELD | gdata(GDATA_AREA) == AREA_DOCK | gdata(GDATA_AREA) == AREA_OBLIVION_PALACE ) {
			if ( gdata(GDATA_LEVEL) < adata(ADATA_MIN_LEVEL, gdata(GDATA_AREA)) ) {
				gdata(GDATA_AREA) = gdata(GDATA_WORLD)
			}
		}
		if ( adata(ADATA_TYPE, gdata(GDATA_AREA)) == MAP_TYPE_TOWN ) {
			if ( gdata(GDATA_AREA) == gdata(GDATA_AREA_PREV) ) {
				if ( gdata(GDATA_LEVEL) == 1 ) {
					msgtemp += lang(mapname(gdata(GDATA_AREA)) + "の表層に戻った。", "You returned to the surface of " + mapname(gdata(GDATA_AREA)) + ".")
				}
				else {
					msgtemp += lang(mapname(gdata(GDATA_AREA)) + "の表層を後にした。", "You left the surface of " + mapname(gdata(GDATA_AREA)) + ".")
				}
			}
		}
	}
	if ( mdata(MDATA_TYPE) == MAP_TYPE_QUEST ) {
		rq = gdata(GDATA_QUEST_REF)
		gosub *quest_exit
		gdata(GDATA_AREA) = gdata(GDATA_RETURN_AREA)
		gdata(GDATA_LEVEL) = gdata(GDATA_RETURN_LEVEL)
		mapstartx = gdata(GDATA_RETURN_X)
		mapstarty = gdata(GDATA_RETURN_Y)
		gdata(GDATA_LEVEL_START_ON) = 7
		fixstart = 1
	}
	if ( levelexitby == 2 ) {
		gdata(GDATA_AREA) = gdata(GDATA_TELEPORT_AREA)
		gdata(GDATA_LEVEL) = gdata(GDATA_TELEPORT_LEVEL)
		if ( gdata(GDATA_QUEST) == QUEST_TYPE_NONE ) {
			if ( gdata(GDATA_AREA_PREV) != AREA_WILDERNESS ) {
				gdata(GDATA_WORLD_X) = adata(ADATA_X, gdata(GDATA_AREA))
				gdata(GDATA_WORLD_Y) = adata(ADATA_Y, gdata(GDATA_AREA))
				gosub *weather_change
			}
		}
		if ( gdata(GDATA_AREA) == AREA_VALM ) {
			if ( gdata(GDATA_LEVEL) == 30 ) {
				mapstartx = 18
				mapstarty = 65
				gdata(GDATA_LEVEL_START_ON) = 7
				fixstart = 1
			}
		}
		if ( gdata(GDATA_AREA) == AREA_NOYEL ) {
			if ( gdata(GDATA_LEVEL) == 100 ) {
				mapstartx = 20
				mapstarty = 56
				gdata(GDATA_LEVEL_START_ON) = 7
				fixstart = 1
			}
		}
		if ( gdata(GDATA_AREA) == AREA_SEMINAR ) {
			if ( gdata(GDATA_LEVEL) > 1 ) {
				mapstartx = 11
				mapstarty = 6
				gdata(GDATA_LEVEL_START_ON) = 7
				fixstart = 1
			}
		}
		if ( gdata(GDATA_AREA) == AREA_JAIL ) {
			mapstartx = 29
			mapstarty = 3
			gdata(GDATA_LEVEL_START_ON) = 7
			fixstart = 1
		}
	}
	if ( cdata(CDATA_EXIST, CHARA_PLAYER) == CHAR_STATE_DEAD ) {
		rc = CHARA_PLAYER
		gosub *chara_respawn
		if ( gdata(GDATA_WORLD) == adata(ADATA_PARENT, AREA_HOME) ) {
			gdata(GDATA_AREA) = AREA_HOME
			gdata(GDATA_LEVEL) = 1
		}
		if ( gdata(GDATA_WORLD) != adata(ADATA_PARENT, AREA_HOME) ) {
			if ( gdata(GDATA_WORLD) == AREA_NORTH_TYRIS ) {
				gdata(GDATA_AREA) = AREA_GRAVEYARD
				gdata(GDATA_LEVEL) = 1
			}
			if ( gdata(GDATA_WORLD) == AREA_SOUTH_TYRIS ) {
				gdata(GDATA_AREA) = AREA_RUOZA
				gdata(GDATA_LEVEL) = 1
			}
			if ( gdata(GDATA_WORLD) == AREA_LOST_YLVA ) {
				gdata(GDATA_AREA) = AREA_ULM_LESON
				gdata(GDATA_LEVEL) = 1
			}
			if ( gdata(GDATA_WORLD) == AREA_AIMWELL ) {
				gdata(GDATA_AREA) = AREA_ZAILE
				gdata(GDATA_LEVEL) = 1
			}
		}
	}
	if ( rdtry > 1 ) {
		msgtemp += "(再生成" + rdtry + "回)"
	}
	if ( gdata(GDATA_AREA) != gdata(GDATA_AREA_PREV) ) {
		if ( mdata(MDATA_TYPE) == MAP_TYPE_TOWN | gdata(GDATA_TRAVEL_TIME) == 0 | gdata(GDATA_AREA_PREV) == AREA_HOME | mdata(MDATA_TYPE) == MAP_TYPE_VILLAGE ) {
			gdata(GDATA_TRAVEL_TIME) = gdata(GDATA_HOUR) + gdata(GDATA_DAY) * 24 + gdata(GDATA_MONTH) * 24 * 30 + gdata(GDATA_YEAR) * 24 * 30 * 12
			gdata(GDATA_LAST_TOWN) = gdata(GDATA_AREA_PREV)
		}
		if ( mdata(MDATA_TYPE) != MAP_TYPE_WORLD ) {
			if ( mdata(MDATA_TYPE) != MAP_TYPE_LOCAL | mdata(MDATA_TYPE) == MAP_TYPE_HOME ) {
				if ( fixtransfermap == 0 ) {
					gdata(GDATA_WORLD_X) = adata(ADATA_X, gdata(GDATA_AREA_PREV))
					gdata(GDATA_WORLD_Y) = adata(ADATA_Y, gdata(GDATA_AREA_PREV))
				}
				else {
					fixtransfermap = 0
				}
			}
		}
		if ( fixstart == 0 ) {
			gdata(GDATA_LEVEL_START_ON) = adata(ADATA_START_ON, gdata(GDATA_AREA))
		}
		if ( evfind(EVENT_DEAD) ) {
			msgtemp += lang("あなたは復帰ポイントまで運ばれた。", "You were delivered to your home.")
			gosub *weather_change
		}
		else {
			if ( adata(ADATA_TYPE, gdata(GDATA_AREA_PREV)) == MAP_TYPE_WORLD ) {
				if ( gdata(GDATA_FLAG_WORLD_MAP_VEHICLE_KIND) > 0 ) {
					msgtemp += lang("乗り物から降りて" + mapname(gdata(GDATA_AREA)) + "に入った。", "You got off the world-vehicle and entered " + mapname(gdata(GDATA_AREA)) + ".")
				}
				if ( gdata(GDATA_FLAG_WORLD_MAP_VEHICLE_KIND) == 0 ) {
					msgtemp += lang(mapname(gdata(GDATA_AREA)) + "に入った。", "You entered " + mapname(gdata(GDATA_AREA)) + ".")
				}
			}
			else {
				if ( mdata(MDATA_TYPE) == MAP_TYPE_QUEST ) {
					msgtemp += lang(mapname(gdata(GDATA_AREA)) + "に戻った。", " You returned to " + mapname(gdata(GDATA_AREA)) + ".")
				}
				else {
					msgtemp += lang(mapname(gdata(GDATA_AREA_PREV)) + "を後にした。", "You left " + mapname(gdata(GDATA_AREA_PREV)) + ".")
				}
			}
		}
		if ( gdata(GDATA_FLAG_WORLD_MAP_VEHICLE_KIND) == VEHICLE_NONE ) {
			if ( gdata(GDATA_CARGO_WEIGHT) > gdata(GDATA_CARGO_LIMIT) ) {
				if ( adata(ADATA_TYPE, gdata(GDATA_AREA)) == MAP_TYPE_WORLD | adata(ADATA_TYPE, gdata(GDATA_AREA)) == MAP_TYPE_LOCAL ) {
					msgtemp += lang("荷車の重量超過でかなり鈍足になっている！ ", "The weight of your cargo burdens your traveling speed.")
				}
			}
		}
		if ( gdata(GDATA_FLAG_WORLD_MAP_VEHICLE_KIND) > VEHICLE_NONE ) {
			if ( gdata(GDATA_CARGO_WEIGHT) > gdata(GDATA_CARGO_LIMIT) ) {
				if ( adata(ADATA_TYPE, gdata(GDATA_AREA)) == MAP_TYPE_WORLD ) {
					msgtemp += lang("荷車の重量超過でかなり鈍足になっている！ ", "The weight of your cargo burdens your traveling speed.")
				}
			}
		}
	}
	ima = int(gettime(5)) + int(gettime(4)) * 60 + int(gettime(3)) * 24 * 60
	if ( int(gettime(1)) == gdata(STARTING_GDATA_FLAG + 350) & int(gettime(0)) == gdata(STARTING_GDATA_FLAG + 351) | gdata(STARTING_GDATA_FLAG + 349) == 0 ) {
		if ( ima >= gdata(STARTING_GDATA_FLAG + 349) + 10 ) { // if now >= gametime_min + 10 min
			gdata(GDATA_FLAG_RARE_DROP) = 100
		}
		else {
			gdata(GDATA_FLAG_RARE_DROP) = 0
		}
	}
	else {
		if ( ima >= 1440 + 10 ) { // if now >= 24 * 60 + 10 min
			gdata(GDATA_FLAG_RARE_DROP) = 100
		}
		else {
			gdata(GDATA_FLAG_RARE_DROP) = 0
		}
	}
	ima = 0

	/********** ORIGINAL - BEGINNING **********

	if ( gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_PURGE ) {
		gdata(GDATA_FLAG_RARE_DROP) = 100
	}

	 ********** ORIGINAL - ENDING **********/

	/********** BLOODYSHADE CUSTOM - BEGINNING **********/ // Re-enable save-scumming.

	if ( TweakData(TWEAK_GAMEPLAY_ENABLE_SAVE_SCUMMING, TWEAK_CATEGORY_GAMEPLAY) == 1 | gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_PURGE ) {
		gdata(GDATA_FLAG_RARE_DROP) = 100
	}

	/********** BLOODYSHADE CUSTOM - ENDING **********/

	if ( gdata(GDATA_AREA) == AREA_LARNA ) {
		if ( gdata(GDATA_LEVEL) == 2 ) {
			gdata(GDATA_AREA) = AREA_MOUNTAIN_PASS
			gdata(GDATA_LEVEL) = adata(ADATA_MAX_LEVEL, gdata(GDATA_AREA)) - 1
			gdata(GDATA_LEVEL_START_ON) = 1
			msgtemp += lang("マウンテンパスに降りた。", "You entered the Mountain Pass.")
		}
	}
	if ( gdata(GDATA_AREA) == AREA_MOUNTAIN_PASS ) {
		if ( gdata(GDATA_LEVEL) == adata(ADATA_MAX_LEVEL, gdata(GDATA_AREA)) ) {
			gdata(GDATA_AREA) = AREA_LARNA
			gdata(GDATA_LEVEL) = 1
			gdata(GDATA_LEVEL_START_ON) = 2
			msgtemp += lang("ラーナの村に辿りついた。", "You reached the town of Larna.")
		}
	}
	if ( gdata(GDATA_AREA) == AREA_ANCIENT_GARDEN ) {
		if ( gdata(GDATA_LEVEL) == 2 ) {
			gdata(GDATA_AREA) = AREA_MOUNTAIN_PASS_WINDY
			gdata(GDATA_LEVEL) = adata(ADATA_MAX_LEVEL, gdata(GDATA_AREA)) - 1
			gdata(GDATA_LEVEL_START_ON) = 1
			msgtemp += lang("風の山道に降りた。", "You entered the Mountain Pass.")
		}
	}
	if ( gdata(GDATA_AREA) == AREA_MOUNTAIN_PASS_WINDY ) {
		if ( gdata(GDATA_LEVEL) == adata(ADATA_MAX_LEVEL, gdata(GDATA_AREA)) ) {
			gdata(GDATA_AREA) = AREA_ANCIENT_GARDEN
			gdata(GDATA_LEVEL) = 1
			gdata(GDATA_LEVEL_START_ON) = 2
			msgtemp += lang("古の庭園に辿りついた。", "You reached the ancient garden.")
		}
	}
	repeat MAX_CHARA_FOLLOWER
		cdata(CDATA_AI_AGGRO, cnt) = 0
		cdata(CDATA_TARGET, cnt) = 0
		rowactend cnt
		if ( cdata(CDATA_EXIST, cnt) != CHAR_STATE_ALIVE ) {
			if ( cdata(CDATA_EXIST, cnt) == CHAR_STATE_SUSPEND ) {
				cdata(CDATA_EXIST, cnt) = CHAR_STATE_ALIVE
			}
			continue
		}
		map(cdata(CDATA_X, cnt), cdata(CDATA_Y, cnt), 1) = 0
		if ( cnt != CHARA_PLAYER ) {
			if ( cdata(CDATA_AREA, cnt) != 0 ) {
				cdata(CDATA_EXIST, cnt) = CHAR_STATE_ALLY_WORK
			}
		}
	loop
	if ( mdata(MDATA_CAN_SAVE) == 1 ) {
		gosub *map_save
	}
	else {
		gosub *map_clean
		existwrapper exedir + "tmp\\mdata_" + mid + ".s2"
		if ( strsize != (-1) ) {
			fmode = 11
			gosub *game_ctrlFile
		}
		repeat MAX_CHARA_TOTAL - MAX_CHARA_SAVE, MAX_CHARA_SAVE
			if ( cdata(CDATA_EXIST, cnt) != CHAR_STATE_DEAD ) {
				npcmemory(1, cdata(CDATA_ID, cnt))--
			}
		loop
	}
	if ( adata(ADATA_TYPE, gdata(GDATA_AREA)) != MAP_TYPE_WORLD & adata(ADATA_TYPE, gdata(GDATA_AREA)) != MAP_TYPE_LOCAL & gdata(GDATA_AREA) != AREA_SHOW_HOUSE ) {
		autosave = 1 * (gdata(GDATA_AREA) != AREA_SHOW_HOUSE)
	}
	mode = MODELIST_NEW
	goto *map_init

*map_clean
	repeat MAX_CHARA_SAVE
		rowactend cnt
		if ( cdata(CDATA_AI_ITEM, cnt) == 0 ) {
			continue
		}
		if ( inv(INV_ITEM_ID, cdata(CDATA_AI_ITEM, cnt)) == ITEM_ID_ROD_LIGHTNING_BALL | inv(INV_ITEM_ID, cdata(CDATA_AI_ITEM, cnt)) == ITEM_ID_ROD_ECLIPSE | inv(INV_ITEM_ID, cdata(CDATA_AI_ITEM, cnt)) == ITEM_ID_ROD_FIRE_WALL | inv(INV_ITEM_ID, cdata(CDATA_AI_ITEM, cnt)) == ITEM_ID_ROD_ACID_GROUND | inv(INV_ITEM_ID, cdata(CDATA_AI_ITEM, cnt)) == ITEM_ID_ROD_LIGHTNING_BOLT | inv(INV_ITEM_ID, cdata(CDATA_AI_ITEM, cnt)) == ITEM_ID_ROD_FIRE_BOLT | inv(INV_ITEM_ID, cdata(CDATA_AI_ITEM, cnt)) == ITEM_ID_ROD_ICE_BOLT | inv(INV_ITEM_ID, cdata(CDATA_AI_ITEM, cnt)) == ITEM_ID_ROD_MAGIC_MISSILE | inv(INV_ITEM_ID, cdata(CDATA_AI_ITEM, cnt)) == ITEM_ID_ROD_POISON_BALL | inv(INV_ITEM_ID, cdata(CDATA_AI_ITEM, cnt)) == ITEM_ID_ROD_MAGIC_LASER | inv(INV_ITEM_ID, cdata(CDATA_AI_ITEM, cnt)) == ITEM_ID_ROD_BUBBLE_BALL ) {
			continue
		}
		if ( inv(INV_ITEM_ID, cdata(CDATA_AI_ITEM, cnt)) == ITEM_ID_LASER_BAZOOKA | inv(INV_ITEM_ID, cdata(CDATA_AI_ITEM, cnt)) == ITEM_ID_M202_SPECIAL | inv(INV_ITEM_ID, cdata(CDATA_AI_ITEM, cnt)) == ITEM_ID_PANZERFAUST_X | inv(INV_ITEM_ID, cdata(CDATA_AI_ITEM, cnt)) == ITEM_ID_CF_POTIOMAN | inv(INV_ITEM_ID, cdata(CDATA_AI_ITEM, cnt)) == ITEM_ID_CRUSH_POTIOMAN | inv(INV_ITEM_ID, cdata(CDATA_AI_ITEM, cnt)) == ITEM_ID_BATTLE_POTIOMAN | inv(INV_ITEM_ID, cdata(CDATA_AI_ITEM, cnt)) == ITEM_ID_SUPER_POTIOMAN ) {
			continue
		}
		cdata(CDATA_AI_ITEM, cnt) = 0
	loop
	repeat MAX_CHARA_ADVENTURER, MAX_CHARA_FOLLOWER
		if ( cdata(CDATA_EXIST, cnt) == CHAR_STATE_ALIVE ) {
			map(cdata(CDATA_X, cnt), cdata(CDATA_Y, cnt), 1) = 0
			cdata(CDATA_EXIST, cnt) = CHAR_STATE_ADV
		}
	loop
	return

*map_save
	gosub *map_clean
	repeat mdata(MDATA_HEIGHT)
		y = cnt
		repeat mdata(MDATA_WIDTH)
			map(cnt, y, 7) = 0
		loop
	loop
	fmode = 2
	gosub *game_ctrlFile
	file = "inv_" + mid + ".s2"
	fmode = 4
	gosub *game_ctrlFile
	return

*map_init
	proc "map_init"
	mapupdate = 0
	if ( gdata(GDATA_LEVEL) > adata(ADATA_MAX_LEVEL, gdata(GDATA_AREA)) ) {
		gdata(GDATA_LEVEL) = adata(ADATA_MAX_LEVEL, gdata(GDATA_AREA))
	}
	if ( gdata(GDATA_LEVEL) < adata(ADATA_MIN_LEVEL, gdata(GDATA_AREA)) ) {
		gdata(GDATA_LEVEL) = adata(ADATA_MIN_LEVEL, gdata(GDATA_AREA))
	}
	if ( gdata(GDATA_DEEPEST) < gdata(GDATA_LEVEL) ) {
		if ( gdata(GDATA_AREA) != AREA_SHELTER ) {
			gdata(GDATA_DEEPEST) = gdata(GDATA_LEVEL)
		}
	}
	if ( adata(ADATA_DEEPEST, gdata(GDATA_AREA)) < gdata(GDATA_LEVEL) ) {
		adata(ADATA_DEEPEST, gdata(GDATA_AREA)) = gdata(GDATA_LEVEL)
	}
	repeat MAX_CHARA_FOLLOWER
		if ( cnt == CHARA_PLAYER ) {
			continue
		}
		if ( cdata(CDATA_AREA, cnt) != 0 ) {
			if ( cdata(CDATA_AREA, cnt) == gdata(GDATA_AREA) ) {
				if ( cdata(CDATA_EXIST, cnt) == CHAR_STATE_ALLY_WORK ) {
					cdata(CDATA_EXIST, cnt) = CHAR_STATE_ALIVE
				}
			}
		}
		if ( cdata(CDATA_AREA, cnt) == AREA_HOME & gdata(GDATA_LEVEL) != cdata(CDATA_HOME, cnt) ) {
			cdata(CDATA_EXIST, cnt) = CHAR_STATE_ALLY_WORK
		}
	loop
	mid = "" + gdata(GDATA_AREA) + "_" + (100 + gdata(GDATA_LEVEL))
	if ( mode == MODELIST_CONTINUE ) {
		fmode = 1
		gosub *game_ctrlFile
		file = "inv_" + mid + ".s2"
		fmode = 3
		gosub *game_ctrlFile
		goto *map_begin
	}
	getkey a, 8
	if ( a ) {
		existwrapper exedir + "tmp\\mdata_" + mid + ".s2"
		if ( strsize != (-1) ) {
			dialog lang("マップを初期化しますか？（注：ゲームに影響が出る可能性があります。エラーが出てマップが読み込めない場合のみ、必ず元のセーブのバックアップをとった上で実行してください。）", "Reinitialize this map? (Warning, only do this if an error occurs when loading this map. Make sure you have a backup of the current save folder before doing this.)"), 3
			if ( stat == 6 ) {
				fmode = 11
				gosub *game_ctrlFile
			}
		}
	}
	if ( shelterd == 6 ) {
		shelterd = 0
		fmode = 11
		gosub *game_ctrlFile
	}
	if ( gdata(GDATA_AREA) == AREA_DOCK ) {
		if ( gdata(GDATA_FLAG_SUB_MISSION_FROM_GARZIEM) \ 10 == 2 ) {
			if ( gdata(GDATA_TELEPORT_LEVEL) == 70 ) {
				fmode = 11
				gosub *game_ctrlFile
			}
		}
	}
	if ( gdata(GDATA_AREA) == AREA_REMIDO ) {
		if ( gdata(GDATA_LEVEL) == 114 ) {
			if ( gdata(GDATA_FLAG_ORPHE_IN_REMIDO) == 0 & gdata(GDATA_FLAG_MAIN) < 270 ) {
				fmode = 11
				gosub *game_ctrlFile
			}
		}
	}
	existwrapper exedir + "tmp\\mdata_" + mid + ".s2"
	if ( strsize != (-1) ) {
		fmode = 1
		gosub *game_ctrlFile
		if ( mdata(MDATA_CAN_SAVE) == 0 ) {
			goto *map_init_main
		}
		if ( mdata(MDATA_VERSION) != gdata(GDATA_MAP_VERSION) | (gdata(GDATA_WORLD_RENEW) == 1 & mdata(MDATA_TYPE) == MAP_TYPE_WORLD) ) {
			if ( mdata(MDATA_TYPE) == MAP_TYPE_TOWN | mdata(MDATA_TYPE) == MAP_TYPE_VILLAGE | mdata(MDATA_TYPE) == MAP_TYPE_FIELD | mdata(MDATA_TYPE) == MAP_TYPE_WORLD ) {
				mapupdate = 1
				goto *map_init_main
			}
		}
		file = "inv_" + mid + ".s2"
		fmode = 3
		gosub *game_ctrlFile
		if ( mode == MODELIST_NEW ) {
			map_placeplayer
		}
		goto *map_preBegin
	}
*map_init_main
	proc "map_init_main"
	if ( mapupdate == 1 ) {
		proc "map_init_mapUpdate"
		maxnpcbk = 0
		dim rolebk, 2, 245
		repeat MAX_CHARA_TOTAL
			if ( cdata(CDATA_EXIST, cnt) == CHAR_STATE_DEAD ) {
				continue
			}
			if ( cdata(CDATA_ROLE, cnt) >= ROLE_SHOP_MIN & cdata(CDATA_ROLE, cnt) < ROLE_GUEST_MIN | cdata(CDATA_ROLE, cnt) == ROLE_GUEST_MERCHANT ) {
				rolebk(0, maxnpcbk) = cdata(CDATA_ROLE, cnt), cdata(CDATA_ROLE_SHOP_LEVEL, cnt)
				maxnpcbk++
			}
		loop
		maxmedal = 0
		dim medalbk, 2, 30
		repeat mdata(MDATA_HEIGHT)
			y = cnt
			repeat mdata(MDATA_WIDTH)
				x = cnt
				if ( map(x, y, 6) / 1000 \ 100 == 32 ) {
					if ( maxmedal < 30 ) {
						medalbk(0, maxmedal) = x, y
						maxmedal++
					}
				}
			loop
		loop
	}
	mdata(MDATA_RENEW) = 0
	repeat MAX_CHARA_TOTAL - MAX_CHARA_SAVE, MAX_CHARA_SAVE
		cdata(CDATA_EXIST, cnt) = CHAR_STATE_DEAD
	loop
	repeat MAX_INV_DATA - RANGE_INV1, RANGE_INV1
		inv(INV_ITEM_NUM, cnt) = 0
	loop
	dim mdata, 100
	mdata(MDATA_LEVEL) = gdata(GDATA_LEVEL)
	mdata(MDATA_TILE_FILE) = adata(ADATA_TILE_FILE, gdata(GDATA_AREA))
	mdata(MDATA_TILESET) = adata(ADATA_TILESET, gdata(GDATA_AREA))
	mdata(MDATA_TYPE) = adata(ADATA_TYPE, gdata(GDATA_AREA))
	mdata(MDATA_TIMESCALE) = adata(ADATA_TIME_SCALE, gdata(GDATA_AREA))
	mdata(MDATA_CAN_SAVE) = adata(ADATA_CAN_SAVE, gdata(GDATA_AREA))
	mdata(MDATA_RESTORE_POS) = adata(ADATA_RESTORE_POS, gdata(GDATA_AREA))
	mdata(MDATA_FIELD) = adata(ADATA_FIELD, gdata(GDATA_AREA))
	if ( mapupdate ) {
		randomize gdata(GDATA_RAND_SEED_A) + gdata(GDATA_AREA) * 1000 + gdata(GDATA_LEVEL)
	}
	if ( gdata(GDATA_AREA) == AREA_HOME ) {
		if ( mdatan(MDATAN_NAME) == "" | mdatan(MDATAN_NAME) == lang("ノースティリス", "North Tyris") ) {
			mdatan(MDATAN_NAME) = lang("わが家", "Your Home")
		}
	}
	else {
		mdatan(MDATAN_NAME) = mapname(gdata(GDATA_AREA))
	}
	if ( gdata(GDATA_AREA) == AREA_SHELTER ) {
		if ( gdata(GDATA_LEVEL) == 1 ) {
			map_initcustom "shelter_2"
			mdata(MDATA_CAN_SAVE) = 0
			mdata(MDATA_TYPE) = MAP_TYPE_FIELD
		}
		else {
			map_initcustom "shelter_1"
			mdata(MDATA_WALL) = 0
		}
		mdata(MDATA_MODERATE_CROWD) = 0
		mdata(MDATA_MAX_INV) = 5
		map_placeplayer
		mdata(MDATA_MUSIC) = MUSICLIST_MCHOME
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_RANDOM_DUNGEON ) {
		gosub *map_randomDungeon
		if ( gdata(GDATA_LEVEL) == adata(ADATA_MAX_LEVEL, gdata(GDATA_AREA)) ) {
			evadd EVENT_BOSS_RANDOM
		}
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_SHOW_HOUSE ) {
		file = "" + userfile
		id = 0
		gosub *unzip
		fmode = 19
		gosub *game_ctrlFile
		repeat mdata(MDATA_HEIGHT)
			y = cnt
			repeat mdata(MDATA_WIDTH)
				x = cnt
				map(x, y, 1) = 0
			loop
		loop
		importmode = 0
		fmode = 21
		gosub *game_ctrlFile
		mdata(MDATA_MODERATE_CROWD) = 0
		mdata(MDATA_CAN_SAVE) = 0
		mdata(MDATA_WALL) = 0
		mdata(MDATA_TYPE) = MAP_TYPE_QUEST
		mdata(MDATA_TIMESCALE) = 10000
		gdata(GDATA_QUEST_STATUS) = QUEST_STATE_SUCCESS
		inv_getheader -1
		repeat invrange, invhead
			if ( inv(INV_ITEM_ID, cnt) >= maxitemid - 2 | inv(INV_ITEM_ID, cnt) > length(ioriginalnameref) ) {
				inv(INV_ITEM_NUM, cnt) = 0
				cell_refresh inv(INV_ITEM_X, cnt), inv(INV_ITEM_Y, cnt)
				continue
			}
			if ( inv(INV_ITEM_NUM, cnt) > 0 ) {
				inv(INV_ITEM_PROPERTY, cnt) = PROP_SPECIAL
			}
		loop
		gosub *del_userTemp
		evadd EVENT_SHOW_HOUSE
		map_placeplayer
		repeat MAX_CHARA_TOTAL
			if ( cnt < MAX_CHARA_FOLLOWER ) {
				continue
			}
			if ( cdata(CDATA_TAGTEAM_PARTNER, cnt) >= 0 ) {
				cdata(CDATA_TAGTEAM_PARTNER, cnt) = -1
				cdata(CDATA_IN_TAGTEAM, cnt) = 0
				refreshspeed cnt
			}
		loop
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_MUSEUM ) {
		map_initcustom "museum_1"
		mdata(MDATA_MUSIC) = MUSICLIST_MCTOWN3
		map_placeplayer
		mdata(MDATA_WALL) = 0
		flt
		itemcreate -1, ITEM_ID_RED_BOOK, 15, 17, 0
		flt
		itemcreate -1, ITEM_ID_REGISTER, 18, 17, 0
		inv(INV_ITEM_BOOK_ID, ci) = 4
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_SHOP ) {
		map_initcustom "shop_1"
		mdata(MDATA_MUSIC) = MUSICLIST_MCTOWN3
		mdata(MDATA_MAX_INV) = 10
		map_placeplayer
		mdata(MDATA_WALL) = 0
		flt
		itemcreate -1, ITEM_ID_RED_BOOK, 17, 14, 0
		inv(INV_ITEM_BOOK_ID, ci) = 8
		flt
		itemcreate -1, ITEM_ID_SHOP_STRONGBOX, 19, 10, 0
		inv(INV_ITEM_FILE, ci) = ITEM_ROLE_FILE_SHOP_INCOME
		flt
		itemcreate -1, ITEM_ID_REGISTER, 17, 11, 0
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_CROP ) {
		map_initcustom "crop_1"
		mdata(MDATA_MUSIC) = MUSICLIST_MCLONELY
		map_placeplayer
		mdata(MDATA_MAX_INV) = 80
		mdata(MDATA_WALL) = 0
		flt
		itemcreate -1, ITEM_ID_RED_BOOK, 14, 5, 0
		inv(INV_ITEM_BOOK_ID, ci) = 9
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_RANCH ) {
		map_initcustom "ranch_1"
		mdata(MDATA_MUSIC) = MUSICLIST_MCLONELY
		map_placeplayer
		mdata(MDATA_MAX_INV) = 80
		mdata(MDATA_WALL) = 0
		flt
		itemcreate -1, ITEM_ID_RED_BOOK, 23, 8, 0
		inv(INV_ITEM_BOOK_ID, ci) = 11
		flt
		itemcreate -1, ITEM_ID_REGISTER, 22, 6, 0
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_DISCARDED_RANCH ) {
		map_initcustom "2nouti"
		mdata(MDATA_MUSIC) = MUSICLIST_MCHOME
		map_placeplayer
		mdata(MDATA_MAX_INV) = 400
		mdata(MDATA_WALL) = 0
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_DUNGEON ) {
		map_initcustom "dungeon1"
		mdata(MDATA_MUSIC) = MUSICLIST_MCLONELY
		map_placeplayer
		mdata(MDATA_MAX_INV) = 350
		mdata(MDATA_WALL) = 0
		flt
		itemcreate -1, ITEM_ID_RED_BOOK, 39, 54, 0
		inv(INV_ITEM_BOOK_ID, ci) = 15
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_STORAGE_HOUSE ) {
		map_initcustom "storage_1"
		mdata(MDATA_MUSIC) = MUSICLIST_MCHOME
		map_placeplayer
		mdata(MDATA_MAX_INV) = 200
		mdata(MDATA_WALL) = 0
	}
	if ( gdata(GDATA_AREA) == AREA_QUEST ) {
		gosub *map_randomDungeon
	}
	if ( gdata(GDATA_AREA) == AREA_TEST_GROUND ) {
		mdata(MDATA_WIDTH) = 16
		mdata(MDATA_HEIGHT) = 16
		mdata(MDATA_MODERATE_CROWD) = 0
		map_initialize
		repeat mdata(MDATA_HEIGHT)
			p = cnt
			repeat mdata(MDATA_WIDTH)
				map(cnt, p, 0) = tile_default + (rnd(tile_default(2)) == 0) * rnd(tile_default(1))
			loop
		loop
		map_placeplayer
		repeat rqop(1)
			flt
			characreate -1, rqop, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER) + 5
		loop
		repeat 100
			x = rnd(mdata(MDATA_WIDTH))
			y = rnd(mdata(MDATA_HEIGHT))
		loop
		flt
		characreate -1, CREATURE_ID_WIZARD, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
		cdata(CDATA_ROLE, rc) = ROLE_HORSE_MASTER
		cbitmod CHARA_BIT_LIVESTOCK, rc, 1
	}
	if ( gdata(GDATA_AREA) == AREA_GRAVEYARD ) {
		map_initcustom "grave_1"
		mdata(MDATA_MODERATE_CROWD) = 7
		mdata(MDATA_MUSIC) = MUSICLIST_MCRUIN
		map_placeplayer
		flt
		itemcreate -1, ITEM_ID_RED_BOOK, 17, 7, 0
		inv(INV_ITEM_PARAM1, ci) = 24
		repeat mdata(MDATA_MODERATE_CROWD) / 2
			gosub *fltChara
			characreate -1, CREATURE_ID_BUG, -3, 0
		loop
	}
	if ( gdata(GDATA_AREA) == AREA_JAIL ) {
		map_initcustom "jail1"
		mdata(MDATA_MODERATE_CROWD) = 0
		mdata(MDATA_MUSIC) = MUSICLIST_MCRUIN
		map_placeplayer
	}
	if ( gdata(GDATA_AREA) == AREA_JAIL2 ) {
		map_initcustom "jail1"
		mdata(MDATA_MODERATE_CROWD) = 0
		mdata(MDATA_MUSIC) = MUSICLIST_MCRUIN
		map_placeplayer
	}
	if ( gdata(GDATA_AREA) == AREA_TRUCE_GROUND ) {
		map_initcustom "shrine_1"
		mdata(MDATA_MODERATE_CROWD) = 10
		if ( gdata(GDATA_FLAG_TALKA_IN_TRUCE_GROUND) == 1 ) {
			flt
			characreate -1, CREATURE_ID_TALKA_THE_LONG_TWINTAIL, 16, 4
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			itemcreate -1, ITEM_ID_AURTEHOM, 25, 16, 0
		}
		flt
		itemcreate -1, ITEM_ID_ALTAR, 10, 8, 0
		inv(INV_ITEM_GOD, ci) = GOD_MANI
		inv(INV_ITEM_PROPERTY, ci) = PROP_NPC
		flt
		itemcreate -1, ITEM_ID_ALTAR, 13, 8, 0
		inv(INV_ITEM_GOD, ci) = GOD_LULWY
		inv(INV_ITEM_PROPERTY, ci) = PROP_NPC
		flt
		itemcreate -1, ITEM_ID_ALTAR, 10, 13, 0
		inv(INV_ITEM_GOD, ci) = GOD_OPATOS
		inv(INV_ITEM_PROPERTY, ci) = PROP_NPC
		flt
		itemcreate -1, ITEM_ID_ALTAR, 13, 13, 0
		inv(INV_ITEM_GOD, ci) = GOD_EHEKATL
		inv(INV_ITEM_PROPERTY, ci) = PROP_NPC
		flt
		itemcreate -1, ITEM_ID_ALTAR, 20, 8, 0
		inv(INV_ITEM_GOD, ci) = GOD_ITZPALT
		inv(INV_ITEM_PROPERTY, ci) = PROP_NPC
		flt
		itemcreate -1, ITEM_ID_ALTAR, 23, 8, 0
		inv(INV_ITEM_GOD, ci) = GOD_KUMIROMI
		inv(INV_ITEM_PROPERTY, ci) = PROP_NPC
		flt
		itemcreate -1, ITEM_ID_ALTAR, 20, 13, 0
		inv(INV_ITEM_GOD, ci) = GOD_JURE
		inv(INV_ITEM_PROPERTY, ci) = PROP_NPC
		flt
		itemcreate -1, ITEM_ID_ALTAR, 23, 13, 0
		inv(INV_ITEM_GOD, ci) = GOD_YACATECT
		inv(INV_ITEM_PROPERTY, ci) = PROP_NPC
		mdata(MDATA_MUSIC) = MUSICLIST_MCRUIN
		map_placeplayer
		repeat mdata(MDATA_MODERATE_CROWD) / 2
			gosub *fltChara
			characreate -1, CREATURE_ID_BUG, -3, 0
		loop
	}
	if ( gdata(GDATA_AREA) == AREA_EMBASSY ) {
		map_initcustom "office_1"
		mdata(MDATA_MODERATE_CROWD) = 0
		flt
		characreate -1, CREATURE_ID_SALES_PERSON, 9, 2
		cdata(CDATA_ROLE, rc) = ROLE_SHOP_OFFICE, 10
		flt
		characreate -1, CREATURE_ID_SALES_PERSON, 15, 2
		cdata(CDATA_ROLE, rc) = ROLE_SHOP_OFFICE, 10
		flt
		characreate -1, CREATURE_ID_SALES_PERSON, 21, 2
		cdata(CDATA_ROLE, rc) = ROLE_SHOP_DEED, 10
		flt
		characreate -1, CREATURE_ID_SALES_PERSON, 3, 2
		cdata(CDATA_ROLE, rc) = ROLE_SHOP_DEED, 10
		repeat 3
			flt
			characreate -1, CREATURE_ID_CITIZEN, -3, 0
			cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			flt
			characreate -1, CREATURE_ID_CITIZEN2, -3, 0
			cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
		loop
		repeat 4
			flt
			characreate -1, CREATURE_ID_GUARD2, 3 + cnt * 6, 9
			cdata(CDATA_ROLE, rc) = ROLE_GUARD
		loop
		mdata(MDATA_MUSIC) = MUSICLIST_MCRUIN
		map_placeplayer
	}
	if ( gdata(GDATA_AREA) == AREA_TW_NORTH_BORDER ) {
		map_initcustom "test2"
		mdata(MDATA_MODERATE_CROWD) = 0
		flt
		characreate -1, CREATURE_ID_SHOPKEEPER, 7, 23
		cdata(CDATA_ROLE, rc) = ROLE_SHOP_GENERAL, 10
		sngeneral cdatan(CDATAN_NAME, rc)
		cdata(CDATA_AI_CALM, rc) = 3
		flt
		characreate -1, CREATURE_ID_SHOPKEEPER, 5, 17
		cdata(CDATA_ROLE, rc) = ROLE_SHOP_TRADE, 12
		sntrade cdatan(CDATAN_NAME, rc)
		cdata(CDATA_AI_CALM, rc) = 3
		flt
		characreate -1, CREATURE_ID_SHOPKEEPER, 16, 19
		cdata(CDATA_ROLE, rc) = ROLE_SHOP_INN, 8
		sninn cdatan(CDATAN_NAME, rc)
		flt
		characreate -1, CREATURE_ID_BARTENDER, 17, 13
		cdata(CDATA_ROLE, rc) = ROLE_BARTENDER
		flt
		characreate -1, CREATURE_ID_CARAVAN_MASTER, 7, 3
		cdata(CDATA_ROLE, rc) = ROLE_CARAVAN_MASTER
		repeat 2
			flt
			characreate -1, CREATURE_ID_BEGGAR, -3, 0
			flt
			characreate -1, CREATURE_ID_MERCENARY_WARRIOR, -3, 0
			cdata(CDATA_RELATION, rc) = -1
			cdata(CDATA_RELATION_ORG, rc) = -1
			flt
			characreate -1, CREATURE_ID_MERCENARY_ARCHER, -3, 0
			cdata(CDATA_RELATION, rc) = -1
			cdata(CDATA_RELATION_ORG, rc) = -1
			flt
			characreate -1, CREATURE_ID_MERCENARY_WIZARD, -3, 0
			cdata(CDATA_RELATION, rc) = -1
			cdata(CDATA_RELATION_ORG, rc) = -1
		loop
		flt
		characreate -1, CREATURE_ID_GUARD2, 5, 7
		cdata(CDATA_ROLE, rc) = ROLE_GUARD
		cdata(CDATA_AI_CALM, rc) = 3
		flt
		characreate -1, CREATURE_ID_GUARD2, 8, 7
		cdata(CDATA_ROLE, rc) = ROLE_GUARD
		cdata(CDATA_AI_CALM, rc) = 3
		mdata(MDATA_MUSIC) = MUSICLIST_MCVILLAGE1
		map_placeplayer
		evadd EVENT_NORTH_BORDER
	}
	if ( gdata(GDATA_AREA) == AREA_NT_SOUTH_BORDER | gdata(GDATA_AREA) == AREA_ST_NORTH_BORDER ) {
		if ( gdata(GDATA_LEVEL) == 1 ) {
			map_initcustom "station-nt1"
			mdata(MDATA_MODERATE_CROWD) = 0
			if ( gdata(GDATA_AREA) == AREA_ST_NORTH_BORDER ) {
				if ( gdata(STARTING_GDATA_FLAG + 326) >= 1 ) {
					flt
					characreate -1, CREATURE_ID_ZISILION_THE_MINE_KING, 9, 10
					cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
				}
			}
			if ( gdata(GDATA_AREA) == AREA_NT_SOUTH_BORDER ) {
				if ( gdata(GDATA_FLAG_SUB_REGULUS_ZANAN) >= 2 ) {
					flt
					characreate -1, CREATURE_ID_REGULUS_THE_ALTERED, 15, 22
					cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
				}
			}
			if ( gdata(GDATA_AREA) == AREA_NT_SOUTH_BORDER ) {
				if ( gdata(GDATA_FLAG_MAIN) >= 505 ) {
					flt
					characreate -1, CREATURE_ID_RENAI_THE_OVER_MESHERA, 16, 22
					cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
				}
			}
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 7, 23
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_GENERAL, 10
			sngeneral cdatan(CDATAN_NAME, rc)
			cdata(CDATA_AI_CALM, rc) = 3
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 16, 19
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_INN, 8
			sninn cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_BARTENDER, 17, 13
			cdata(CDATA_ROLE, rc) = ROLE_BARTENDER
			flt
			characreate -1, CREATURE_ID_CARAVAN_MASTER, 7, 3
			cdata(CDATA_ROLE, rc) = ROLE_CARAVAN_MASTER
			repeat 2
				flt
				characreate -1, CREATURE_ID_BEGGAR, -3, 0
				flt
				characreate -1, CREATURE_ID_MERCENARY_WARRIOR, -3, 0
				cdata(CDATA_RELATION, rc) = -1
				cdata(CDATA_RELATION_ORG, rc) = -1
				flt
				characreate -1, CREATURE_ID_MERCENARY_ARCHER, -3, 0
				cdata(CDATA_RELATION, rc) = -1
				cdata(CDATA_RELATION_ORG, rc) = -1
				flt
				characreate -1, CREATURE_ID_MERCENARY_WIZARD, -3, 0
				cdata(CDATA_RELATION, rc) = -1
				cdata(CDATA_RELATION_ORG, rc) = -1
			loop
			flt
			characreate -1, CREATURE_ID_GUARD2, 5, 7
			cdata(CDATA_ROLE, rc) = ROLE_GUARD
			cdata(CDATA_AI_CALM, rc) = 3
			flt
			characreate -1, CREATURE_ID_GUARD2, 8, 7
			cdata(CDATA_ROLE, rc) = ROLE_GUARD
			cdata(CDATA_AI_CALM, rc) = 3
			mdata(MDATA_MUSIC) = MUSICLIST_MCVILLAGE1
			map_placeplayer
		}
		if ( gdata(GDATA_LEVEL) == 100 ) {
			if ( gdata(GDATA_AREA) == AREA_NT_SOUTH_BORDER ) {
				mdata(MDATA_TILESET) = 0
				map_initcustom "11mesh"
				mdata(MDATA_FIELD) = 1
				mdata(MDATA_TYPE) = MAP_TYPE_DUNGEON
				mdata(MDATA_MODERATE_CROWD) = 0
				mdata(MDATA_MUSIC) = MUSICLIST_MCCHAOS
				mdata(MDATA_NO_RENEW) = 1
				mdatan(MDATAN_NAME) = lang("新生体兵器実験場", "New Test Site")
				gdata(GDATA_LEVEL_START_ON) = 7
				mapstartx = 4
				mapstarty = 4
				flt
				characreate -1, CREATURE_ID_TESTER, 35, 1
				cdatan(CDATAN_NAME, rc) = lang("メシェーラ・キガツ", "tester")
				flt
				characreate -1, CREATURE_ID_TESTER, 35, 7
				cdatan(CDATAN_NAME, rc) = lang("メシェーラ・クトワ", "tester")
				flt
				characreate -1, CREATURE_ID_TESTER, 39, 1
				cdatan(CDATAN_NAME, rc) = lang("メシェーラ・タシハ", "tester")
				flt
				characreate -1, CREATURE_ID_TESTER, 39, 7
				cdatan(CDATAN_NAME, rc) = lang("メシェーラ・メシエ", "tester")
				flt
				characreate -1, CREATURE_ID_TESTER, 43, 1
				cdatan(CDATAN_NAME, rc) = lang("メシェーラ・ラニサ", "tester")
				flt
				characreate -1, CREATURE_ID_TESTER, 43, 7
				cdatan(CDATAN_NAME, rc) = lang("メシェーラ・レテイ", "tester")
				flt
				characreate -1, CREATURE_ID_TESTER, 47, 1
				cdatan(CDATAN_NAME, rc) = lang("メシェーラ・タダケ", "tester")
				flt
				characreate -1, CREATURE_ID_TESTER, 47, 7
				cdatan(CDATAN_NAME, rc) = lang("メシェーラ・ドトマ", "tester")
				flt
				characreate -1, CREATURE_ID_TESTER, 47, 10
				cdatan(CDATAN_NAME, rc) = lang("メシェーラ・ラナイ", "tester")
				flt
				characreate -1, CREATURE_ID_TESTER, 47, 16
				cdatan(CDATAN_NAME, rc) = lang("メシェーラ・ゲキツ", "tester")
				flt
				characreate -1, CREATURE_ID_TESTER, 43, 10
				cdatan(CDATAN_NAME, rc) = lang("メシェーラ・ウハカ", "tester")
				flt
				characreate -1, CREATURE_ID_TESTER, 43, 16
				cdatan(CDATAN_NAME, rc) = lang("メシェーラ・ナシム", "tester")
				flt
				characreate -1, CREATURE_ID_TESTER, 38, 10
				cdatan(CDATAN_NAME, rc) = lang("メシェーラ・コトサ", "tester")
				flt
				characreate -1, CREATURE_ID_TESTER, 35, 10
				cdatan(CDATAN_NAME, rc) = lang("メシェーラ・シテク", "tester")
				put_questtarget
				flt
				characreate -1, CREATURE_ID_REGULUS_THE_ALTERED, 6, 4
				cdata(CDATA_AI_CALM, rc) = 4
				cdata(CDATA_RELATION, rc) = 10
				cdata(CDATA_RELATION_ORG, rc) = 10
				cdata(CDATA_AI_DISTANCE, rc) = 1
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
				map_placeplayer
			}
		}
	}
	if ( gdata(GDATA_AREA) == AREA_SMOKE_AND_PIPE ) {
		map_initcustom "inn1"
		mdata(MDATA_MODERATE_CROWD) = 0
		flt
		characreate -1, CREATURE_ID_SHOPKEEPER, 19, 10
		cdata(CDATA_ROLE, rc) = ROLE_SHOP_INN, 8
		sninn cdatan(CDATAN_NAME, rc)
		flt
		characreate -1, CREATURE_ID_THE_LEOPARD_WARRIOR, 26, 16
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		cdata(CDATA_AI_CALM, rc) = 3
		flt
		characreate -1, CREATURE_ID_TOWN_CHILD, 25, 15
		cdata(CDATA_AI_CALM, rc) = 3
		flt
		characreate -1, CREATURE_ID_TOWN_CHILD, 25, 17
		cdata(CDATA_AI_CALM, rc) = 3
		flt
		characreate -1, CREATURE_ID_TOWN_CHILD, 27, 18
		cdata(CDATA_AI_CALM, rc) = 3
		flt
		characreate -1, CREATURE_ID_TOWN_CHILD, 27, 16
		cdata(CDATA_AI_CALM, rc) = 3
		flt
		characreate -1, CREATURE_ID_TOWN_CHILD, 26, 17
		cdata(CDATA_AI_CALM, rc) = 3
		flt
		characreate -1, CREATURE_ID_SILVIA_THE_PRINCESS, 4, 3
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_ROGUE, 4, 2
		flt
		characreate -1, CREATURE_ID_FARMER, 3, 3
		flt
		characreate -1, CREATURE_ID_ARTIST, 4, 4
		flt
		characreate -1, CREATURE_ID_NOBLE, 5, 4
		flt
		characreate -1, CREATURE_ID_HOT_SPRING_MANIAC, 24, 3
		flt
		characreate -1, CREATURE_ID_HOT_SPRING_MANIAC, 26, 4
		flt
		characreate -1, CREATURE_ID_HOT_SPRING_MANIAC, 25, 5
		flt
		characreate -1, CREATURE_ID_HOT_SPRING_MANIAC, 25, 9
		flt
		characreate -1, CREATURE_ID_BARD, 12, 9
		repeat 2
			flt
			characreate -1, CREATURE_ID_BEGGAR, -3, 0
			flt
			characreate -1, CREATURE_ID_MERCENARY_WARRIOR, -3, 0
			cdata(CDATA_RELATION, rc) = -1
			cdata(CDATA_RELATION_ORG, rc) = -1
			flt
			characreate -1, CREATURE_ID_OLD_PERSON, -3, 0
			cdata(CDATA_RELATION, rc) = -1
			cdata(CDATA_RELATION_ORG, rc) = -1
			flt
			characreate -1, CREATURE_ID_MERCENARY, -3, 0
			flt
			characreate -1, CREATURE_ID_TOURIST, -3, 0
		loop
		mdata(MDATA_MUSIC) = MUSICLIST_MCMEMORY2
		map_placeplayer
	}
	if ( gdata(GDATA_AREA) == AREA_MIROK_WORKSHOP ) {
		map_initcustom "smith0"
		mdata(MDATA_MODERATE_CROWD) = 0
		flt
		characreate -1, CREATURE_ID_GAROK_THE_LEGENDARY_SMITH, 17, 11
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_MIRAL_THE_LEGENDARY_SMITH, 8, 16
		cdata(CDATA_ROLE, rc) = ROLE_SHOP_MIROK, 100
		repeat 5
			flt
			characreate -1, CREATURE_ID_CAT, -3, 0
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		loop
		mdata(MDATA_MUSIC) = MUSICLIST_MCRUIN
		mdata(MDATA_NO_RENEW) = 0
		map_placeplayer
	}
	if ( gdata(GDATA_AREA) == AREA_ABODE_OF_WITCH ) {
		map_initcustom "shoten"
		mdata(MDATA_MODERATE_CROWD) = 0
		flt
		characreate -1, CREATURE_ID_SSIL_THE_UNDEAD_WITCH, 10, 6
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		cdata(CDATA_AI_CALM, rc) = 3
		mdata(MDATA_MUSIC) = MUSICLIST_MCRUIN
		mdata(MDATA_NO_RENEW) = 0
		map_placeplayer
	}
	if ( gdata(GDATA_AREA) == AREA_DEVIL_CAPE ) {
		map_initcustom "proud"
		mdata(MDATA_MODERATE_CROWD) = 0
		flt
		characreate -1, CREATURE_ID_BYSYMLHA_THE_AMBER_EYES, 4, 6
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		cdata(CDATA_AI_CALM, rc) = 3
		mdata(MDATA_MUSIC) = MUSICLIST_SCENE_MUSIC
		mdata(MDATA_NO_RENEW) = 0
		map_placeplayer
	}
	if ( gdata(GDATA_AREA) == AREA_SISTER_MANSION ) {
		map_initcustom "sister"
		mdata(MDATA_MODERATE_CROWD) = 0
		mdata(MDATA_MUSIC) = MUSICLIST_MCRUIN
		if ( mapupdate == 0 ) {
			flt
			itemcreate -1, ITEM_ID_BOOK_RACHEL, 12, 8, 0
			inv(INV_ITEM_PARAM2, ci) = 4
		}
		flt
		characreate -1, CREATURE_ID_YOUNGER_SISTER2, 12, 6
		cdata(CDATA_ROLE, rc) = ROLE_SHOP_SISTER
		repeat 6
			flt
			characreate -1, CREATURE_ID_YOUNG_LADY, -3, 0
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		loop
		repeat 8
			flt
			characreate -1, CREATURE_ID_SILVER_CAT, -3, 0
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		loop
		map_placeplayer
	}
	if ( gdata(GDATA_AREA) == AREA_CYBER_DOME ) {
		map_initcustom "cyberdome"
		mdata(MDATA_MODERATE_CROWD) = 10
		flt
		itemcreate -1, ITEM_ID_ALTAR, 19, 5, 0
		inv(INV_ITEM_GOD, ci) = GOD_MANI
		inv(INV_ITEM_PROPERTY, ci) = PROP_NPC
		flt
		characreate -1, CREATURE_ID_SALES_PERSON, 9, 16
		cdata(CDATA_ROLE, rc) = ROLE_SHOP_SALESPERSON, 10
		flt
		characreate -1, CREATURE_ID_SALES_PERSON, 9, 8
		cdata(CDATA_ROLE, rc) = ROLE_SHOP_SALESPERSON, 10
		flt
		characreate -1, CREATURE_ID_STRANGE_SCIENTIST, 28, 7
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		if ( gdata(GDATA_FLAG_LEOLD_LOCATION_STATE) >= 1 & gdata(GDATA_FLAG_MAIN) < 200 ) {
			flt
			characreate -1, CREATURE_ID_BLACK_GAUNTLET_LEOLD, 17, 21
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		}
		repeat 4
			flt
			characreate -1, CREATURE_ID_CITIZEN_OF_CYBER_DOME, -3, 0
			cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			flt
			characreate -1, CREATURE_ID_CITIZEN_OF_CYBER_DOME2, -3, 0
			cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
		loop
		repeat mdata(MDATA_MODERATE_CROWD) / 2
			gosub *fltChara
			characreate -1, CREATURE_ID_BUG, -3, 0
		loop
		mdata(MDATA_MUSIC) = MUSICLIST_MCRUIN
		map_placeplayer
	}
	if ( gdata(GDATA_AREA) == AREA_LARNA ) {
		map_initcustom "highmountain"
		mdata(MDATA_NO_RENEW) = 0
		mdata(MDATA_MODERATE_CROWD) = 45
		if ( gdata(GDATA_FLAG_VISITED_LARNA) == 1 ) {
			flt
			characreate -1, CREATURE_ID_CHILD_WEL, 13, 20
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		}
		if ( gdata(GDATA_FLAG_SUB_NORNE_THE_GUIDE) == 1 ) {
			flt
			characreate -1, CREATURE_ID_NORNE_THE_GUIDE, 23, 4
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		}
		flt
		characreate -1, CREATURE_ID_WIZARD, 21, 23
		cdata(CDATA_ROLE, rc) = ROLE_RETURNER
		flt
		characreate -1, CREATURE_ID_SHOPKEEPER, 9, 44
		cdata(CDATA_ROLE, rc) = ROLE_SHOP_MOUNTAIN1, 5
		cdatan(CDATAN_NAME, rc) = lang("染色店の" + cdatan(CDATAN_NAME, rc), sncnv(cdatan(CDATAN_NAME, rc)) + "the dye vendor")
		flt
		characreate -1, CREATURE_ID_SHOPKEEPER, 13, 37
		cdata(CDATA_ROLE, rc) = ROLE_SHOP_MOUNTAIN2, 30
		cdatan(CDATAN_NAME, rc) = lang("おみやげ屋の" + cdatan(CDATAN_NAME, rc), sncnv(cdatan(CDATAN_NAME, rc)) + "the souvenir vendor")
		flt
		characreate -1, CREATURE_ID_BARTENDER, 24, 48
		cdata(CDATA_ROLE, rc) = ROLE_BARTENDER
		flt
		characreate -1, CREATURE_ID_HOT_SPRING_MANIAC, 7, 36
		flt
		characreate -1, CREATURE_ID_HOT_SPRING_MANIAC, 9, 38
		flt
		characreate -1, CREATURE_ID_HOT_SPRING_MANIAC, 6, 33
		flt
		characreate -1, CREATURE_ID_HOT_SPRING_MANIAC, 3, 33
		flt
		characreate -1, CREATURE_ID_HOT_SPRING_MANIAC, 8, 31
		flt
		characreate -1, CREATURE_ID_HOT_SPRING_MANIAC, 4, 36
		repeat 7
			flt
			characreate -1, CREATURE_ID_CITIZEN, -3, 0
			cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			flt
			characreate -1, CREATURE_ID_CITIZEN2, -3, 0
			cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			flt
			characreate -1, CREATURE_ID_HOT_SPRING_MANIAC, -3, 0
		loop
		repeat 12
			flt
			characreate -1, CREATURE_ID_HOT_SPRING_MANIAC, -3, 0
		loop
		repeat 3
			flt
			characreate -1, CREATURE_ID_CAPYBARA, -3, 0
		loop
		repeat mdata(MDATA_MODERATE_CROWD) / 2
			gosub *fltChara
			characreate -1, CREATURE_ID_BUG, -3, 0
		loop
		mdata(MDATA_MUSIC) = MUSICLIST_MCRUIN
		map_placeplayer
	}
	if ( gdata(GDATA_AREA) == AREA_ARENA ) {
		map_initcustom "arena_1"
		map_placeplayer
		repeat MAX_CHARA_FOLLOWER
			if ( cdata(CDATA_IN_TAGTEAM, cnt) <= 0 ) {
				if ( cdata(CDATA_EXIST, cnt) == CHAR_STATE_ALIVE ) {
					if ( cdata(CDATA_RELATION, cnt) == 10 ) {
						if ( cnt != 0 ) {
							if ( map(cdata(CDATA_X, cnt), cdata(CDATA_Y, cnt), 1) != 0 ) {
								map(cdata(CDATA_X, cnt), cdata(CDATA_Y, cnt), 1) = 0
								cdata(CDATA_EXIST, cnt) = CHAR_STATE_SUSPEND
								if ( cdata(CDATA_IN_TAGTEAM, cnt) != 0 ) {
									cdata(CDATA_EXIST, cdata(CDATA_TAGTEAM_PARTNER, cnt)) = CHAR_STATE_SUSPEND
								}
							}
						}
					}
				}
			}
		loop
		if ( arenaop == 0 ) {
			fixlv = arenaop(2)
			initlv = aitelv
			characreate -1, arenaop(1), cdata(CDATA_X, CHARA_PLAYER) - 1, cdata(CDATA_Y, CHARA_PLAYER) - 4
			cdata(CDATA_AI_AGGRO, rc) = 30
			cdata(CDATA_RELATION, rc) = -3
			cdata(CDATA_RELATION, rc) = -3
			cdata(CDATA_RELATION_ORG, rc) = -3
			cbitmod CHARA_BIT_PRECIOUS, rc, 1
		}
		if ( arenaop == 1 ) {
			repeat 3 + rnd(4)
				flt arenaop(1), 2
				initlv = arenaop(1)
				characreate -1, CREATURE_ID_BUG, cdata(CDATA_X, CHARA_PLAYER) - 1, cdata(CDATA_Y, CHARA_PLAYER) - 5
				cdata(CDATA_RELATION, rc) = -3
				cdata(CDATA_RELATION_ORG, rc) = -3
				cdata(CDATA_AI_AGGRO, rc) = 30
				cdata(CDATA_RELATION, rc) = -3
				cbitmod CHARA_BIT_PRECIOUS, rc, 1
				if ( cdata(CDATA_LEVEL, rc) > arenaop(1) | cdata(CDATA_RELATION, rc) != (-3) ) {
					chara_vanquish rc
					continue cnt
				}
			loop
		}
	}
	if ( gdata(GDATA_AREA) == AREA_PET_ARENA ) {
		map_initcustom "arena_2"
		mdata(MDATA_MODERATE_CROWD) = 0
		mdata(MDATA_MUSIC) = MUSICLIST_MCPETARENA
		repeat MAX_CHARA_FOLLOWER
			if ( cnt == CHARA_PLAYER | cnt == MAX_CHARA_NC ) {
				continue
			}
			if ( followerin(cnt) == 0 ) {
				cdata(CDATA_EXIST, cnt) = CHAR_STATE_ALLY_DEAD
				cdata(CDATA_X, cnt) = 0
				cdata(CDATA_Y, cnt) = 0
			}
			else {
				cdata(CDATA_EXIST, cnt) = CHAR_STATE_ALIVE
				cdata(CDATA_DIRECTIVE_MODE_ORG, cnt) = cdata(CDATA_DIRECTIVE_MODE, cnt)
				cdata(CDATA_DIRECTIVE_MODE, cnt) = DIRECTIVE_MODE_TEMPORARY
			}
		loop
		map_placeplayer
		petarenawin = 0
		if ( arenaimport == 1 ) {
			file = "" + userfile
			id = 0
			gosub *unzip
			importmode = 1
			fmode = 21
			gosub *game_ctrlFile
			gosub *del_userTemp
		}
		else {
			repeat arenaop(1)
				flt arenaop(2), calcfixlv(FIX_QUALITY_GREAT)
				initlv = arenaop(2)
				characreate -1, CREATURE_ID_BUG, -3, 0
				map(cdata(CDATA_X, rc), cdata(CDATA_Y, rc), 1) = 0
				f = 1
				if ( cdata(CDATA_RELATION, rc) != (-3) ) {
					f = 0
				}
				if ( f == 0 ) {
					chara_vanquish rc
					continue cnt
				}
				map_placearena rc, 1
				if ( cnt == 0 ) {
					enemyteam = rc
				}
			loop
		}
		repeat MAX_CHARA_TOTAL - MAX_CHARA_SAVE, MAX_CHARA_SAVE
			if ( cdata(CDATA_RELATION, cnt) == (-3) ) {
				cbitmod CHARA_BIT_STETHOSCOPE, cnt, 1
			}
		loop
	}
	if ( gdata(GDATA_AREA) == AREA_BEAST_FORT ) {
		map_initcustom "god"
		mdata(MDATA_MODERATE_CROWD) = 0
		mdata(MDATA_MUSIC) = MUSICLIST_MCBOSS2
		flt
		characreate -1, CREATURE_ID_FRISIA_THE_CAT_QUEEN, 12, 14
		map_placeplayer
	}
	if ( gdata(GDATA_AREA) == AREA_MACHINE_FORT ) {
		map_initcustom "god"
		mdata(MDATA_MODERATE_CROWD) = 0
		mdata(MDATA_MUSIC) = MUSICLIST_MCBOSS2
		flt
		characreate -1, CREATURE_ID_UTIMA_THE_DESTROYER_OF_XEREN, 12, 14
		map_placeplayer
	}
	if ( gdata(GDATA_AREA) == AREA_COLLAPSED_FORT ) {
		map_initcustom "god"
		mdata(MDATA_MUSIC) = MUSICLIST_MCBOSS2
		mdata(MDATA_MODERATE_CROWD) = 0
		flt
		characreate -1, CREATURE_ID_AZZRSSIL_THE_IMPURE, 12, 14
		map_placeplayer
	}
	if ( gdata(GDATA_AREA) == AREA_HOME ) {
		map_initcustom "home" + gdata(GDATA_HOME_LEVEL)
		mdata(MDATA_MUSIC) = MUSICLIST_MCHOME0
		gdata(GDATA_LEVEL_START_ON) = 4
		map_placeplayer
		mdata(MDATA_WALL) = 0
		mdata(MDATA_TILESET) = 3
		if ( gdata(GDATA_LEVEL) == 1 ) {
			if ( gdata(GDATA_HOME_LEVEL) == 0 ) {
				mdata(MDATA_FIRE_SOUND) = 1
				flt
				characreate -1, CREATURE_ID_LARNNEIRE_THE_LISTENER_OF_WIND, 18, 10
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
				flt
				characreate -1, CREATURE_ID_LOMIAS_THE_MESSENGER_FROM_VINDALE, 16, 11
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
				flt
				itemcreate -1, ITEM_ID_HEIR_TRUNK, 6, 10, 0
				inv(INV_ITEM_FILE, ci) = ITEM_ROLE_FILE_HEIR_TRUNK
				flt
				itemcreate -1, ITEM_ID_SALARY_CHEST, 15, 19, 0
				inv(INV_ITEM_FILE, ci) = ITEM_ROLE_FILE_INCOME
				flt
				itemcreate -1, ITEM_ID_FREEZER, 9, 8, 0
				inv(INV_ITEM_FILE, ci) = ITEM_ROLE_FILE_FREEZER
				flt
				itemcreate -1, ITEM_ID_RED_BOOK, 18, 19, 0
				inv(INV_ITEM_BOOK_ID, ci) = 1
			}
			else {
				file = "inv_" + mid + ".s2"
				fmode = 3
				gosub *game_ctrlFile
				inv_getheader -1
				repeat invrange, invhead
					if ( inv(INV_ITEM_NUM, cnt) == 0 ) {
						continue
					}
					inv(INV_ITEM_X, cnt) = mdata(MDATA_WIDTH) / 2
					inv(INV_ITEM_Y, cnt) = mdata(MDATA_HEIGHT) / 2
					cell_refresh inv(INV_ITEM_X, cnt), inv(INV_ITEM_Y, cnt)
				loop
				fmode = 17
				gosub *game_ctrlFile
				repeat MAX_CHARA_TOTAL - MAX_CHARA_SAVE, MAX_CHARA_SAVE
					cdata(CDATA_X, cnt) = mdata(MDATA_WIDTH) / 2
					cdata(CDATA_Y, cnt) = mdata(MDATA_HEIGHT) / 2
					cdata(CDATA_X_ORG, cnt) = mdata(MDATA_WIDTH) / 2
					cdata(CDATA_Y_ORG, cnt) = mdata(MDATA_HEIGHT) / 2
				loop
			}
			if ( gdata(GDATA_HOME_LEVEL) >= 5 ) {
				p = 0
				repeat MAX_CHARA_TOTAL - MAX_CHARA_SAVE, MAX_CHARA_SAVE
					if ( cdata(CDATA_EXIST, cnt) == CHAR_STATE_ALIVE | cdata(CDATA_EXIST, cnt) == CHAR_STATE_SPIRIT ) {
						if ( cdata(CDATA_ROLE, cnt) != ROLE_NONE ) {
							p++
						}
					}
				loop
				if ( p == 0 ) {
					flt
					characreate -1, CREATURE_ID_SHOPKEEPER, 31, 20
					cdata(CDATA_ROLE, rc) = ROLE_SHOP_GENERAL, 10
					sngeneral cdatan(CDATAN_NAME, rc)
					flt
					characreate -1, CREATURE_ID_SHOPKEEPER, 9, 20
					cdata(CDATA_ROLE, rc) = ROLE_SHOP_ARMOR, 12
					snarmor cdatan(CDATAN_NAME, rc)
					flt
					characreate -1, CREATURE_ID_SHOPKEEPER, 4, 20
					cdata(CDATA_ROLE, rc) = ROLE_SHOP_GOODS, 10
					sngoods cdatan(CDATAN_NAME, rc)
					flt
					characreate -1, CREATURE_ID_WIZARD, 4, 11
					cdata(CDATA_ROLE, rc) = ROLE_IDENTIFIER
					flt
					characreate -1, CREATURE_ID_BARTENDER, 30, 11
					cdata(CDATA_ROLE, rc) = ROLE_BARTENDER
					flt
					characreate -1, CREATURE_ID_HEALER, 30, 4
					cdata(CDATA_ROLE, rc) = ROLE_HEALER
					flt
					characreate -1, CREATURE_ID_WIZARD, 4, 4
					cdata(CDATA_ROLE, rc) = ROLE_SHOP_MAGIC, 11
					snmagic cdatan(CDATAN_NAME, rc)
				}
			}
		}
		else {
			flt
			itemcreate -1, ITEM_ID_TIGHT_ROPE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
		}
		gosub *home_setup
		map_placeplayer
	}
	if ( gdata(GDATA_AREA) == AREA_NORTH_TYRIS ) {
		map_initcustom "ntyris"
		gosub *world_newRandArea
		map_placeplayer
	}
	if ( gdata(GDATA_AREA) == AREA_SOUTH_TYRIS ) {
		map_initcustom "styris"
		gosub *world_newRandArea
		map_placeplayer
	}
	if ( gdata(GDATA_AREA) == AREA_LOST_YLVA ) {
		map_initcustom "lost"
		gosub *world_newRandArea
		map_placeplayer
	}
	if ( gdata(GDATA_AREA) == AREA_AIMWELL ) {
		map_initcustom "ether"
		gosub *world_newRandArea
		map_placeplayer
	}
	if ( gdata(GDATA_AREA) == AREA_TEST_WORLD ) {
		map_initcustom "test"
		gosub *world_newRandArea
		map_placeplayer
	}
	if ( gdata(GDATA_AREA) == AREA_DERPHY ) {
		if ( gdata(GDATA_LEVEL) == 1 ) {
			mdata(MDATA_MODERATE_CROWD) = 35
			map_initcustom "rogueden"
			map_placeplayer
			mdata(MDATA_WALL) = 0
			flt
			characreate -1, CREATURE_ID_MARKS_THE_GREAT_THIEF, 23, 14
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_NOEL_THE_BOMBER, 13, 18
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_ABYSS_THE_THIEF_WATCHMAN, 16, 17
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 10, 17
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_TRADE, 12
			sntrade cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_BARTENDER, 15, 15
			cdata(CDATA_ROLE, rc) = ROLE_BARTENDER
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 13, 3
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_GENERAL, 10
			sngeneral cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 29, 23
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_INN, 8
			sninn cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 26, 7
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_GOODS, 10
			sngoods cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 30, 4
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_BLACKMARKET, 10
			snblack cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 29, 4
			cdata(CDATA_ROLE, rc) = ROLE_SLAVER
			cdatan(CDATAN_NAME, rc) = lang("謎の奴隷商人", "The slave master")
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 10, 6
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_ARMOR, 12
			snarmor cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_ARENA_MASTER, 7, 15
			cdata(CDATA_ROLE, rc) = ROLE_ARENA_MASTER
			flt
			characreate -1, CREATURE_ID_ELDER, 9, 18
			cdata(CDATA_ROLE, rc) = ROLE_MAYOR
			cdatan(CDATAN_NAME, rc) = lang("ダルフィ" + cdatan(CDATAN_NAME, rc), cdatan(CDATAN_NAME, rc) + " of Derphy")
			flt
			characreate -1, CREATURE_ID_TRAINER, 13, 18
			cdata(CDATA_ROLE, rc) = ROLE_TRAINER
			sntrainer cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_WIZARD, 5, 26
			cdata(CDATA_ROLE, rc) = ROLE_IDENTIFIER
			flt
			characreate -1, CREATURE_ID_INFORMER, 3, 28
			cdata(CDATA_ROLE, rc) = ROLE_INFORMER
			repeat 4
				flt
				characreate -1, CREATURE_ID_CITIZEN, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
				flt
				characreate -1, CREATURE_ID_CITIZEN2, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			loop
			gosub *client_update
			repeat 20
				dbid = 0
				gosub *fltChara
				characreate -1, dbid, -3, 0
			loop
		}
		if ( gdata(GDATA_LEVEL) == 3 ) {
			mdata(MDATA_TILESET) = 0
			map_initcustom "thiefguild"
			mdata(MDATA_FIELD) = 1
			mdata(MDATA_TYPE) = MAP_TYPE_VILLAGE
			mdata(MDATA_MODERATE_CROWD) = 25
			mdata(MDATA_MUSIC) = MUSICLIST_MCRUIN
			mdata(MDATA_NO_RENEW) = 0
			mdatan(MDATAN_NAME) = lang("盗賊ギルド", "Thieves Guild")
			map_placeplayer
			flt
			characreate -1, CREATURE_ID_SIN_THE_THIEF_GUILDMASTER, 21, 9
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_TRAINER, 3, 6
			cdata(CDATA_ROLE, rc) = ROLE_TRAINER
			sntrainer cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_WIZARD, 3, 12
			cdata(CDATA_ROLE, rc) = ROLE_IDENTIFIER
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 5, 18
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_BLACKMARKET, 10
			snblack cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 27, 13
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_BLACKMARKET, 10
			snblack cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 21, 19
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_THIEF, 10
			cdatan(CDATAN_NAME, rc) = lang("盗賊店の" + cdatan(CDATAN_NAME, rc), sncnv(cdatan(CDATAN_NAME, rc)) + "the fence")
			repeat 16
				flt
				characreate -1, CREATURE_ID_THIEF_GUILD_MEMBER, -3, 0
			loop
		}
	}
	if ( gdata(GDATA_AREA) == AREA_PALMIA ) {
		mdata(MDATA_MODERATE_CROWD) = 45
		map_initcustom "palmia"
		map_placeplayer
		mdata(MDATA_WALL) = 0
		if ( gdata(GDATA_FLAG_SUB_MONOCHROME_DELIVERY_SERVICE) != 0 ) {
			flt
			characreate -1, CREATURE_ID_KURON_THE_BLACK_CLOTH, 51, 30
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		}
		flt
		characreate -1, CREATURE_ID_BARTENDER, 42, 27
		cdata(CDATA_ROLE, rc) = ROLE_BARTENDER
		flt
		characreate -1, CREATURE_ID_HEALER, 34, 3
		cdata(CDATA_ROLE, rc) = ROLE_HEALER
		flt
		characreate -1, CREATURE_ID_ARENA_MASTER, 22, 31
		cdata(CDATA_ROLE, rc) = ROLE_ARENA_MASTER
		flt
		characreate -1, CREATURE_ID_ERYSTIA_THE_SCHOLAR_OF_HISTORY, 5, 15
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_MIA_THE_CAT_FREAK, 41, 11
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_CONERY_PALMIAN_MAJOR_GENERAL, 5, 6
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_CLEANER, 24, 6
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_CLEANER, 15, 22
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_BARD, 15, 22
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		if ( gdata(GDATA_FLAG_SUB_MIAS_DREAM) == 1000 ) {
			flt
			characreate -1, CREATURE_ID_SILVER_CAT, 42, 11
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		}
		flt
		characreate -1, CREATURE_ID_SHOPKEEPER, 48, 18
		cdata(CDATA_ROLE, rc) = ROLE_SHOP_GENERAL, 10
		sngeneral cdatan(CDATAN_NAME, rc)
		flt
		characreate -1, CREATURE_ID_SHOPKEEPER, 30, 17
		cdata(CDATA_ROLE, rc) = ROLE_SHOP_INN, 8
		sninn cdatan(CDATAN_NAME, rc)
		flt
		characreate -1, CREATURE_ID_SHOPKEEPER, 48, 3
		cdata(CDATA_ROLE, rc) = ROLE_SHOP_GOODS, 8
		sngoods cdatan(CDATAN_NAME, rc)
		flt
		characreate -1, CREATURE_ID_SHOPKEEPER, 42, 17
		cdata(CDATA_ROLE, rc) = ROLE_SHOP_ARMOR, 12
		snarmor cdatan(CDATAN_NAME, rc)
		flt
		characreate -1, CREATURE_ID_SHOPKEEPER, 11, 14
		cdata(CDATA_ROLE, rc) = ROLE_SHOP_BAKERY, 9
		snbakery cdatan(CDATAN_NAME, rc)
		cdata(CDATA_PIC, rc) = xy2pic(6, 4)
		flt
		characreate -1, CREATURE_ID_WIZARD, 41, 3
		cdata(CDATA_ROLE, rc) = ROLE_SHOP_MAGIC, 11
		snmagic cdatan(CDATAN_NAME, rc)
		flt
		characreate -1, CREATURE_ID_SHOPKEEPER, 41, 28
		cdata(CDATA_ROLE, rc) = ROLE_SHOP_TRADE, 12
		sntrade cdatan(CDATAN_NAME, rc)
		flt
		characreate -1, CREATURE_ID_STERSHA_THE_QUEEN_OF_PALMIA, 7, 2
		cdata(CDATA_ROLE, rc) = ROLE_KING
		cdata(CDATA_AI_CALM, rc) = 3
		flt
		characreate -1, CREATURE_ID_XABI_THE_KING_OF_PALMIA, 6, 2
		cdata(CDATA_ROLE, rc) = ROLE_KING
		cdata(CDATA_AI_CALM, rc) = 3
		flt
		characreate -1, CREATURE_ID_ELDER, 49, 11
		cdata(CDATA_ROLE, rc) = ROLE_MAYOR
		cdatan(CDATAN_NAME, rc) = lang("パルミア市街地の" + cdatan(CDATAN_NAME, rc), cdatan(CDATAN_NAME, rc) + " of Palmia city")
		flt
		characreate -1, CREATURE_ID_TRAINER, 30, 27
		cdata(CDATA_ROLE, rc) = ROLE_TRAINER
		sntrainer cdatan(CDATAN_NAME, rc)
		flt
		characreate -1, CREATURE_ID_WIZARD, 32, 27
		cdata(CDATA_ROLE, rc) = ROLE_IDENTIFIER
		flt
		characreate -1, CREATURE_ID_INFORMER, 29, 28
		cdata(CDATA_ROLE, rc) = ROLE_INFORMER
		flt
		characreate -1, CREATURE_ID_GUARD2, 16, 5
		cdata(CDATA_ROLE, rc) = ROLE_GUARD
		cdata(CDATA_AI_CALM, rc) = 3
		flt
		characreate -1, CREATURE_ID_GUARD2, 16, 9
		cdata(CDATA_ROLE, rc) = ROLE_GUARD
		cdata(CDATA_AI_CALM, rc) = 3
		flt
		characreate -1, CREATURE_ID_GUARD2, 5, 3
		cdata(CDATA_ROLE, rc) = ROLE_GUARD
		cdata(CDATA_AI_CALM, rc) = 3
		flt
		characreate -1, CREATURE_ID_GUARD2, 8, 3
		cdata(CDATA_ROLE, rc) = ROLE_GUARD
		cdata(CDATA_AI_CALM, rc) = 3
		flt
		characreate -1, CREATURE_ID_GUARD2, 35, 14
		cdata(CDATA_ROLE, rc) = ROLE_GUARD
		cdata(CDATA_AI_CALM, rc) = 3
		flt
		characreate -1, CREATURE_ID_GUARD2, 38, 14
		cdata(CDATA_ROLE, rc) = ROLE_GUARD
		cdata(CDATA_AI_CALM, rc) = 3
		flt
		characreate -1, CREATURE_ID_GUARD2, 29, 2
		cdata(CDATA_ROLE, rc) = ROLE_GUARD
		cdata(CDATA_AI_CALM, rc) = 3
		flt
		characreate -1, CREATURE_ID_GUARD2, 19, 18
		cdata(CDATA_ROLE, rc) = ROLE_GUARD
		cdata(CDATA_AI_CALM, rc) = 3
		flt
		characreate -1, CREATURE_ID_GUARD2, 22, 18
		cdata(CDATA_ROLE, rc) = ROLE_GUARD
		cdata(CDATA_AI_CALM, rc) = 3
		repeat 5
			flt
			characreate -1, CREATURE_ID_CITIZEN, -3, 0
			cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			flt
			characreate -1, CREATURE_ID_CITIZEN2, -3, 0
			cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
		loop
		repeat 4
			flt
			characreate -1, CREATURE_ID_GUARD2, -3, 0
			cdata(CDATA_ROLE, rc) = ROLE_GUARD
		loop
		gosub *client_update
		repeat 25
			dbid = 0
			gosub *fltChara
			characreate -1, dbid, -3, 0
		loop
	}
	if ( gdata(GDATA_AREA) == AREA_LUMIEST ) {
		if ( gdata(GDATA_LEVEL) == 1 ) {
			mdata(MDATA_MODERATE_CROWD) = 40
			map_initcustom "lumiest"
			map_placeplayer
			mdata(MDATA_WALL) = 0
			if ( gdata(GDATA_FLAG_SUB_SEWER) ) {
				cell_featset 18, 45, tile_downstairs, CELL_FEATURE_DOWNSTAIRS, 20
			}
			flt
			characreate -1, CREATURE_ID_RENTON_THE_SUFFERING_WIZARD, 12, 24
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_BALZAK_THE_JANITOR, 21, 3
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_LEXUS_THE_MAGE_WATCHMAN, 5, 20
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_CLEANER, 28, 29
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_BARD, 41, 19
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_BARD, 32, 43
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_BARD, 29, 28
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_BARD, 16, 45
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_BARD, 13, 24
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_BARTENDER, 41, 42
			cdata(CDATA_ROLE, rc) = ROLE_BARTENDER
			flt
			characreate -1, CREATURE_ID_HEALER, 10, 16
			cdata(CDATA_ROLE, rc) = ROLE_HEALER
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 47, 30
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_GENERAL, 10
			sngeneral cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 24, 47
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_INN, 8
			sninn cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 37, 30
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_ARMOR, 12
			snarmor cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 37, 12
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_BAKERY, 9
			snbakery cdatan(CDATAN_NAME, rc)
			cdata(CDATA_PIC, rc) = xy2pic(6, 4)
			flt
			characreate -1, CREATURE_ID_WIZARD, 6, 15
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_MAGIC, 11
			snmagic cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 33, 43
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_TRADE, 12
			sntrade cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 47, 12
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_FISH, 5
			snfish cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_ELDER, 3, 38
			cdata(CDATA_ROLE, rc) = ROLE_MAYOR
			cdatan(CDATAN_NAME, rc) = lang("ルミエストの" + cdatan(CDATAN_NAME, rc), cdatan(CDATAN_NAME, rc) + " of Lumiest")
			flt
			characreate -1, CREATURE_ID_TRAINER, 21, 28
			cdata(CDATA_ROLE, rc) = ROLE_TRAINER
			sntrainer cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_WIZARD, 21, 30
			cdata(CDATA_ROLE, rc) = ROLE_IDENTIFIER
			flt
			characreate -1, CREATURE_ID_INFORMER, 23, 38
			cdata(CDATA_ROLE, rc) = ROLE_INFORMER
			repeat 6
				flt
				characreate -1, CREATURE_ID_CITIZEN, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
				flt
				characreate -1, CREATURE_ID_CITIZEN2, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			loop
			repeat 7
				flt
				characreate -1, CREATURE_ID_GUARD2, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_GUARD
			loop
			gosub *client_update
			repeat 25
				dbid = 0
				gosub *fltChara
				characreate -1, dbid, -3, 0
			loop
		}
		if ( gdata(GDATA_LEVEL) == 3 ) {
			mdata(MDATA_TILESET) = 0
			map_initcustom "mageguild"
			mdata(MDATA_FIELD) = 1
			mdata(MDATA_TYPE) = MAP_TYPE_VILLAGE
			mdata(MDATA_MODERATE_CROWD) = 25
			mdata(MDATA_MUSIC) = MUSICLIST_MCTOWN2
			mdata(MDATA_NO_RENEW) = 0
			mdatan(MDATAN_NAME) = lang("魔術士ギルド", "Mages Guild")
			map_placeplayer
			flt
			characreate -1, CREATURE_ID_REVLUS_THE_MAGE_GUILDMASTER, 24, 3
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_WIZARD, 27, 8
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_BOOK_RESERVE
			cdatan(CDATAN_NAME, rc) = lang("魔法書作家の" + cdatan(CDATAN_NAME, rc), sncnv(cdatan(CDATAN_NAME, rc)) + "the spell writer")
			flt
			characreate -1, CREATURE_ID_WIZARD, 22, 8
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_MAGIC, 11
			snmagic cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_HEALER, 3, 9
			cdata(CDATA_ROLE, rc) = ROLE_HEALER
			flt
			characreate -1, CREATURE_ID_TRAINER, 12, 6
			cdata(CDATA_ROLE, rc) = ROLE_TRAINER
			sntrainer cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_WIZARD, 3, 3
			cdata(CDATA_ROLE, rc) = ROLE_IDENTIFIER
			repeat 16
				flt
				characreate -1, CREATURE_ID_MAGE_GUILD_MEMBER, -3, 0
			loop
		}
		if ( gdata(GDATA_LEVEL) == 20 ) {
			mdata(MDATA_TILESET) = 0
			map_initcustom "sqSewer"
			mdata(MDATA_FIELD) = 1
			mdata(MDATA_TYPE) = MAP_TYPE_DUNGEON
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCPUTI
			mdata(MDATA_NO_RENEW) = 1
			mdatan(MDATAN_NAME) = lang("ルミエスト下水道", "The Sewer")
			put_questtarget
			gdata(GDATA_LEVEL_START_ON) = 1
			map_placeplayer
		}
	}
	if ( gdata(GDATA_AREA) == AREA_SEMINAR ) {
		if ( gdata(GDATA_LEVEL) == 1 ) {
			mdata(MDATA_MODERATE_CROWD) = 0
			map_initcustom "semi1"
			map_placeplayer
			mdata(MDATA_MUSIC) = MUSICLIST_MCCASINO
			mdata(MDATA_WALL) = 0
			flt
			itemcreate -1, ITEM_ID_RED_BOOK, 13, 15, 0
			inv(INV_ITEM_PARAM1, ci) = 25
			flt
			characreate -1, CREATURE_ID_PART_TIME_WORKER_THE_RED_SWORD, 10, 10
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_TRAINER, 4, 7
			cdata(CDATA_ROLE, rc) = ROLE_TRAINER
			flt
			characreate -1, CREATURE_ID_TEACHER, 3, 7
			cdata(CDATA_RELATION, rc) = -1
			cdata(CDATA_RELATION_ORG, rc) = -1
			cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			flt
			characreate -1, CREATURE_ID_TEACHER, 7, 5
			cdata(CDATA_RELATION, rc) = -1
			cdata(CDATA_RELATION_ORG, rc) = -1
			cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			flt
			characreate -1, CREATURE_ID_TEACHER, 6, 9
			cdata(CDATA_RELATION, rc) = -1
			cdata(CDATA_RELATION_ORG, rc) = -1
			cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			flt
			characreate -1, CREATURE_ID_NOVICE, 3, 15
			cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			flt
			characreate -1, CREATURE_ID_NOVICE, 12, 15
			cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			flt
			characreate -1, CREATURE_ID_NOVICE, 17, 18
			cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			flt
			characreate -1, CREATURE_ID_NOVICE, 5, 15
			cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
		}
		if ( gdata(GDATA_LEVEL) >= 2 & gdata(GDATA_LEVEL) <= 5 ) {
			map_initcustom "semi2"
			mdata(MDATA_FIELD) = 1
			mdata(MDATA_TYPE) = MAP_TYPE_VILLAGE
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCCASINO
			mdata(MDATA_CAN_SAVE) = 0
			mdata(MDATA_NO_RENEW) = 0
			mdatan(MDATAN_NAME) = lang("教室", "Classroom")
			gdata(GDATA_LEVEL_START_ON) = 7
			mapstartx = 11
			mapstarty = 10
			map_placeplayer
			if ( gdata(GDATA_LEVEL) == 2 ) {
				flt
				characreate -1, CREATURE_ID_AJETALIO_THE_SEMINAR_LECTURER, 7, 3
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			}
			if ( gdata(GDATA_LEVEL) == 3 ) {
				flt
				characreate -1, CREATURE_ID_CRESCE_THE_SEMINAR_LECTURER, 7, 3
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			}
			if ( gdata(GDATA_LEVEL) == 4 ) {
				flt
				characreate -1, CREATURE_ID_IDURU_THE_SEMINAR_LECTURER, 7, 3
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			}
			if ( gdata(GDATA_LEVEL) == 5 ) {
				flt
				characreate -1, CREATURE_ID_MITO_THE_SEMINAR_LECTURER, 7, 3
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			}
			flt
			characreate -1, CREATURE_ID_KARATA_THE_SEMINAR_MASCOT, 6, 3
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_NOVICE, 2, 6
			flt
			characreate -1, CREATURE_ID_NOVICE, 2, 8
			flt
			characreate -1, CREATURE_ID_NOVICE, 2, 10
			flt
			characreate -1, CREATURE_ID_NOVICE, 2, 12
			flt
			characreate -1, CREATURE_ID_NOVICE, 5, 8
			flt
			characreate -1, CREATURE_ID_NOVICE, 5, 10
			flt
			characreate -1, CREATURE_ID_NOVICE, 5, 12
			flt
			characreate -1, CREATURE_ID_NOVICE, 8, 10
			flt
			characreate -1, CREATURE_ID_NOVICE, 8, 12
			flt
			characreate -1, CREATURE_ID_NOVICE, 11, 8
		}
	}
	if ( gdata(GDATA_AREA) == AREA_YOWYN ) {
		if ( gdata(GDATA_LEVEL) == 1 ) {
			mdata(MDATA_MODERATE_CROWD) = 35
			map_initcustom "yowyn"
			map_placeplayer
			mdata(MDATA_WALL) = 0
			if ( gdata(GDATA_FLAG_GWEN_STAGE) >= 1000 ) {
				flt
				characreate -1, CREATURE_ID_GWEN_THE_PITILESS, 14, 12
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			}
			if ( gdata(GDATA_FLAG_GWEN_STAGE) < 1000 ) {
				flt
				characreate -1, CREATURE_ID_GWEN_THE_INNOCENT, 14, 12
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			}
			if ( gdata(GDATA_FLAG_SUB_CAT) ) {
				cell_featset 23, 22, tile_downstairs, CELL_FEATURE_DOWNSTAIRS, 3
			}
			flt
			characreate -1, CREATURE_ID_AINC_THE_NOVICE_KNIGHT, 3, 17
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_TAM_THE_CAT_HATER, 26, 11
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_GILBERT_THE_COLONEL, 14, 20
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 11, 5
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_GENERAL, 10
			sngeneral cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 25, 8
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_INN, 8
			sninn cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 7, 8
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_GOODS, 8
			sngoods cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 14, 14
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_TRADE, 12
			sntrade cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 35, 18
			cdata(CDATA_ROLE, rc) = ROLE_HORSE_MASTER
			cdatan(CDATAN_NAME, rc) = lang("馬屋の" + cdatan(CDATAN_NAME, rc), sncnv(cdatan(CDATAN_NAME, rc)) + "the horse master")
			flt
			characreate -1, CREATURE_ID_LAME_HORSE, 33, 16
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_LAME_HORSE, 37, 19
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_YOWYN_HORSE, 34, 19
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_YOWYN_HORSE, 38, 16
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_ELDER, 3, 4
			cdata(CDATA_ROLE, rc) = ROLE_MAYOR
			cdatan(CDATAN_NAME, rc) = lang("ヨウィンの" + cdatan(CDATAN_NAME, rc), cdatan(CDATAN_NAME, rc) + " of Yowyn")
			flt
			characreate -1, CREATURE_ID_TRAINER, 20, 14
			cdata(CDATA_ROLE, rc) = ROLE_TRAINER
			sntrainer cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_WIZARD, 24, 16
			cdata(CDATA_ROLE, rc) = ROLE_IDENTIFIER
			flt
			characreate -1, CREATURE_ID_INFORMER, 26, 16
			cdata(CDATA_ROLE, rc) = ROLE_INFORMER
			repeat 2
				flt
				characreate -1, CREATURE_ID_CITIZEN, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
				flt
				characreate -1, CREATURE_ID_CITIZEN2, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			loop
			repeat 3
				flt
				characreate -1, CREATURE_ID_GUARD2, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_GUARD
			loop
			gosub *client_update
			repeat 15
				dbid = 0
				gosub *fltChara
				characreate -1, dbid, -3, 0
			loop
		}
		if ( gdata(GDATA_LEVEL) == 3 ) {
			mdata(MDATA_TILESET) = 0
			map_initcustom "sqcat"
			mdata(MDATA_FIELD) = 1
			mdata(MDATA_TYPE) = MAP_TYPE_DUNGEON
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCPUTI
			mdata(MDATA_NO_RENEW) = 1
			mdatan(MDATAN_NAME) = lang("タムの猫屋敷", "Cat Mansion")
			put_questtarget
			map_placeplayer
		}
		if ( gdata(GDATA_LEVEL) == 4 ) {
			mdata(MDATA_TILESET) = 0
			map_initcustom "sqwar"
			mdata(MDATA_FIELD) = 2
			mdata(MDATA_TYPE) = MAP_TYPE_DUNGEON
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCPUTI
			mdata(MDATA_NO_RENEW) = 1
			mdata(MDATA_CAN_SAVE) = 0
			mdatan(MDATAN_NAME) = lang("防衛線", "Battle Field")
			put_questtarget
			gdata(GDATA_LEVEL_START_ON) = 8
			map_placeplayer
			listmax = 0
			repeat MAX_CHARA_TOTAL - MAX_CHARA_SAVE, MAX_CHARA_SAVE
				if ( cdata(CDATA_EXIST, cnt) == CHAR_STATE_ALIVE ) {
					if ( cbit(CHARA_BIT_QUEST_TARGET, cnt) == 1 ) {
						list(0, listmax) = cnt
						listmax++
					}
				}
			loop
			repeat 30
				flt
				characreate -1, CREATURE_ID_JUERE_INFANTRY + 2 * (cnt > 22), 11, 16
				cdata(CDATA_RELATION, rc) = 10
				cdata(CDATA_RELATION_ORG, rc) = 10
				cdata(CDATA_AI_AGGRO, rc) = 100
				p = list(0, rnd(listmax))
				cdata(CDATA_TARGET, rc) = p
				cdata(CDATA_AI_AGGRO, p) = 100
				cdata(CDATA_TARGET, p) = rc
			loop
			noaggrorefresh = 1
		}
	}
	if ( gdata(GDATA_AREA) == AREA_NOYEL ) {
		if ( gdata(GDATA_LEVEL) == 1 ) {
			mdata(MDATA_MODERATE_CROWD) = 35
			map_initcustom "noyel"
			map_placeplayer
			mdata(MDATA_WALL) = 0
			if ( gdata(GDATA_FLAG_SUB_REGULUS_MAYROON) >= 2 ) {
				if ( findchara(CREATURE_ID_MARKA_THE_SILVER_BEAR) == 0 ) {
					flt
					characreate -1, CREATURE_ID_MARKA_THE_SILVER_BEAR, 50, 13
					cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
					cdata(CDATA_AI_CALM, rc) = 3
				}
			}
			flt
			characreate -1, CREATURE_ID_EBON_THE_FIRE_GIANT, 46, 18
			gdata(GDATA_FLAG_GIANT_ID) = rc
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_MOYER_THE_CROOKED, 47, 18
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_NOYEL
			flt
			characreate -1, CREATURE_ID_TOWN_CHILD, 47, 20
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_TOWN_CHILD, 45, 19
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_TOWN_CHILD, 49, 20
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_BARD, 28, 22
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_LONELY_PAEL, 19, 3
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			if ( gdata(GDATA_FLAG_SUB_MOTHER) != 1001 ) {
				flt
				characreate -1, CREATURE_ID_PAELS_MOM_LILY, 19, 2
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			}
			flt
			characreate -1, CREATURE_ID_BARTENDER, 40, 33
			cdata(CDATA_ROLE, rc) = ROLE_BARTENDER
			flt
			characreate -1, CREATURE_ID_HEALER, 44, 6
			cdata(CDATA_ROLE, rc) = ROLE_HEALER
			flt
			characreate -1, CREATURE_ID_SISTER, 44, 3
			cdata(CDATA_ROLE, rc) = ROLE_SISTER
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 19, 31
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_ARMOR, 12
			snarmor cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 11, 31
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_GENERAL, 10
			sngeneral cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 38, 34
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_INN, 8
			sninn cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 5, 27
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_BAKERY, 9
			snbakery cdatan(CDATAN_NAME, rc)
			cdata(CDATA_PIC, rc) = xy2pic(6, 4)
			flt
			characreate -1, CREATURE_ID_WIZARD, 56, 5
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_MAGIC, 11
			snmagic cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 39, 35
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_TRADE, 12
			sntrade cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_ELDER, 5, 18
			cdata(CDATA_ROLE, rc) = ROLE_MAYOR
			cdatan(CDATAN_NAME, rc) = lang("ノイエルの" + cdatan(CDATAN_NAME, rc), cdatan(CDATAN_NAME, rc) + " of Noyel")
			flt
			characreate -1, CREATURE_ID_TRAINER, 18, 20
			cdata(CDATA_ROLE, rc) = ROLE_TRAINER
			sntrainer cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_WIZARD, 4, 33
			cdata(CDATA_ROLE, rc) = ROLE_IDENTIFIER
			flt
			characreate -1, CREATURE_ID_INFORMER, 6, 33
			cdata(CDATA_ROLE, rc) = ROLE_INFORMER
			repeat 3
				flt
				characreate -1, CREATURE_ID_CITIZEN, rnd(32), rnd(mdata(MDATA_HEIGHT))
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
				flt
				characreate -1, CREATURE_ID_CITIZEN2, rnd(32), rnd(mdata(MDATA_HEIGHT))
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			loop
			repeat 3
				flt
				characreate -1, CREATURE_ID_GUARD2, rnd(32), rnd(mdata(MDATA_HEIGHT))
				cdata(CDATA_ROLE, rc) = ROLE_GUARD
			loop
			gosub *client_update
			repeat 8
				gosub *fltChara
				characreate -1, CREATURE_ID_TOWN_CHILD, rnd(11) + 25, rnd(5) + 15
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			loop
			repeat 20
				dbid = 0
				gosub *fltChara
				characreate -1, dbid, rnd(55), rnd(mdata(MDATA_HEIGHT))
			loop
		}
		if ( gdata(GDATA_LEVEL) == 100 ) {
			mdata(MDATA_TILESET) = 99
			map_initcustom "ice"
			mdata(MDATA_FIELD) = 2
			mdata(MDATA_TYPE) = MAP_TYPE_DUNGEON
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCBOSS5
			mdata(MDATA_NO_RENEW) = 1
			mdatan(MDATAN_NAME) = lang("氷の城", "Castle of Ice")
			gdata(GDATA_LEVEL_START_ON) = 7
			mapstartx = 20
			mapstarty = 55
			flt
			characreate -1, CREATURE_ID_LAZASYE_THE_DESTROY, 18, 8
			put_questtarget
			flt
			characreate -1, CREATURE_ID_MARKA_THE_SILVER_BEAR, 17, 56
			cdata(CDATA_AI_CALM, rc) = 4
			cdata(CDATA_RELATION, rc) = 10
			cdata(CDATA_RELATION_ORG, rc) = 10
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			map_placeplayer
		}
	}
	if ( gdata(GDATA_AREA) == AREA_PORT_KAPUL ) {
		if ( gdata(GDATA_LEVEL) == 1 ) {
			mdata(MDATA_MODERATE_CROWD) = 40
			map_initcustom "kapul"
			map_placeplayer
			mdata(MDATA_WALL) = 0
			flt
			characreate -1, CREATURE_ID_RAPHAEL_THE_WOMANIZER, 15, 18
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_ARNORD_THE_INJURED_SOLDIER, 36, 27
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_ICOLLE_THE_BIOLOGIST, 5, 26
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_DORIA_THE_FIGHTER_WATCHMAN, 29, 3
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_CLEANER, 24, 21
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_CLEANER, 12, 26
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_CLEANER, 8, 11
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_BARD, 8, 14
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 16, 17
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_TRADE, 12
			sntrade cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 23, 7
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_ARMOR, 12
			snarmor cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 32, 14
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_GENERAL, 10
			sngeneral cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 22, 14
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_GOODS, 10
			sngoods cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 16, 25
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_BLACKMARKET, 10
			snblack cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 17, 28
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_FOOD, 10
			snfood cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_WIZARD, 22, 22
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_MAGIC, 11
			snmagic cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 35, 3
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_INN, 8
			sninn cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_BARTENDER, 15, 15
			cdata(CDATA_ROLE, rc) = ROLE_BARTENDER
			flt
			characreate -1, CREATURE_ID_ARENA_MASTER, 26, 3
			cdata(CDATA_ROLE, rc) = ROLE_ARENA_MASTER
			flt
			characreate -1, CREATURE_ID_MASTER_OF_PET_ARENA, 25, 4
			cdata(CDATA_ROLE, rc) = ROLE_PET_ARENA_MASTER
			flt
			characreate -1, CREATURE_ID_ELDER, 8, 12
			cdata(CDATA_ROLE, rc) = ROLE_MAYOR
			cdatan(CDATAN_NAME, rc) = lang("ポート・カプールの" + cdatan(CDATAN_NAME, rc), cdatan(CDATAN_NAME, rc) + " of Port Kapul")
			flt
			characreate -1, CREATURE_ID_TRAINER, 16, 4
			cdata(CDATA_ROLE, rc) = ROLE_TRAINER
			sntrainer cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_WIZARD, 14, 4
			cdata(CDATA_ROLE, rc) = ROLE_IDENTIFIER
			flt
			characreate -1, CREATURE_ID_INFORMER, 17, 5
			cdata(CDATA_ROLE, rc) = ROLE_INFORMER
			flt
			characreate -1, CREATURE_ID_HEALER, 27, 11
			cdata(CDATA_ROLE, rc) = ROLE_HEALER
			repeat 2
				flt
				characreate -1, CREATURE_ID_CITIZEN, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
				flt
				characreate -1, CREATURE_ID_CITIZEN2, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			loop
			repeat 4
				flt
				characreate -1, CREATURE_ID_SAILOR, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			loop
			repeat 5
				flt
				characreate -1, CREATURE_ID_GUARD, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_GUARD
			loop
			flt
			characreate -1, CREATURE_ID_CAPTAIN, 7, 6
			cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			gosub *client_update
			repeat 20
				gosub *fltChara
				characreate -1, CREATURE_ID_BUG, -3, 0
			loop
		}
		if ( gdata(GDATA_LEVEL) == 3 ) {
			mdata(MDATA_TILESET) = 0
			map_initcustom "fighterguild"
			mdata(MDATA_FIELD) = 1
			mdata(MDATA_TYPE) = MAP_TYPE_VILLAGE
			mdata(MDATA_MODERATE_CROWD) = 25
			mdata(MDATA_MUSIC) = MUSICLIST_MCTOWN2
			mdata(MDATA_NO_RENEW) = 0
			mdatan(MDATAN_NAME) = lang("戦士ギルド", "Fighters Guild")
			map_placeplayer
			flt
			characreate -1, CREATURE_ID_FRAY_THE_FIGHTER_GUILDMASTER, 27, 4
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_HEALER, 28, 10
			cdata(CDATA_ROLE, rc) = ROLE_HEALER
			flt
			characreate -1, CREATURE_ID_TRAINER, 15, 10
			cdata(CDATA_ROLE, rc) = ROLE_TRAINER
			sntrainer cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_WIZARD, 14, 18
			cdata(CDATA_ROLE, rc) = ROLE_IDENTIFIER
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 29, 15
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_ARMOR, 12
			snarmor cdatan(CDATAN_NAME, rc)
			repeat 16
				flt
				characreate -1, CREATURE_ID_FIGHTER_GUILD_MEMBER, -3, 0
			loop
		}
		if ( gdata(GDATA_LEVEL) == 25 ) {
			mdata(MDATA_TILESET) = 0
			map_initcustom "sqkamikaze"
			mdata(MDATA_FIELD) = 1
			mdata(MDATA_TYPE) = MAP_TYPE_DUNGEON
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCBATTLE1
			mdata(MDATA_NO_RENEW) = 1
			mdata(MDATA_CAN_SAVE) = 0
			mdatan(MDATAN_NAME) = lang("戦場", "Doom Ground")
			gdata(GDATA_LEVEL_START_ON) = 4
			gdata(GDATA_FLAG_KAMIKAZE) = 0
			map_placeplayer
			repeat 10
				flt
				characreate -1, CREATURE_ID_PALMIAN_ELITE_SOLDIER, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
				cdata(CDATA_RELATION, rc) = 10
				cdata(CDATA_RELATION_ORG, rc) = 10
			loop
			noaggrorefresh = 1
		}
	}
	if ( gdata(GDATA_AREA) == AREA_VERNIS ) {
		if ( gdata(GDATA_LEVEL) == 1 ) {
			mdata(MDATA_MODERATE_CROWD) = 40
			map_initcustom "vernis"
			map_placeplayer
			mdata(MDATA_WALL) = 0
			if ( gdata(GDATA_FLAG_SUB_ROGUE) ) {
				cell_featset 48, 5, tile_downstairs, CELL_FEATURE_DOWNSTAIRS, 4
			}
			flt
			characreate -1, CREATURE_ID_WHOM_DWELL_IN_THE_VANITY, 39, 3
			flt
			characreate -1, CREATURE_ID_LOYTER_THE_CRIMSON_OF_ZANAN, 42, 23
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_MICHES_THE_APPRENTICE, 24, 5
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_SHENA_THE_DRAW, 40, 24
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_DUNGEON_CLEANER, 40, 25
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_RILIAN_THE_DOG_LOVER, 30, 5
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_BARD, 42, 24
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			if ( gdata(GDATA_FLAG_SUB_DOG) == 1000 ) {
				flt
				characreate -1, CREATURE_ID_POPPY_THE_LITTLE_DOG, 31, 4
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			}
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 47, 9
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_FISH, 5
			snfish cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 14, 12
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_ARMOR, 12
			snarmor cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 39, 27
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_TRADE, 12
			sntrade cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 10, 15
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_GENERAL, 10
			sngeneral cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_WIZARD, 7, 26
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_MAGIC, 11
			snmagic cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 14, 25
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_INN, 8
			sninn cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 22, 26
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_BAKERY, 9
			snbakery cdatan(CDATAN_NAME, rc)
			cdata(CDATA_PIC, rc) = xy2pic(6, 4)
			flt
			characreate -1, CREATURE_ID_WIZARD, 28, 16
			cdata(CDATA_ROLE, rc) = ROLE_IDENTIFIER
			flt
			characreate -1, CREATURE_ID_BARTENDER, 38, 27
			cdata(CDATA_ROLE, rc) = ROLE_BARTENDER
			flt
			characreate -1, CREATURE_ID_HEALER, 6, 25
			cdata(CDATA_ROLE, rc) = ROLE_HEALER
			flt
			characreate -1, CREATURE_ID_ELDER, 10, 7
			cdata(CDATA_ROLE, rc) = ROLE_MAYOR
			cdatan(CDATAN_NAME, rc) = lang("ヴェルニースの" + cdatan(CDATAN_NAME, rc), cdatan(CDATAN_NAME, rc) + " of Vernis")
			flt
			characreate -1, CREATURE_ID_TRAINER, 27, 16
			cdata(CDATA_ROLE, rc) = ROLE_TRAINER
			sntrainer cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_INFORMER, 25, 16
			cdata(CDATA_ROLE, rc) = ROLE_INFORMER
			repeat 4
				flt
				characreate -1, CREATURE_ID_CITIZEN, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
				flt
				characreate -1, CREATURE_ID_CITIZEN2, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			loop
			repeat 4
				flt
				characreate -1, CREATURE_ID_GUARD2, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_GUARD
			loop
			gosub *client_update
			repeat 25
				dbid = 0
				gosub *fltChara
				characreate -1, dbid, -3, 0
			loop
		}
		if ( gdata(GDATA_LEVEL) == 3 ) {
			mdata(MDATA_TILESET) = 0
			map_initcustom "puti"
			mdata(MDATA_FIELD) = 1
			mdata(MDATA_TYPE) = MAP_TYPE_DUNGEON
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCPUTI
			mdata(MDATA_NO_RENEW) = 1
			mdatan(MDATAN_NAME) = lang("スライムの坑道", "The Mine")
			put_questtarget
			map_placeplayer
		}
		if ( gdata(GDATA_LEVEL) == 4 ) {
			mdata(MDATA_TILESET) = 0
			map_initcustom "sqrogue"
			mdata(MDATA_FIELD) = 1
			mdata(MDATA_TYPE) = MAP_TYPE_DUNGEON
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCPUTI
			mdata(MDATA_NO_RENEW) = 1
			mdatan(MDATAN_NAME) = lang("盗賊の隠れ家", "Robber's Hideout")
			put_questtarget
			map_placeplayer
		}
		if ( gdata(GDATA_LEVEL) == 5 ) {
			mdata(MDATA_TILESET) = 0
			map_initcustom "sqNightmare"
			mdata(MDATA_FIELD) = 1
			mdata(MDATA_TYPE) = MAP_TYPE_DUNGEON
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCCHAOS
			mdata(MDATA_NO_RENEW) = 1
			mdatan(MDATAN_NAME) = lang("生体兵器実験場", "Test Site")
			put_questtarget
			gdata(GDATA_LEVEL_START_ON) = 7
			mapstartx = 6
			mapstarty = 27
			map_placeplayer
		}
	}
	if ( gdata(GDATA_AREA) == AREA_WILDERNESS ) {
		mdata(MDATA_WIDTH) = 34
		mdata(MDATA_HEIGHT) = 22
		if ( gdata(GDATA_WORLD) != AREA_AIMWELL ) {
			mdata(MDATA_MODERATE_CROWD) = 4
		}
		else {
			mdata(MDATA_MODERATE_CROWD) = 0
		}
		mdata(MDATA_WALL) = 0
		map_initialize
		repeat mdata(MDATA_HEIGHT)
			p = cnt
			repeat mdata(MDATA_WIDTH)
				map(cnt, p, 0) = tile_default + (rnd(tile_default(2)) == 0) * rnd(tile_default(1))
			loop
		loop
		mdatan(MDATAN_NAME) = ""
		if ( 4 <= gdata(GDATA_WORLD_TILE) & gdata(GDATA_WORLD_TILE) < 9 ) {
			mdatan(MDATAN_NAME) = lang("森", "Forest")
			map_randomtile 8, 25
			map_randomtile 0, 10
			map_randomtile 1, 4
			map_randomtile 4, 2
			repeat 20 + rnd(20)
				flt
				flttypemajor = FILTER_ENVIRONMENT
				itemcreate -1, ITEM_ID_DUMMY, -1, -1, 0
				inv(INV_ITEM_PROPERTY, ci) = PROP_NPC
				map(inv(INV_ITEM_X, ci), inv(INV_ITEM_Y, ci), 0) = 0
			loop
			if ( rnd(2) == 0 ) {
				gdata(GDATA_FLAG_COLLECTED_WISHES) = 1
				if ( rnd(2) == 0 ) {
					gosub *map_riverHorizontal
				}
				else {
					gosub *map_riverVertical
				}
			}
		}
		if ( 264 <= gdata(GDATA_WORLD_TILE) & gdata(GDATA_WORLD_TILE) < 363 ) {
			mdatan(MDATAN_NAME) = lang("水上", "Sea")
		}
		if ( 9 <= gdata(GDATA_WORLD_TILE) & gdata(GDATA_WORLD_TILE) < 13 ) {
			mdatan(MDATAN_NAME) = lang("草原", "Grassland")
			map_randomtile 9, 10
			map_randomtile 10, 10
			map_randomtile 0, 30
			map_randomtile 1, 4
			map_randomtile 4, 2
			map_randomtile 3, 2
			map_randomtile 4, 2
			map_randomtile 5, 2
			repeat 10 + rnd(10)
				flt
				flttypemajor = FILTER_ENVIRONMENT
				itemcreate -1, ITEM_ID_DUMMY, -1, -1, 0
				inv(INV_ITEM_PROPERTY, ci) = PROP_NPC
			loop
			if ( rnd(3) == 0 ) {
				gdata(GDATA_FLAG_COLLECTED_WISHES) = 3
				if ( rnd(2) == 0 ) {
					gosub *map_riverHorizontal
				}
				else {
					gosub *map_riverVertical
				}
			}
		}
		if ( 13 <= gdata(GDATA_WORLD_TILE) & gdata(GDATA_WORLD_TILE) < 17 ) {
			mdatan(MDATAN_NAME) = lang("荒野", "Wasteland")
			map_randomtile 18, 25
			map_randomtile 17, 10
			map_randomtile 19, 2
			map_randomtile 20, 4
			map_randomtile 21, 2
			repeat 4 + rnd(4)
				flt
				itemcreate -1, ITEM_ID_TREE_DEAD_TREE, -1, -1, 0
				inv(INV_ITEM_PROPERTY, ci) = PROP_NPC
			loop
		}
		if ( chipm(CHIPM_ROLE, gdata(GDATA_WORLD_TILE)) == MAP_CHIP_ROLE_SAND | chipm(CHIPM_ROLE, gdata(GDATA_WORLD_TILE)) == MAP_CHIP_ROLE_SAND_HARD ) {
			mdatan(MDATAN_NAME) = lang("砂丘", "Sand")
			map_randomtile 24, 25
			map_randomtile 25, 1
			map_randomtile 28, 1
			map_randomtile 26, 1
			map_randomtile 27, 1
			flt
			characreate -1, CREATURE_ID_SAND_WORM, -3, 0
			flt
			characreate -1, CREATURE_ID_KING_COBRA, -3, 0
			flt
			characreate -1, CREATURE_ID_SCORPION, -3, 0
			flt
			characreate -1, CREATURE_ID_KING_SCORPION, -3, 0
			repeat 4 + rnd(4)
				flt
				itemcreate -1, ITEM_ID_GIANT_CACTUS, -1, -1, 0
				inv(INV_ITEM_PROPERTY, ci) = PROP_NPC
			loop
		}
		if ( chipm(CHIPM_ROLE, gdata(GDATA_WORLD_TILE)) == MAP_CHIP_ROLE_WATER ) {
			if ( gdata(GDATA_WORLD) == AREA_SOUTH_TYRIS ) {
				mdatan(MDATAN_NAME) = lang("メルカ大湿原", "moor")
			}
			else {
				mdatan(MDATAN_NAME) = lang("湿原", "moor")
			}
			map_randomtile 314, 20
			map_randomtile 315, 45
			flt
			characreate -1, CREATURE_ID_AMBYSTOMA, -3, 0
			flt
			characreate -1, CREATURE_ID_FLYING_FROG, -3, 0
			flt
			characreate -1, CREATURE_ID_SHOEBILL, -3, 0
			repeat 4 + rnd(4)
				flt
				itemcreate -1, ITEM_ID_TREE_ZELKOVA, -1, -1, 0
				inv(INV_ITEM_PROPERTY, ci) = PROP_NPC
			loop
		}
		if ( gdata(GDATA_WORLD) == AREA_AIMWELL ) {
			mdatan(MDATAN_NAME) = lang("平地", "Plain Field")
			map_randomtile 1, 10
			map_randomtile 2, 2
			map_randomtile 3, 2
			map_randomtile 4, 2
			map_randomtile 5, 2
			map_randomtile 6, 2
			if ( rnd(2) == 0 ) {
				repeat 2
					if ( rnd(2) == 0 ) {
						flt
						characreate -1, CREATURE_ID_RABBIT, -3, 0
					}
					if ( rnd(2) == 0 ) {
						flt
						characreate -1, CREATURE_ID_FOX, -3, 0
					}
					if ( rnd(2) == 0 ) {
						flt
						characreate -1, CREATURE_ID_RAT2, -3, 0
					}
					if ( rnd(2) == 0 ) {
						flt
						characreate -1, CREATURE_ID_BOAR, -3, 0
					}
				loop
			}
			else {
				repeat 2
					if ( rnd(2) == 0 ) {
						flt
						characreate -1, CREATURE_ID_WOLF, -3, 0
					}
					if ( rnd(2) == 0 ) {
						flt
						characreate -1, CREATURE_ID_WOLF, -3, 0
					}
					if ( rnd(2) == 0 ) {
						flt
						characreate -1, CREATURE_ID_LION2, -3, 0
					}
					if ( rnd(2) == 0 ) {
						flt
						characreate -1, CREATURE_ID_LION2, -3, 0
					}
				loop
			}
			repeat 5 + rnd(5)
				flt
				flttypemajor = FILTER_ENVIRONMENT
				itemcreate -1, ITEM_ID_DUMMY, -1, -1, 0
				inv(INV_ITEM_PROPERTY, ci) = PROP_NPC
			loop
			if ( rnd(4) == 0 ) {
				gdata(GDATA_FLAG_COLLECTED_WISHES) = 5
				if ( rnd(2) == 0 ) {
					gosub *map_riverHorizontal
				}
				else {
					gosub *map_riverVertical
				}
			}
		}
		if ( chipm(CHIPM_ROLE, gdata(GDATA_WORLD_TILE)) == MAP_CHIP_ROLE_SNOW ) {
			mdatan(MDATAN_NAME) = lang("雪原", "Snow Field")
			map_randomtile 57, 4
			map_randomtile 56, 4
			map_randomtile 49, 2
			map_randomtile 46, 1
			map_randomtile 47, 1
			map_randomtile 48, 1
			map_randomtile 51, 1
			repeat 3 + rnd(5)
				flt
				flttypemajor = FILTER_ENVIRONMENT
				fltselect = 8
				itemcreate -1, ITEM_ID_DUMMY, -1, -1, 0
				inv(INV_ITEM_PROPERTY, ci) = PROP_NPC
			loop
		}
		if ( mdatan(MDATAN_NAME) == "" ) {
			mdatan(MDATAN_NAME) = lang("平地", "Plain Field")
			map_randomtile 1, 10
			map_randomtile 2, 2
			map_randomtile 3, 2
			map_randomtile 4, 2
			map_randomtile 5, 2
			map_randomtile 6, 2
			repeat 5 + rnd(5)
				flt
				flttypemajor = FILTER_ENVIRONMENT
				itemcreate -1, ITEM_ID_DUMMY, -1, -1, 0
				inv(INV_ITEM_PROPERTY, ci) = PROP_NPC
			loop
			if ( rnd(4) == 0 ) {
				gdata(GDATA_FLAG_COLLECTED_WISHES) = 5
				if ( rnd(2) == 0 ) {
					gosub *map_riverHorizontal
				}
				else {
					gosub *map_riverVertical
				}
			}
		}
		map_placeplayer
		if ( 264 > gdata(GDATA_WORLD_TILE) | gdata(GDATA_WORLD_TILE) >= 363 ) {
			repeat 4 + rnd(5)
				flt
				flttypeminor = FILTER_JUNK
				itemcreate -1, ITEM_ID_DUMMY, -1, -1, 0
			loop
		}
		if ( encounter == 0 ) {
			if ( gdata(GDATA_WORLD) != AREA_AIMWELL ) {
				repeat mdata(MDATA_MODERATE_CROWD) + 1
					gosub *fltChara
					flt
					characreate -1, CREATURE_ID_BUG, -3, 0
				loop
			}
		}
		if ( encounter == 4 ) {
			mdata(MDATA_MODERATE_CROWD) = 0
			flt
			initlv = encounterlv
			characreate -1, CREATURE_ID_ROGUE_BOSS, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
			repeat 6 + rnd(6)
				flt
				initlv = encounterlv + rnd(10)
				characreate -1, CREATURE_ID_ROGUE_WARRIOR + rnd(CREATURE_ID_ROGUE_WIZARD - CREATURE_ID_ROGUE_WARRIOR + 1), 14, 11
				cdatan(CDATAN_NAME, rc) += " Lv" + cdata(CDATA_LEVEL, rc)
				cdata(CDATA_CHARACTER_TIER, rc) = CHARACTER_TIER_SUMMONED_NORMAL
			loop
			gdatan(GDATAN_TEAM2) = random_title(2)
			evadd EVENT_ROGUE
		}
		if ( encounter == 5 ) {
			flt
			initlv = encounterlv
			characreate -1, CREATURE_ID_CHESTNUT_GIANT, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
			evadd EVENT_CHESTNUT_GIANT
		}
		if ( encounter == 3 ) {
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_TYPE) = MAP_TYPE_QUEST
			rq = encounterref
			gdata(GDATA_QUEST) = QUEST_TYPE_ESCORT, 1, rq, 1
			p = (rnd(3) + 5) / 2
			repeat p
				flt qdata(QDATA_LEVEL, rq), 3
				characreate -1, CREATURE_ID_BUG, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
				if ( stat != 0 ) {
					cdata(CDATA_AI_AGGRO, rc) = 30
					cdata(CDATA_RELATION, rc) = -3
					cdata(CDATA_RELATION_ORG, rc) = -3
				}
			loop

			/********** ORIGINAL - BEGINNING **********

			if ( dbg_noautosave == 0 & gdata(GDATA_WIZARD) == 0 ) {

			 ********** ORIGINAL - ENDING **********/

			/********** BLOODYSHADE CUSTOM - BEGINNING **********/ // Re-enable save-scumming.

			if ( ( dbg_noautosave == 0 & gdata(GDATA_WIZARD) == 0 & gdata(GDATA_FLAG_GAME_MODE) != GAMEMODE_PURGE ) | TweakData(TWEAK_GAMEPLAY_ENABLE_SAVE_SCUMMING, TWEAK_CATEGORY_GAMEPLAY) == 0 ) {

			/********** BLOODYSHADE CUSTOM - ENDING **********/

				gosub *game_save
				txtmore
				txtef COLOR_BLUE
				txt_saving
			}
		}
		if ( encounter == 2 ) {
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 10, 11
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_WANDER, encounterlv
			cdatan(CDATAN_NAME, rc) = lang("行商人の" + cdatan(CDATAN_NAME, rc), sncnv(cdatan(CDATAN_NAME, rc)) + "the wandering vendor")
			generatemoney rc
			repeat encounterlv / 2 + 1
				r1 = rc
				r2 = 1
				gosub *calcLevelUp
			loop
			evadd EVENT_SHOP_WANDER
			repeat 6 + rnd(6)
				flt
				initlv = encounterlv + rnd(10)
				characreate -1, CREATURE_ID_MERCENARY_WARRIOR + rnd(CREATURE_ID_MERCENARY_WIZARD - CREATURE_ID_MERCENARY_WARRIOR + 1), 14, 11
				cdata(CDATA_ROLE, rc) = ROLE_SHOP_GUARD
				cdata(CDATA_CHARACTER_TIER, rc) = CHARACTER_TIER_SUMMONED_NORMAL
				cdatan(CDATAN_NAME, rc) += " Lv" + cdata(CDATA_LEVEL, rc)
			loop
		}
		if ( encounter == 1 ) {
			kaisuu = rnd(9)
			if ( cdata(CDATA_LEVEL, CHARA_PLAYER) <= 5 ) {
				kaisuu = rnd(3)
			}
			repeat 2 + kaisuu
				flt calcobjlv(encounterlv), calcfixlv(FIX_QUALITY_GOOD)
				if ( gdata(GDATA_WEATHER) == WEATHER_ETHER ) {
					if ( range_tileRoad(gdata(GDATA_WORLD_TILE)) ) {
						if ( rnd(3) == 0 ) {
							fixlv = FIX_QUALITY_GODLY
						}
					}
				}
				if ( cnt < 4 ) {
					characreate -1, CREATURE_ID_BUG, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
				}
				else {
					characreate -1, CREATURE_ID_BUG, -3, 0
				}
				cdata(CDATA_AI_AGGRO, rc) = 30
			loop
		}
		encounter = 0
	}
	if ( gdata(GDATA_AREA) == AREA_VOID ) {
		gosub *map_randomDungeon
		if ( gdata(GDATA_VOID_BOSS) == 0 ) {
			gdata(GDATA_VOID_BOSS) = adata(ADATA_MIN_LEVEL, gdata(GDATA_AREA)) + 4
		}
		if ( gdata(GDATA_VOID_BOSS) <= gdata(GDATA_LEVEL) ) {
			evadd EVENT_VOID
		}
		else {
			adata(ADATA_BOSS, gdata(GDATA_AREA)) = 0
		}
	}
	if ( gdata(GDATA_AREA) == AREA_LESIMAS ) {
		map_tileset mdata(MDATA_TILESET)
		repeat 1
			if ( gdata(GDATA_LEVEL) == adata(ADATA_MAX_LEVEL, gdata(GDATA_AREA)) ) {
				map_initcustom "lesimas_1"
				mdata(MDATA_MODERATE_CROWD) = 0
				mdata(MDATA_CAN_SAVE) = 0
				mdata(MDATA_MUSIC) = MUSICLIST_MCLASTBOSS
				mdatan(MDATAN_NAME) = lang("レシマス最深層", "The Depth")
				if ( gdata(GDATA_FLAG_MAIN) < 170 ) {
					evadd EVENT_BOSS_LESIMAS
				}
				proc "lesimas1"
				x = 16
				y = 13
				cell_featset x, y, tile_upstairs, CELL_FEATURE_UPSTAIRS
				mdata(MDATA_UPSTAIRS_POS) = y * 1000 + x
				map_placeplayer
				proc "lesimas2"
				if ( gdata(GDATA_FLAG_MAIN) <= 170 ) {
					flt
					characreate -1, CREATURE_ID_ZEOME_THE_FALSE_PROPHET, 16, 6
				}
				if ( gdata(GDATA_FLAG_MAIN) >= 180 & gdata(GDATA_FLAG_MAIN) < 270 ) {
					if ( npcmemory(0, 23) == 0 ) {
						flt
						characreate -1, CREATURE_ID_ORPHE_THE_CHAOS_CHILD, 16, 6
					}
				}
				proc "lesimas3"
				break
			}
			gosub *map_randomDungeon
			break
		loop
		if ( gdata(GDATA_LEVEL) == 3 ) {
			characreate -1, CREATURE_ID_SLAN_THE_SHADOW_OF_PALMIA, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			cdata(CDATA_AI_CALM, rc) = 3
		}
		if ( gdata(GDATA_LEVEL) == 17 ) {
			characreate -1, CREATURE_ID_KARAM_THE_LONELY_WOLF_OF_KARUNE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			cdata(CDATA_AI_CALM, rc) = 3
		}
	}
	if ( gdata(GDATA_AREA) == AREA_REMIDO ) {
		map_tileset mdata(MDATA_TILESET)
		repeat 1
			if ( gdata(GDATA_LEVEL) == 114 ) {
				map_initcustom "chaos"
				mdata(MDATA_MODERATE_CROWD) = 0
				mdata(MDATA_CAN_SAVE) = 1
				mdata(MDATA_MUSIC) = MUSICLIST_MCLASTBOSS
				mdatan(MDATAN_NAME) = lang("15階大広間", "Hall")
				if ( gdata(GDATA_FLAG_MAIN) <= 269 & gdata(GDATA_FLAG_ORPHE_IN_REMIDO) == 0 ) {
					evadd EVENT_ORPHE
					gdata(GDATA_FLAG_MAIN) = 269
					gdata(GDATA_FLAG_ORPHE_IN_REMIDO) = 1
				}
				proc "Rehmido2"
				map_placeplayer
				break
			}
			if ( gdata(GDATA_LEVEL) == adata(ADATA_MAX_LEVEL, gdata(GDATA_AREA)) ) {
				map_initcustom "Rehmido_1"
				mdata(MDATA_MODERATE_CROWD) = 0
				mdata(MDATA_CAN_SAVE) = 0
				mdata(MDATA_MUSIC) = MUSICLIST_MCLASTBOSS
				mdatan(MDATAN_NAME) = lang("古の研究施設", "Ancient Research Facility")
				if ( gdata(GDATA_FLAG_MAIN) < 340 ) {
					evadd EVENT_MESHERA_PLANT
					flt
					characreate -1, CREATURE_ID_MESHERA_PLANT, 16, 5
					cdata(CDATA_AI_CALM, rc) = 3
					repeat 7
						flt
						characreate -1, CREATURE_ID_INFECTED_YERLES_SOLDIER, 16, 5
						cdata(CDATA_AI_CALM, rc) = 3
					loop
				}
				proc "Rehmido1"
				x = 16
				y = 13
				cell_featset x, y, tile_upstairs, CELL_FEATURE_UPSTAIRS
				mdata(MDATA_UPSTAIRS_POS) = y * 1000 + x
				map_placeplayer
				break
			}
			gosub *map_randomDungeon
			break
		loop
		if ( gdata(GDATA_LEVEL) == 106 & gdata(GDATA_FLAG_MAIN) < 266 ) {
			flt
			characreate -1, CREATURE_ID_METAL_ZILLA, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
			cdata(CDATA_TARGET, rc) = 0
			flt
			characreate -1, CREATURE_ID_METAL_ZILLA, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
			cdata(CDATA_TARGET, rc) = 0
			flt
			characreate -1, CREATURE_ID_YERLES_MORTAR, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
			cdata(CDATA_TARGET, rc) = 0
			flt
			characreate -1, CREATURE_ID_YERLES_MORTAR, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
			cdata(CDATA_TARGET, rc) = 0
			flt
			characreate -1, CREATURE_ID_XEREN_ELECTRIC_TANK, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
			cdata(CDATA_TARGET, rc) = 0
			flt
			characreate -1, CREATURE_ID_XEREN_ELECTRIC_TANK, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
			cdata(CDATA_TARGET, rc) = 0
			flt
			characreate -1, CREATURE_ID_XEREN_SATELLITE_UNIT, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
			cdata(CDATA_TARGET, rc) = 0
			flt
			characreate -1, CREATURE_ID_XEREN_SATELLITE_UNIT, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
			cdata(CDATA_TARGET, rc) = 0
			flt
			characreate -1, CREATURE_ID_BLADE_KING, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
			cdata(CDATA_TARGET, rc) = 0
			flt
			characreate -1, CREATURE_ID_BLADE_KING, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
			cdata(CDATA_TARGET, rc) = 0
			flt
			characreate -1, CREATURE_ID_MOBILE_COMMUNICATION_EQUIPMENT, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
			cdata(CDATA_TARGET, rc) = 0
		}
		if ( gdata(GDATA_LEVEL) == 122 ) {
			characreate -1, CREATURE_ID_MOBILE_COMMUNICATION_EQUIPMENT, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
			if ( stat != 0 ) {
				cdata(CDATA_RELATION, rc) = -1
				cdata(CDATA_RELATION_ORG, rc) = -1
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
				cdata(CDATA_AI_CALM, rc) = 3
			}
		}
	}
	if ( gdata(GDATA_AREA) == AREA_CHAOS_CRADLE ) {
		map_tileset mdata(MDATA_TILESET)
		repeat 1
			if ( gdata(GDATA_LEVEL) == 146 ) {
				map_initcustom "chaos2"
				mdata(MDATA_MODERATE_CROWD) = 3
				mdata(MDATA_CAN_SAVE) = 1
				mdata(MDATA_MUSIC) = MUSICLIST_MCLASTBOSS
				mdatan(MDATAN_NAME) = lang("眷属の間", "Hall of evil")
				if ( gdata(GDATA_FLAG_MAIN) < 390 ) {
					flt
					novoidlv = 1
					characreate -1, CREATURE_ID_AIKAGE_THE_SHINOBI_MASK, 13, 18
					flt
					novoidlv = 1
					characreate -1, CREATURE_ID_CHAOS_SHAMAN, 8, 13
					flt
					novoidlv = 1
					characreate -1, CREATURE_ID_CHAOS_PALADIN, 18, 13
					flt
					novoidlv = 1
					characreate -1, CREATURE_ID_CHAOS_HUNTER, 13, 8
				}
				proc "chaos2"
				map_placeplayer
				break
			}
			if ( gdata(GDATA_LEVEL) == 149 ) {
				map_initcustom "chaos3"
				mdata(MDATA_MODERATE_CROWD) = 3
				mdata(MDATA_CAN_SAVE) = 0
				mdata(MDATA_MUSIC) = MUSICLIST_MCBOSS5
				if ( gdata(GDATA_FLAG_MAIN) < 480 ) {
					flt
					novoidlv = 1
					characreate -1, CREATURE_ID_EGELVEIL_THE_BIND, 8, 10
					flt
					characreate -1, CREATURE_ID_BIND_DEVIL_WORM, 6, 6
					flt
					characreate -1, CREATURE_ID_BIND_DEVIL_WORM, 7, 6
					flt
					characreate -1, CREATURE_ID_BIND_DEVIL_WORM, 9, 6
					flt
					characreate -1, CREATURE_ID_BIND_DEVIL_WORM, 10, 6
					flt
					characreate -1, CREATURE_ID_BIND_DEVIL_WORM, 6, 10
					flt
					characreate -1, CREATURE_ID_BIND_DEVIL_WORM, 7, 10
					flt
					characreate -1, CREATURE_ID_BIND_DEVIL_WORM, 9, 10
					flt
					characreate -1, CREATURE_ID_BIND_DEVIL_WORM, 10, 10
					flt
					characreate -1, CREATURE_ID_BIND_DEVIL_WORM, 7, 15
					flt
					characreate -1, CREATURE_ID_BIND_DEVIL_WORM, 9, 15
					flt
					novoidlv = 1
					characreate -1, CREATURE_ID_MELUGAST_TYPEM, 6, 5
					cdata(CDATA_AI_CALM, rc) = 3
					cdata(CDATA_RELATION, rc) = 10
					cdata(CDATA_RELATION_ORG, rc) = 10
					cdata(CDATA_CONDITION_BIND, rc) = 20
					flt
					novoidlv = 1
					characreate -1, CREATURE_ID_MELUGAST_TYPEM, 7, 5
					cdata(CDATA_AI_CALM, rc) = 3
					cdata(CDATA_RELATION, rc) = 10
					cdata(CDATA_RELATION_ORG, rc) = 10
					cdata(CDATA_CONDITION_BIND, rc) = 20
					flt
					novoidlv = 1
					characreate -1, CREATURE_ID_MELUGAST_TYPEM, 9, 5
					cdata(CDATA_AI_CALM, rc) = 3
					cdata(CDATA_RELATION, rc) = 10
					cdata(CDATA_RELATION_ORG, rc) = 10
					cdata(CDATA_CONDITION_BIND, rc) = 20
					flt
					novoidlv = 1
					characreate -1, CREATURE_ID_MELUGAST_TYPEM, 10, 5
					cdata(CDATA_AI_CALM, rc) = 3
					cdata(CDATA_RELATION, rc) = 10
					cdata(CDATA_RELATION_ORG, rc) = 10
					cdata(CDATA_CONDITION_BIND, rc) = 20
				}
				proc "chaos3"
				map_placeplayer
				break
			}
			if ( gdata(GDATA_LEVEL) == 154 ) {
				map_initcustom "chaos4"
				mdata(MDATA_MODERATE_CROWD) = 0
				mdata(MDATA_CAN_SAVE) = 0
				mdatan(MDATAN_NAME) = lang("15階大広間", "Hall")
				if ( gdata(GDATA_FLAG_SUB_BELPHAT_THE_COSMIC_SWORD) < 1000 ) {
					if ( findally(CREATURE_ID_BELPHAT_THE_COSMIC_SWORD) == (-1) ) {
						flt
						characreate -1, CREATURE_ID_BELPHAT_THE_COSMIC_SWORD, 11, 12
						cbitmod CHARA_BIT_CRADLE_15TH, rc, 1
						cdata(CDATA_AI_CALM, rc) = 3
					}
				}
				flt
				characreate -1, CREATURE_ID_NORNE_THE_GUIDE, 9, 11
				cbitmod CHARA_BIT_CRADLE_15TH, rc, 1
				cdata(CDATA_AI_CALM, rc) = 3
				proc "chaos4"
				map_placeplayer
				break
			}
			if ( gdata(GDATA_LEVEL) == 159 ) {
				map_initcustom "chaos4"
				mdata(MDATA_MODERATE_CROWD) = 0
				mdata(MDATA_CAN_SAVE) = 1
				mdatan(MDATAN_NAME) = lang("20階大広間", "Hall")
				flt
				novoidlv = 1
				characreate -1, CREATURE_ID_MANYTIA_THE_ADVENTURE_MERCHANT, 10, 11
				cdata(CDATA_AI_CALM, rc) = 3
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
				proc "chaos4"
				cell_featset 10, 1, tile_downlocked, CELL_FEATURE_DOWNSTAIRS
				map_placeplayer
				break
			}
			if ( gdata(GDATA_LEVEL) == 164 ) {
				map_initcustom "chaos5"
				mdata(MDATA_MODERATE_CROWD) = 0
				mdata(MDATA_CAN_SAVE) = 1
				mdata(MDATA_MUSIC) = MUSICLIST_MCBOSS5
				mdatan(MDATAN_NAME) = lang("25階大広間", "Hall")
				flt
				novoidlv = 1
				characreate -1, CREATURE_ID_LANKATA_THE_LIGHTNING_OF_BLUE, 8, 12
				if ( gdata(GDATA_FLAG_MAIN_CHAOS_CRADLE_25) == 0 ) {
					if ( gdata(GDATA_FLAG_MAIN) < 590 ) {
						gdata(GDATA_FLAG_MAIN) = 585
						evadd EVENT_LANKATA
					}
				}
				if ( gdata(GDATA_FLAG_MAIN_CHAOS_CRADLE_25) == 0 ) {
					evadd EVENT_GUILD
				}
				proc "chaos5"
				map_placeplayer
				break
			}
			if ( gdata(GDATA_LEVEL) == 169 ) {
				map_initcustom "chaos6"
				mdata(MDATA_MODERATE_CROWD) = 0
				mdata(MDATA_CAN_SAVE) = 1
				mdata(MDATA_MUSIC) = MUSICLIST_MCLASTBOSS
				mdatan(MDATAN_NAME) = lang("30階大広間", "Hall")
				flt , 4
				novoidlv = 1
				initlv = 140
				characreate -1, CREATURE_ID_UNITDEAD_KING, 13, 10
				cbitmod CHARA_BIT_PRECIOUS, rc, 1
				flt , 4
				novoidlv = 1
				initlv = 140
				characreate -1, CREATURE_ID_UNITDEAD_QUEEN, 16, 10
				cbitmod CHARA_BIT_PRECIOUS, rc, 1
				flt , 4
				novoidlv = 1
				initlv = 140
				characreate -1, CREATURE_ID_UNITDEAD_JACK, 13, 13
				cbitmod CHARA_BIT_PRECIOUS, rc, 1
				flt , 4
				novoidlv = 1
				initlv = 140
				characreate -1, CREATURE_ID_UNITDEAD_JOKER, 16, 13
				cbitmod CHARA_BIT_PRECIOUS, rc, 1
				flt
				characreate -1, CREATURE_ID_AIKAGE_THE_SHINOBI_MASK, 13, 18
				cdata(CDATA_RELATION, rc) = 10
				cdata(CDATA_RELATION_ORG, rc) = 10
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
				flt
				characreate -1, CREATURE_ID_MERCENARY_WARRIOR, 11, 18
				cdata(CDATA_CHARACTER_TIER, rc) = CHARACTER_TIER_SUMMONED_NORMAL
				cdata(CDATA_RELATION, rc) = 10
				cdata(CDATA_RELATION_ORG, rc) = 10
				flt
				characreate -1, CREATURE_ID_MERCENARY_ARCHER, 9, 17
				cdata(CDATA_CHARACTER_TIER, rc) = CHARACTER_TIER_SUMMONED_NORMAL
				cdata(CDATA_RELATION, rc) = 10
				cdata(CDATA_RELATION_ORG, rc) = 10
				flt
				characreate -1, CREATURE_ID_MERCENARY_WIZARD, 15, 16
				cdata(CDATA_CHARACTER_TIER, rc) = CHARACTER_TIER_SUMMONED_NORMAL
				cdata(CDATA_RELATION, rc) = 10
				cdata(CDATA_RELATION_ORG, rc) = 10
				if ( gdata(GDATA_FLAG_MAIN) < 615 ) {
					gdata(GDATA_FLAG_MAIN) = 615
					evadd EVENT_AIKAGE
				}
                proc "chaos6"
				map_placeplayer
				break
			}
			if ( gdata(GDATA_LEVEL) == 178 ) {
				if ( gdata(GDATA_FLAG_MAIN) >= 990 ) {
					map_initcustom "chaos11"
					mdata(MDATA_MODERATE_CROWD) = 0
					mdata(MDATA_CAN_SAVE) = 1
					mdatan(0) = lang("大広間", "Hall")
					flt
					initlv = 200
					novoidlv = 1
					characreate -1, CREATURE_ID_BLACK_GAUNTLET_LEOLD, 10, 7
					cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
                    proc "chaos11"
					map_placeplayer
					break
				}
				else {
					map_initcustom "chaos7"
					mdata(MDATA_MODERATE_CROWD) = 0
					mdata(MDATA_CAN_SAVE) = 1
					mdatan(0) = lang("大広間", "Hall")
					flt
					initlv = 200
					novoidlv = 1
					characreate -1, CREATURE_ID_BLACK_GAUNTLET_LEOLD, 10, 7
					cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
                    proc "chaos7"
					map_placeplayer
					break
				}
			}
			if ( gdata(GDATA_LEVEL) == 179 ) {
				if ( gdata(GDATA_FLAG_MAIN) >= 990 ) {
					map_initcustom "chaos10"
					mdata(MDATA_MODERATE_CROWD) = 0
					mdata(MDATA_CAN_SAVE) = 0
					mdata(MDATA_MUSIC) = MUSICLIST_MCLASTBOSS3
					mdatan(0) = lang("神の間<復元>", "The Eternal Seal")
					proc "Chaos10"
					map_placeplayer
					tc = CHARA_PLAYER
					gosub *effect_elixer
					r1 = 0
					gosub *charaRefresh
					break
				}
				if ( gdata(GDATA_FLAG_MAIN) >= 845 & gdata(GDATA_FLAG_MAIN) < 990 ) {
					map_initcustom "chaos9"
					mdata(MDATA_MODERATE_CROWD) = 0
					mdata(MDATA_CAN_SAVE) = 0
					mdata(MDATA_MUSIC) = MUSICLIST_MCLASTBOSS3
					mdatan(0) = lang("神の間<崩壊>", "The Eternal Seal")
					proc "Chaos9"
					flt
					initlv = 200
					novoidlv = 1
					characreate -1, CREATURE_ID_BLACK_GAUNTLET_LEOLD, 10, 12
					cdata(CDATA_AI_CALM, rc) = 4
					cdata(CDATA_RELATION, rc) = RELATION_ALLY
					cdata(CDATA_RELATION_ORG, rc) = RELATION_ALLY
					cdata(CDATA_AI_AGGRO, rc) = 30
					flt
					initlv = 350
					novoidlv = 1
					characreate -1, CREATURE_ID_ORPHE_THE_CHAOS_DISCPLE, 10, 10
					cdata(CDATA_AI_CALM, rc) = 4
					cdata(CDATA_TARGET, rc) = 0
					cdata(CDATA_AI_AGGRO, rc) = 30
					flt
					initlv = 3500
					novoidlv = 1
					characreate -1, CREATURE_ID_THE_CHAOS_CHILD, 10, 8
					cdata(CDATA_AI_CALM, rc) = 3
					map_placeplayer
					break
				}
				if ( gdata(GDATA_FLAG_MAIN) < 845 ) {
					map_initcustom "chaos8"
					mdata(MDATA_MODERATE_CROWD) = 0
					mdata(MDATA_CAN_SAVE) = 0
					mdata(MDATA_MUSIC) = MUSICLIST_MCLASTBOSS
					mdatan(0) = lang("神の間", "The Eternal Seal")
					flt
					initlv = 200
					novoidlv = 1
					characreate -1, CREATURE_ID_BLACK_GAUNTLET_LEOLD, 10, 12
					cdata(CDATA_AI_CALM, rc) = 4
					cdata(CDATA_RELATION, rc) = RELATION_ALLY
					cdata(CDATA_RELATION_ORG, rc) = RELATION_ALLY
					cdata(CDATA_AI_AGGRO, rc) = 30
					if ( gdata(GDATA_FLAG_MAIN) < 715 ) {
						evadd EVENT_ENTHUMESIS
						flt
						novoidlv = 1
						characreate -1, CREATURE_ID_ENTHUMESIS, 10, 10
						cdata(CDATA_AI_CALM, rc) = 3
					}
					if ( gdata(GDATA_FLAG_MAIN) == 715 | gdata(GDATA_FLAG_MAIN) == 720 ) {
						evadd EVENT_ENTHUMESIS2
					}
					proc "Chaos8"
					map_placeplayer
					break
				}
			}
			gosub *map_randomDungeon
			break
		loop
		if ( gdata(GDATA_LEVEL) == 151 ) {
			flt
			novoidlv = 1
			characreate -1, CREATURE_ID_SPIPHA_THE_DRAGON_HUNTER, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
		}
		if ( gdata(GDATA_LEVEL) == 153 ) {
			flt
			novoidlv = 1
			characreate -1, CREATURE_ID_MARKA_THE_SILVER_BEAR, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
		}
		if ( gdata(GDATA_LEVEL) == 155 ) {
			flt
			novoidlv = 1
			characreate -1, CREATURE_ID_SAIMEF_THE_DOGGOD, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		}
		if ( gdata(GDATA_LEVEL) == 157 ) {
			if ( gdata(GDATA_FLAG_SUB_LAW_OF_NINJAS) >= 1000 ) {
				flt
				novoidlv = 1
				characreate -1, CREATURE_ID_FASHIONABLE_KUNOICHI, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
				flt
				initlv = 140
				novoidlv = 1
				characreate -1, CREATURE_ID_GETUEI_THE_NINJA_MASTER, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			}
		}
		if ( gdata(GDATA_LEVEL) == 161 ) {
			flt
			novoidlv = 1
			characreate -1, CREATURE_ID_MARY_THE_INSECT_MASTER, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
			flt
			novoidlv = 1
			characreate -1, CREATURE_ID_SHELL_KING_OF_VINDALE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			if ( gdata(GDATA_FLAG_SUB_THE_TRUE_APPEARANCE) >= 1003 ) {
				flt
				novoidlv = 1
				characreate -1, CREATURE_ID_ARIBEL_THE_WHITE_ARMS, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
			}
		}
		if ( gdata(GDATA_LEVEL) == 163 ) {
			flt
			novoidlv = 1
			characreate -1, CREATURE_ID_KUROYA_THE_LOOKING_UNIVERSE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
			if ( gdata(GDATA_FLAG_SUB_BELPHAT_THE_COSMIC_SWORD) >= 1000 ) {
				flt
				novoidlv = 1
				characreate -1, CREATURE_ID_BELPHAT_THE_COSMIC_SWORD, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
			}
		}
		if ( gdata(GDATA_LEVEL) == 166 ) {
			flt
			novoidlv = 1
			characreate -1, CREATURE_ID_NERES_THE_AMNESIAC, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
			flt
			novoidlv = 1
			characreate -1, CREATURE_ID_MELGET_THE_INFORMER, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
		}
		if ( gdata(GDATA_LEVEL) == 168 ) {
			flt
			novoidlv = 1
			characreate -1, CREATURE_ID_SHURAIDA_THE_EXPERT_MERC, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
			repeat 2
				flt
				initlv = 130
				characreate -1, CREATURE_ID_MERCENARY_WARRIOR, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
				cdata(CDATA_CHARACTER_TIER, rc) = CHARACTER_TIER_SUMMONED_NORMAL
				flt
				initlv = 130
				characreate -1, CREATURE_ID_MERCENARY_ARCHER, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
				cdata(CDATA_CHARACTER_TIER, rc) = CHARACTER_TIER_SUMMONED_NORMAL
				flt
				initlv = 130
				characreate -1, CREATURE_ID_MERCENARY_WIZARD, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
				cdata(CDATA_CHARACTER_TIER, rc) = CHARACTER_TIER_SUMMONED_NORMAL
			loop
		}
		if ( gdata(GDATA_LEVEL) == 171 ) {
			flt
			novoidlv = 1
			characreate -1, CREATURE_ID_ARMA_THE_TOUR_GUIDE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
		}
		if ( gdata(GDATA_LEVEL) == 173 ) {
			flt
			novoidlv = 1
			characreate -1, CREATURE_ID_ALFRED_THE_CANGNAN_WIND, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		}
		if ( gdata(GDATA_LEVEL) == 175 ) {
			flt , 6
			novoidlv = 1
			characreate -1, CREATURE_ID_AILE_THE_ATTENDANT, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
		}
		if ( gdata(GDATA_LEVEL) == 177 ) {
			flt
			initlv = 178
			characreate -1, CREATURE_ID_BETHEL_THE_WHITE_HAWK, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
		}
	}
	if ( gdata(GDATA_AREA) == AREA_TOWER_OF_FIRE ) {
		if ( gdata(GDATA_LEVEL) == adata(ADATA_MAX_LEVEL, gdata(GDATA_AREA)) ) {
			map_initcustom "firet1"
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCLASTBOSS
			map_placeplayer
		}
		else {
			gosub *map_randomDungeon
		}
	}
	if ( gdata(GDATA_AREA) == AREA_CRYPT_OF_THE_DAMNED ) {
		if ( gdata(GDATA_LEVEL) == adata(ADATA_MAX_LEVEL, gdata(GDATA_AREA)) ) {
			map_initcustom "undeadt1"
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCLASTBOSS
			map_placeplayer
		}
		else {
			gosub *map_randomDungeon
		}
	}
	if ( gdata(GDATA_AREA) == AREA_ANCIENT_CASTLE ) {
		if ( gdata(GDATA_LEVEL) == adata(ADATA_MAX_LEVEL, gdata(GDATA_AREA)) ) {
			map_initcustom "roguet1"
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCLASTBOSS
			map_placeplayer
		}
		else {
			gosub *map_randomDungeon
		}
	}
	if ( gdata(GDATA_AREA) == AREA_DRAGON_NEST ) {
		if ( gdata(GDATA_LEVEL) == adata(ADATA_MAX_LEVEL, gdata(GDATA_AREA)) ) {
			map_initcustom "d_1"
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCLASTBOSS
			map_placeplayer
		}
		else {
			gosub *map_randomDungeon
		}
	}
	if ( gdata(GDATA_AREA) == AREA_PUPPY_CAVE ) {
		gosub *map_randomDungeon
		if ( gdata(GDATA_LEVEL) == adata(ADATA_MAX_LEVEL, gdata(GDATA_AREA)) ) {
			if ( gdata(GDATA_FLAG_SUB_DOG) < 2 ) {
				if ( findally(CREATURE_ID_POPPY_THE_LITTLE_DOG) == (-1) ) {
					flt
					characreate -1, CREATURE_ID_POPPY_THE_LITTLE_DOG, -3, 0
					cbitmod CHARA_BIT_NO_TARGET, rc, 1
				}
			}
		}
	}
	if ( gdata(GDATA_AREA) == AREA_DOGGOD_FOREST ) {
		gosub *map_randomDungeon
		if ( gdata(GDATA_LEVEL) == adata(ADATA_MAX_LEVEL, gdata(GDATA_AREA)) ) {
			if ( gdata(GDATA_FLAG_SUB_DOGS_TAIL) == 1 ) {
				flt
				characreate -1, CREATURE_ID_ESTORK_THE_DOGGOD, -3, 0
			}
		}
	}
	if ( gdata(GDATA_AREA) == AREA_MINOTAUR_NEST ) {
		gosub *map_randomDungeon
		if ( gdata(GDATA_LEVEL) == adata(ADATA_MAX_LEVEL, gdata(GDATA_AREA)) ) {
			if ( gdata(GDATA_FLAG_SUB_MINOTAUR) < 2 ) {
				flt
				characreate -1, CREATURE_ID_UNGAGA_THE_MINOTAUR_KING, -3, 0
			}
		}
	}
	if ( gdata(GDATA_AREA) == AREA_YEEK_NEST ) {
		gosub *map_randomDungeon
		if ( gdata(GDATA_LEVEL) == adata(ADATA_MAX_LEVEL, gdata(GDATA_AREA)) ) {
			if ( gdata(GDATA_FLAG_SUB_YEEK) < 2 ) {
				flt
				characreate -1, CREATURE_ID_RODLOB_THE_YEEK_CHIEF, -3, 0
				tc = rc
				repeat 5
					flt
					characreate -1, CREATURE_ID_MASTER_YEEK, cdata(CDATA_X, tc), cdata(CDATA_Y, tc)
				loop
				repeat 10
					flt
					characreate -1, CREATURE_ID_YEEK_WARRIOR, cdata(CDATA_X, tc), cdata(CDATA_Y, tc)
					flt
					characreate -1, CREATURE_ID_KAMIKAZE_YEEK, cdata(CDATA_X, tc), cdata(CDATA_Y, tc)
				loop
			}
		}
	}
	if ( gdata(GDATA_AREA) == AREA_PYRAMID ) {
		if ( gdata(GDATA_LEVEL) == 20 ) {
			map_initcustom "sqPyramid"
			mdata(MDATA_MODERATE_CROWD) = 40
			mdata(MDATA_MUSIC) = MUSICLIST_MCPUTI
			map_placeplayer
			repeat mdata(MDATA_MODERATE_CROWD) + 1
				gosub *fltChara
				characreate -1, CREATURE_ID_BUG, -3, 0
			loop
		}
		if ( gdata(GDATA_LEVEL) == 21 ) {
			map_initcustom "sqPyramid2"
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCPUTI
			map_placeplayer
		}
	}
	if ( gdata(GDATA_AREA) == AREA_MOUNTAIN_PASS ) {
		gosub *map_randomDungeon
	}
	if ( gdata(GDATA_AREA) == AREA_MOUNTAIN_PASS_WINDY ) {
		gosub *map_randomDungeon
	}
	if ( gdata(GDATA_AREA) == AREA_SEBI ) {
		map_initcustom "sebi"
		mdata(MDATA_MODERATE_CROWD) = 25
		mdata(MDATA_MUSIC) = MUSICLIST_MCDUNGEON13
		map_placeplayer
		flt
		characreate -1, CREATURE_ID_VESTIGE, 3, 13
		cdata(CDATA_AI_CALM, rc) = 3
		cdata(CDATA_SEX, rc) = 0
		cdata(CDATA_TONE_SEX, rc) = 0
		cdata(CDATA_PIC, rc) = xy2pic(1, 33)
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_VESTIGE, 5, 11
		cdata(CDATA_AI_CALM, rc) = 3
		cdata(CDATA_SEX, rc) = 0
		cdata(CDATA_TONE_SEX, rc) = 0
		cdata(CDATA_PIC, rc) = xy2pic(1, 33)
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_VESTIGE, 3, 9
		cdata(CDATA_AI_CALM, rc) = 3
		cdata(CDATA_SEX, rc) = 0
		cdata(CDATA_TONE_SEX, rc) = 0
		cdata(CDATA_PIC, rc) = xy2pic(1, 33)
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_VESTIGE, 5, 9
		cdata(CDATA_AI_CALM, rc) = 3
		cdata(CDATA_SEX, rc) = 0
		cdata(CDATA_TONE_SEX, rc) = 0
		cdata(CDATA_PIC, rc) = xy2pic(1, 33)
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_VESTIGE, 7, 9
		cdata(CDATA_AI_CALM, rc) = 3
		cdata(CDATA_SEX, rc) = 0
		cdata(CDATA_TONE_SEX, rc) = 0
		cdata(CDATA_PIC, rc) = xy2pic(1, 33)
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_VESTIGE, 9, 9
		cdata(CDATA_AI_CALM, rc) = 3
		cdata(CDATA_SEX, rc) = 0
		cdata(CDATA_TONE_SEX, rc) = 0
		cdata(CDATA_PIC, rc) = xy2pic(1, 33)
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_VESTIGE, 11, 9
		cdata(CDATA_AI_CALM, rc) = 3
		cdata(CDATA_SEX, rc) = 0
		cdata(CDATA_TONE_SEX, rc) = 0
		cdata(CDATA_PIC, rc) = xy2pic(1, 33)
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_VESTIGE, 9, 11
		cdata(CDATA_AI_CALM, rc) = 3
		cdata(CDATA_SEX, rc) = 0
		cdata(CDATA_TONE_SEX, rc) = 0
		cdata(CDATA_PIC, rc) = xy2pic(1, 33)
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_VESTIGE, 11, 11
		cdata(CDATA_AI_CALM, rc) = 3
		cdata(CDATA_SEX, rc) = 0
		cdata(CDATA_TONE_SEX, rc) = 0
		cdata(CDATA_PIC, rc) = xy2pic(1, 33)
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_VESTIGE, 3, 11
		cdata(CDATA_AI_CALM, rc) = 3
		cdata(CDATA_SEX, rc) = 1
		cdata(CDATA_TONE_SEX, rc) = 1
		cdata(CDATA_PIC, rc) = xy2pic(2, 33)
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_VESTIGE, 5, 13
		cdata(CDATA_AI_CALM, rc) = 3
		cdata(CDATA_SEX, rc) = 1
		cdata(CDATA_TONE_SEX, rc) = 1
		cdata(CDATA_PIC, rc) = xy2pic(2, 33)
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_VESTIGE, 7, 13
		cdata(CDATA_AI_CALM, rc) = 3
		cdata(CDATA_SEX, rc) = 1
		cdata(CDATA_TONE_SEX, rc) = 1
		cdata(CDATA_PIC, rc) = xy2pic(2, 33)
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_VESTIGE, 7, 11
		cdata(CDATA_AI_CALM, rc) = 3
		cdata(CDATA_SEX, rc) = 1
		cdata(CDATA_TONE_SEX, rc) = 1
		cdata(CDATA_PIC, rc) = xy2pic(2, 33)
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		repeat 12
			dbid = CREATURE_ID_OBLIVION_BEAST
			gosub *fltChara
			characreate -1, dbid, -3, 0
		loop
	}
	if ( gdata(GDATA_AREA) == AREA_ZAILE ) {
		map_initcustom "zaile"
		mdata(MDATA_MODERATE_CROWD) = 0
		mdata(MDATA_MUSIC) = MUSICLIST_MCTOWN1
		map_placeplayer
		flt
		characreate -1, CREATURE_ID_LOYTER_THE_CRIMSON_OF_DOLE, 49, 60
		cdata(CDATA_AI_CALM, rc) = 3
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_BURT_THE_BURNING_ADVENTURER_SOUL, 95, 7
		cdata(CDATA_AI_CALM, rc) = 3
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_ALLEN_THE_RESEARCHER, 38, 31
		cdata(CDATA_AI_CALM, rc) = 3
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_BARTENDER2, 8, 31
		cdata(CDATA_AI_CALM, rc) = 3
		cdata(CDATA_ROLE, rc) = ROLE_SHOP_INN, 5
		flt
		characreate -1, CREATURE_ID_GUILD_BROKER, 25, 31
		cdata(CDATA_AI_CALM, rc) = 3
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_FORMER_BANK_CLERK, 63, 48
		cdata(CDATA_AI_CALM, rc) = 3
		cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
		flt
		characreate -1, CREATURE_ID_FORMER_BANK_CLERK, 69, 48
		cdata(CDATA_AI_CALM, rc) = 3
		cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
		flt
		characreate -1, CREATURE_ID_CLERK, 37, 50
		cdata(CDATA_AI_CALM, rc) = 3
		cdata(CDATA_SEX, rc) = 0
		cdata(CDATA_TONE, rc) = 0
		cdata(CDATA_TONE_SEX, rc) = 1
		cdata(CDATA_PIC, rc) = xy2pic(1, 32)
		cdata(CDATA_ROLE, rc) = ROLE_SHOP_INN, 5
		cdatan(CDATAN_NAME, rc) = lang("旅糧売り", "the traveler's food vendor")
		flt
		characreate -1, CREATURE_ID_CLERK, 17, 27
		cdata(CDATA_AI_CALM, rc) = 3
		cdata(CDATA_SEX, rc) = 1
		cdata(CDATA_TONE, rc) = 0
		cdata(CDATA_TONE_SEX, rc) = 2
		cdata(CDATA_PIC, rc) = xy2pic(4, 31)
		cdata(CDATA_PORTRAIT, rc) = 18
		cdata(CDATA_ROLE, rc) = ROLE_SHOP_OFFICE, 10
		cdatan(CDATAN_NAME, rc) = lang("装飾品売り", "the interior goods vendor")
		flt
		characreate -1, CREATURE_ID_CLERK, 18, 42
		cdata(CDATA_AI_CALM, rc) = 3
		cdata(CDATA_SEX, rc) = 0
		cdata(CDATA_TONE, rc) = 1
		cdata(CDATA_TONE_SEX, rc) = 1
		cdata(CDATA_PIC, rc) = xy2pic(1, 32)
		cdata(CDATA_ROLE, rc) = ROLE_SHOP_TRADE, 30
		cdatan(CDATAN_NAME, rc) = lang("交易商人", "the trader")
		flt
		characreate -1, CREATURE_ID_CLERK, 59, 35
		cdata(CDATA_AI_CALM, rc) = 3
		cdata(CDATA_SEX, rc) = 1
		cdata(CDATA_TONE, rc) = 2
		cdata(CDATA_TONE_SEX, rc) = 2
		cdata(CDATA_PIC, rc) = xy2pic(3, 31)
		cdata(CDATA_PORTRAIT, rc) = 6
		cdata(CDATA_ROLE, rc) = ROLE_SHOP_BAKERY, 5
		cdatan(CDATAN_NAME, rc) = lang("パン屋の店員", "the bakery clerk")
	}
	if ( gdata(GDATA_AREA) == AREA_WEST_RASKILIS ) {
		if ( gdata(GDATA_LEVEL) == 1 ) {
			map_initcustom "ras0"
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCVOYAGE
			map_placeplayer
			cell_featset 42, 27, tile_downstairs, CELL_FEATURE_DOWNSTAIRS, 2
			flt
			characreate -1, CREATURE_ID_JENNA_THE_MYTHICAL_MANIAC, 36, 24
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_MARY_THE_FLOWER_PICKER, 16, 11
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_CRAY_THE_CURIOUS_ADVENTURER, 23, 25
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_MANSON_THE_CAREFUL_ADVENTURER, 25, 25
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		}
		if ( gdata(GDATA_LEVEL) == 2 ) {
			map_initcustom "ras02"
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCSAD
			map_placeplayer
			cell_featset 83, 12, tile_downstairs, CELL_FEATURE_DOWNSTAIRS, 3
			cell_featset 1, 7, tile_upstairs, CELL_FEATURE_UPSTAIRS, 1
		}
		if ( gdata(GDATA_LEVEL) == 3 ) {
			map_initcustom "ras03"
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCSAD
			map_placeplayer
			cell_featset 25, 1, tile_downstairs, CELL_FEATURE_DOWNSTAIRS, 4
			cell_featset 1, 26, tile_upstairs, CELL_FEATURE_UPSTAIRS, 2
			flt
			characreate -1, CREATURE_ID_OBLIVION_RUDE_BEAST, 6, 32
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_OBLIVION_RUDE_BEAST, 32, 9
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_OBLIVION_RUDE_BEAST, 28, 11
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		}
		if ( gdata(GDATA_LEVEL) == 4 ) {
			map_initcustom "ras04"
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCSAD
			map_placeplayer
			cell_featset 45, 25, tile_downstairs, CELL_FEATURE_DOWNSTAIRS, 5
			cell_featset 26, 53, tile_upstairs, CELL_FEATURE_UPSTAIRS, 3
			flt
			characreate -1, CREATURE_ID_OBLIVION_RUDE_BEAST, 37, 10
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_OBLIVION_RUDE_BEAST, 29, 8
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_OBLIVION_RUDE_BEAST, 36, 33
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_STRANGE_OLD_PERSON, 14, 29
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_SILVER_CAT, 15, 30
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			cdatan(CDATAN_NAME, rc) = lang("白猫", "white cat")
		}
		if ( gdata(GDATA_LEVEL) == 5 ) {
			map_initcustom "ras05"
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCSAD
			map_placeplayer
			cell_featset 27, 31, tile_downstairs, CELL_FEATURE_DOWNSTAIRS, 6
			cell_featset 1, 43, tile_upstairs, CELL_FEATURE_UPSTAIRS, 4
			flt
			characreate -1, CREATURE_ID_BONYAC_THE_GENERAL_VENDOR, 15, 3
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_OBLIVION_RUDE_BEAST, 28, 46
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_OBLIVION_RUDE_BEAST, 21, 45
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		}
		if ( gdata(GDATA_LEVEL) == 6 ) {
			map_initcustom "ras06"
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCSAD
			map_placeplayer
			cell_featset 45, 20, tile_downstairs, CELL_FEATURE_DOWNSTAIRS, 7
			cell_featset 1, 19, tile_upstairs, CELL_FEATURE_UPSTAIRS, 5
		}
		if ( gdata(GDATA_LEVEL) == 7 ) {
			map_initcustom "ras07"
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCSAD
			map_placeplayer
			cell_featset 1, 1, tile_downstairs, CELL_FEATURE_DOWNSTAIRS, 8
			cell_featset 1, 27, tile_upstairs, CELL_FEATURE_UPSTAIRS, 6
		}
		if ( gdata(GDATA_LEVEL) == 8 ) {
			map_initcustom "ras08"
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCSAD
			map_placeplayer
			cell_featset 28, 1, tile_downstairs, CELL_FEATURE_DOWNSTAIRS, 9
			cell_featset 8, 24, tile_upstairs, CELL_FEATURE_UPSTAIRS, 7
		}
		if ( gdata(GDATA_LEVEL) == 9 ) {
			map_initcustom "ras09"
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCHOME0
			map_placeplayer
			flt
			characreate -1, CREATURE_ID_MIKRAANESIS, 8, 10
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			cell_featset 26, 23, tile_upstairs, CELL_FEATURE_UPSTAIRS, 8
		}
	}
	if ( gdata(GDATA_AREA) == AREA_SOUTH_RASKILIS ) {
		map_initcustom "ras_south"
		mdata(MDATA_MODERATE_CROWD) = 0
		mdata(MDATA_MUSIC) = MUSICLIST_MCTOWN1
		map_placeplayer
		flt
		characreate -1, CREATURE_ID_TONI_THE_ANGLER, 45, 25
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_NANCY_THE_WANDERLUST, 73, 11
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_CARTER_THE_SKILLED_FOOT, 64, 38
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_WOLF, 1, 9
		cdata(CDATA_AI_CALM, rc) = 2
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_WOLF, 4, 11
		cdata(CDATA_AI_CALM, rc) = 2
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_WOLF, 1, 15
		cdata(CDATA_AI_CALM, rc) = 2
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_WOLF, 4, 17
		cdata(CDATA_AI_CALM, rc) = 2
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_WOLF, 3, 29
		cdata(CDATA_AI_CALM, rc) = 2
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_WOLF, 7, 25
		cdata(CDATA_AI_CALM, rc) = 2
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_WOLF, 2, 37
		cdata(CDATA_AI_CALM, rc) = 2
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_WOLF, 9, 33
		cdata(CDATA_AI_CALM, rc) = 2
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_LION2, 12, 17
		cdata(CDATA_AI_CALM, rc) = 2
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_LION2, 17, 22
		cdata(CDATA_AI_CALM, rc) = 2
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_LION2, 18, 11
		cdata(CDATA_AI_CALM, rc) = 2
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_LION2, 25, 17
		cdata(CDATA_AI_CALM, rc) = 2
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_LION2, 29, 3
		cdata(CDATA_AI_CALM, rc) = 2
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_LION2, 23, 5
		cdata(CDATA_AI_CALM, rc) = 2
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_LION2, 4, 3
		cdata(CDATA_AI_CALM, rc) = 2
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_LION2, 11, 7
		cdata(CDATA_AI_CALM, rc) = 2
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_BOAR, 6, 49
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_BOAR, 12, 57
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_BOAR, 68, 7
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_BOAR, 50, 22
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_BOAR, 30, 30
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_BOAR, 69, 58
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_BOAR, 30, 64
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_RAT2, 72, 16
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_RAT2, 53, 56
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_RAT2, 48, 11
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_RAT2, 34, 55
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_RAT2, 32, 40
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_RAT2, 73, 41
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_RAT2, 63, 58
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_FOX, 64, 26
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_FOX, 10, 68
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_FOX, 24, 34
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_FOX, 46, 61
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_FOX, 48, 49
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_FOX, 64, 50
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_FOX, 50, 34
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_FOX, 21, 44
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_RABBIT, 76, 28
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_RABBIT, 56, 40
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_RABBIT, 7, 49
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_RABBIT, 75, 65
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_RABBIT, 40, 7
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_RABBIT, 56, 41
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_RABBIT, 38, 48
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_RABBIT, 75, 17
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
	}
	if ( gdata(GDATA_AREA) == AREA_WAR_GROUND ) {
		map_initcustom "shrine_2"
		mdata(MDATA_MODERATE_CROWD) = 20
		mdata(MDATA_MUSIC) = MUSICLIST_MCRUIN
		map_placeplayer
		repeat mdata(MDATA_MODERATE_CROWD) / 2
			gosub *fltChara
			characreate -1, CREATURE_ID_BUG, -3, 0
		loop
		flt
		characreate -1, CREATURE_ID_NERES_THE_AMNESIAC, 16, 15
		cdata(CDATA_AI_CALM, rc) = 3
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_RYUTYE_THE_AMNESIAC, 17, 15
		cdata(CDATA_AI_CALM, rc) = 3
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_MANYTIA_THE_ADVENTURE_MERCHANT, 18, 28
		cdata(CDATA_AI_CALM, rc) = 3
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
	}
	if ( gdata(GDATA_AREA) == AREA_ULM_LESON ) {
		if ( gdata(GDATA_LEVEL) == 1 ) {
			mdata(MDATA_MODERATE_CROWD) = 30
			map_initcustom "1iseki"
			map_placeplayer
			mdata(MDATA_WALL) = 0
			flt
			characreate -1, CREATURE_ID_SPIPHA_THE_DRAGON_HUNTER, 40, 14
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			if ( gdata(GDATA_FLAG_MAIN) >= 368 ) {
				flt
				characreate -1, CREATURE_ID_MELUGAST_TYPE0_THE_DIMENSION_DRIVER, 24, 4
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			}
			flt
			initlv = 150
			characreate -1, CREATURE_ID_BLACK_GAUNTLET_LEOLD, 28, 20
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			if ( gdata(STARTING_GDATA_FLAG + 319) >= 1 ) {
				flt
				characreate -1, CREATURE_ID_RIANNA_THE_DAYDREAMER, 30, 6
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
				flt
				characreate -1, CREATURE_ID_LOMIAS_THE_MESSENGER_FROM_VINDALE, 22, 28
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
				flt
				characreate -1, CREATURE_ID_LARNNEIRE_THE_LISTENER_OF_WIND, 32, 1
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			}
			if ( gdata(STARTING_GDATA_FLAG + 367) >= 1 ) {
				flt
				initlv = 200
				characreate -1, CREATURE_ID_BETHEL_THE_WHITE_HAWK, 32, 2
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
				cdata(CDATA_AI_CALM, rc) = 3
			}
			repeat 2
				flt
				characreate -1, CREATURE_ID_MERCENARY_WARRIOR, -3, 0
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
				flt
				characreate -1, CREATURE_ID_MERCENARY_ARCHER, -3, 0
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
				flt
				characreate -1, CREATURE_ID_MERCENARY_WIZARD, -3, 0
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			loop
			flt
			characreate -1, CREATURE_ID_HEALER, 10, 23
			cdata(CDATA_ROLE, rc) = ROLE_HEALER
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 34, 22
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_ARMOR, 12
			snarmor cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 42, 24
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_GENERAL, 10
			sngeneral cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_WIZARD, 14, 25
			cdata(CDATA_ROLE, rc) = ROLE_IDENTIFIER
			flt
			characreate -1, CREATURE_ID_BARTENDER, 51, 8
			cdata(CDATA_ROLE, rc) = ROLE_BARTENDER
			flt
			characreate -1, CREATURE_ID_TRAINER, 10, 26
			cdata(CDATA_ROLE, rc) = ROLE_TRAINER
			sntrainer cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_WIZARD, 35, 26
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_MAGIC, 21
			snmagic cdatan(CDATAN_NAME, rc)
			repeat 3
				flt
				characreate -1, CREATURE_ID_BLACK_CAT, -3, 0
				if ( stat != 0 ) {
					cdata(CDATA_AI_CALM, rc) = 2
					cdata(CDATA_RELATION, rc) = -1
					cdata(CDATA_RELATION_ORG, rc) = -1
					cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
				}
				flt
				characreate -1, CREATURE_ID_CUTE_FAIRY, -3, 0
				if ( stat != 0 ) {
					cdata(CDATA_AI_CALM, rc) = 2
					cdata(CDATA_RELATION, rc) = -1
					cdata(CDATA_RELATION_ORG, rc) = -1
					cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
				}
			loop
			repeat 15
				dbid = 0
				gosub *fltChara
				characreate -1, dbid, -3, 0
			loop
		}
	}
	if ( gdata(GDATA_AREA) == AREA_OL_DRAN ) {
		if ( gdata(GDATA_LEVEL) == 1 ) {
			mdata(MDATA_MODERATE_CROWD) = 100
			map_initcustom "9dran"
			map_placeplayer
			mdata(MDATA_WALL) = 0
			flt
			characreate -1, CREATURE_ID_KARAVIKA, 32, 48
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_URCAGUARY, 5, 10
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			if ( gdata(GDATA_FLAG_VISITED_OL_DRAN) == 10 ) {
				flt
				characreate -1, CREATURE_ID_MELGET_THE_INFORMER, 42, 12
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			}
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER_CROW, 26, 41
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_FOOD, 50
			snfood cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER_CROW, 15, 5
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_BAKERY, 50
			snbakery cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER_CROW, 16, 49
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_MAGIC, 50
			snmagic cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER_CROW, 26, 6
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_INN, 50
			sninn cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER_CROW, 16, 12
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_GENERAL, 50
			sngeneral cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER_CROW, 27, 53
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_BLACKMARKET, 50
			snblack cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER_CROW, 13, 24
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_GOODS, 50
			sngoods cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER_CROW, 26, 36
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_OFFICE, 50
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER_CROW, 26, 21
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_DEED, 50
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER_CROW, 15, 43
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_FISH, 50
			snfish cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER_CROW, 26, 17
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_MOUNTAIN1, 50
			cdatan(CDATAN_NAME, rc) = lang("染色店の" + cdatan(CDATAN_NAME, rc), sncnv(cdatan(CDATAN_NAME, rc)) + "the dye vendor")
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER_CROW, 39, 32
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_MOUNTAIN2, 50
			cdatan(CDATAN_NAME, rc) = lang("おみやげ屋の" + cdatan(CDATAN_NAME, rc), sncnv(cdatan(CDATAN_NAME, rc)) + "the souvenir vendor")
			flt
			characreate -1, CREATURE_ID_GOOSE, 13, 32
			cdata(CDATA_RELATION, rc) = 0
			cdata(CDATA_RELATION_ORG, rc) = 0
			cdata(CDATA_ROLE, rc) = ROLE_BARTENDER
			cdatan(CDATAN_NAME, rc) = lang("喫茶店の" + cdatan(CDATAN_NAME, rc), sncnv(cdatan(CDATAN_NAME, rc)) + "the barten")
			flt
			characreate -1, CREATURE_ID_GOOSE, 42, 10
			cdata(CDATA_RELATION, rc) = 0
			cdata(CDATA_RELATION_ORG, rc) = 0
			cdata(CDATA_ROLE, rc) = ROLE_ARENA_MASTER
			cdatan(CDATAN_NAME, rc) = lang("アリーナの" + cdatan(CDATAN_NAME, rc), sncnv(cdatan(CDATAN_NAME, rc)) + "of arena")
			flt
			characreate -1, CREATURE_ID_GOOSE, 42, 15
			cdata(CDATA_RELATION, rc) = 0
			cdata(CDATA_RELATION_ORG, rc) = 0
			cdata(CDATA_ROLE, rc) = ROLE_PET_ARENA_MASTER
			cdatan(CDATAN_NAME, rc) = lang("ペットアリーナの" + cdatan(CDATAN_NAME, rc), sncnv(cdatan(CDATAN_NAME, rc)) + "of pet arena")
			flt
			initlv = 125
			characreate -1, CREATURE_ID_GOLDEN_KNIGHT, 4, 3
			if ( stat != 0 ) {
				cdata(CDATA_AI_CALM, rc) = 2
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_GUARD
			}
			flt
			initlv = 125
			characreate -1, CREATURE_ID_GOLDEN_KNIGHT, 6, 5
			if ( stat != 0 ) {
				cdata(CDATA_AI_CALM, rc) = 2
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_GUARD
			}
			flt
			initlv = 125
			characreate -1, CREATURE_ID_GOLDEN_KNIGHT, 2, 18
			if ( stat != 0 ) {
				cdata(CDATA_AI_CALM, rc) = 2
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_GUARD
			}
			flt
			initlv = 125
			characreate -1, CREATURE_ID_GOLDEN_KNIGHT, 4, 20
			if ( stat != 0 ) {
				cdata(CDATA_AI_CALM, rc) = 2
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_GUARD
			}
			flt
			initlv = 125
			characreate -1, CREATURE_ID_GOLDEN_KNIGHT, 19, 39
			if ( stat != 0 ) {
				cdata(CDATA_AI_CALM, rc) = 2
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_GUARD
			}
			flt
			initlv = 125
			characreate -1, CREATURE_ID_GOLDEN_KNIGHT, 20, 19
			if ( stat != 0 ) {
				cdata(CDATA_AI_CALM, rc) = 2
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_GUARD
			}
			flt
			initlv = 125
			characreate -1, CREATURE_ID_GOLDEN_KNIGHT, 7, 10
			if ( stat != 0 ) {
				cdata(CDATA_AI_CALM, rc) = 2
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_GUARD
			}
			flt
			initlv = 125
			characreate -1, CREATURE_ID_GOLDEN_KNIGHT, 41, 23
			if ( stat != 0 ) {
				cdata(CDATA_AI_CALM, rc) = 2
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_GUARD
			}
			flt
			initlv = 125
			characreate -1, CREATURE_ID_GOLDEN_KNIGHT, 39, 56
			if ( stat != 0 ) {
				cdata(CDATA_AI_CALM, rc) = 2
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_GUARD
			}
			flt
			initlv = 125
			characreate -1, CREATURE_ID_GOLDEN_KNIGHT, 14, 37
			if ( stat != 0 ) {
				cdata(CDATA_AI_CALM, rc) = 2
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_GUARD
			}
			gosub *client_update
			flt
			characreate -1, CREATURE_ID_ARKHAI, 37, 40
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_RELATION, rc) = -1
			cdata(CDATA_RELATION_ORG, rc) = -1
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_ARKHAI, 37, 41
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_RELATION, rc) = -1
			cdata(CDATA_RELATION_ORG, rc) = -1
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_DOMINION, 37, 43
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_RELATION, rc) = -1
			cdata(CDATA_RELATION_ORG, rc) = -1
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_DOMINION, 37, 44
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_RELATION, rc) = -1
			cdata(CDATA_RELATION_ORG, rc) = -1
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_SERAPH, 37, 45
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_RELATION, rc) = -1
			cdata(CDATA_RELATION_ORG, rc) = -1
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_SERAPH, 37, 47
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_RELATION, rc) = -1
			cdata(CDATA_RELATION_ORG, rc) = -1
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_ARKHAI, 37, 49
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_RELATION, rc) = -1
			cdata(CDATA_RELATION_ORG, rc) = -1
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_ARKHAI, 37, 51
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_RELATION, rc) = -1
			cdata(CDATA_RELATION_ORG, rc) = -1
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_ARKHAI, 37, 52
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_RELATION, rc) = -1
			cdata(CDATA_RELATION_ORG, rc) = -1
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_DOMINION, 37, 53
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_RELATION, rc) = -1
			cdata(CDATA_RELATION_ORG, rc) = -1
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_DOMINION, 37, 55
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_RELATION, rc) = -1
			cdata(CDATA_RELATION_ORG, rc) = -1
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_SERAPH, 37, 56
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_RELATION, rc) = -1
			cdata(CDATA_RELATION_ORG, rc) = -1
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_SERAPH, 39, 39
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_RELATION, rc) = -1
			cdata(CDATA_RELATION_ORG, rc) = -1
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_ARKHAI, 39, 40
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_RELATION, rc) = -1
			cdata(CDATA_RELATION_ORG, rc) = -1
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_ARKHAI, 39, 41
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_RELATION, rc) = -1
			cdata(CDATA_RELATION_ORG, rc) = -1
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_DOMINION, 39, 44
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_RELATION, rc) = -1
			cdata(CDATA_RELATION_ORG, rc) = -1
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_DOMINION, 39, 45
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_RELATION, rc) = -1
			cdata(CDATA_RELATION_ORG, rc) = -1
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_SERAPH, 39, 47
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_RELATION, rc) = -1
			cdata(CDATA_RELATION_ORG, rc) = -1
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_SERAPH, 41, 48
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_RELATION, rc) = -1
			cdata(CDATA_RELATION_ORG, rc) = -1
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_SERAPH, 41, 49
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_RELATION, rc) = -1
			cdata(CDATA_RELATION_ORG, rc) = -1
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_ARKHAI, 41, 47
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_RELATION, rc) = -1
			cdata(CDATA_RELATION_ORG, rc) = -1
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_ARKHAI, 41, 48
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_RELATION, rc) = -1
			cdata(CDATA_RELATION_ORG, rc) = -1
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_ARKHAI, 41, 49
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_RELATION, rc) = -1
			cdata(CDATA_RELATION_ORG, rc) = -1
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_DOMINION, 41, 55
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_RELATION, rc) = -1
			cdata(CDATA_RELATION_ORG, rc) = -1
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_DOMINION, 41, 56
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_RELATION, rc) = -1
			cdata(CDATA_RELATION_ORG, rc) = -1
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_SERAPH, 41, 57
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_RELATION, rc) = -1
			cdata(CDATA_RELATION_ORG, rc) = -1
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_SERAPH, 8, 34
			cdata(CDATA_RELATION, rc) = -1
			cdata(CDATA_RELATION_ORG, rc) = -1
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			repeat 5
				flt
				characreate -1, CREATURE_ID_ARKHAI, -3, 0
				cdata(CDATA_RELATION, rc) = -1
				cdata(CDATA_RELATION_ORG, rc) = -1
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			loop
			flt
			characreate -1, CREATURE_ID_TRAVELER, 11, 3
			flt
			characreate -1, CREATURE_ID_TRAVELER, 20, 8
			flt
			characreate -1, CREATURE_ID_TRAVELER, 25, 5
			flt
			characreate -1, CREATURE_ID_TRAVELER, 30, 1
			flt
			characreate -1, CREATURE_ID_TRAVELER, 39, 3
			flt
			characreate -1, CREATURE_ID_TRAVELER, 42, 5
			flt
			characreate -1, CREATURE_ID_TRAVELER, 38, 15
			flt
			characreate -1, CREATURE_ID_TRAVELER, 43, 24
			flt
			characreate -1, CREATURE_ID_TRAVELER, 32, 28
			flt
			characreate -1, CREATURE_ID_TRAVELER, 40, 30
			flt
			characreate -1, CREATURE_ID_TRAVELER, 20, 23
			flt
			characreate -1, CREATURE_ID_TRAVELER, 10, 22
			flt
			characreate -1, CREATURE_ID_TRAVELER, 21, 17
			flt
			characreate -1, CREATURE_ID_TRAVELER, 14, 30
			flt
			characreate -1, CREATURE_ID_TRAVELER, 36, 35
			flt
			characreate -1, CREATURE_ID_TRAVELER, 2, 35
			flt
			characreate -1, CREATURE_ID_TRAVELER, 8, 38
			flt
			characreate -1, CREATURE_ID_TRAVELER, 12, 35
			flt
			characreate -1, CREATURE_ID_TRAVELER, 19, 35
			flt
			characreate -1, CREATURE_ID_TRAVELER, 9, 45
			flt
			characreate -1, CREATURE_ID_TRAVELER, 6, 54
			flt
			characreate -1, CREATURE_ID_TRAVELER, 16, 56
			flt
			characreate -1, CREATURE_ID_TRAVELER, 19, 51
			flt
			characreate -1, CREATURE_ID_TRAVELER, 21, 45
			flt
			characreate -1, CREATURE_ID_TRAVELER, 41, 40
			flt
			characreate -1, CREATURE_ID_TRAVELER, 42, 54
			flt
			characreate -1, CREATURE_ID_ARTIST, 39, 25
			flt
			characreate -1, CREATURE_ID_ARTIST, 35, 6
			flt
			characreate -1, CREATURE_ID_ARTIST, 28, 29
			flt
			characreate -1, CREATURE_ID_ARTIST, 24, 23
			flt
			characreate -1, CREATURE_ID_ARTIST, 11, 18
			flt
			characreate -1, CREATURE_ID_ARTIST, 20, 13
			flt
			characreate -1, CREATURE_ID_ARTIST, 5, 28
			flt
			characreate -1, CREATURE_ID_ARTIST, 11, 30
			flt
			characreate -1, CREATURE_ID_ARTIST, 42, 34
			flt
			characreate -1, CREATURE_ID_ARTIST, 6, 36
			flt
			characreate -1, CREATURE_ID_ARTIST, 19, 42
			flt
			characreate -1, CREATURE_ID_ARTIST, 9, 41
			flt
			characreate -1, CREATURE_ID_ARTIST, 21, 33
			flt
			characreate -1, CREATURE_ID_ARTIST, 25, 50
			flt
			characreate -1, CREATURE_ID_ARTIST, 41, 43
			flt
			characreate -1, CREATURE_ID_ARTIST, 37, 48
			flt
			characreate -1, CREATURE_ID_ARTIST, 39, 52
			flt
			characreate -1, CREATURE_ID_ARTIST, 41, 53
			repeat 5
				flt
				characreate -1, CREATURE_ID_TRAVELER, -3, 0
			loop
		}
		if ( gdata(GDATA_LEVEL) == 3 ) {
			mdata(MDATA_TILESET) = 0
			map_initcustom "sqKari"
			mdata(MDATA_FIELD) = 1
			mdata(MDATA_TYPE) = MAP_TYPE_VILLAGE
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCDUNGEON9
			mdata(MDATA_NO_RENEW) = 1
			mdatan(MDATAN_NAME) = lang("仮", "Underground passage")
			put_questtarget
			map_placeplayer
		}
		if ( gdata(GDATA_LEVEL) == 5 ) {
			map_initcustom "kara"
			mdata(MDATA_FIELD) = 1
			mdata(MDATA_TYPE) = MAP_TYPE_DUNGEON
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_CAN_SAVE) = 0
			mdata(MDATA_NO_RENEW) = 0
			mdatan(MDATAN_NAME) = lang("コンサート会場", "Concert hall")
			gdata(GDATA_LEVEL_START_ON) = 7
			mapstartx = 14
			mapstarty = 9
			map_placeplayer
		}
	}
	if ( gdata(GDATA_AREA) == AREA_BLIMP ) {
		if ( gdata(GDATA_LEVEL) == 1 ) {
			mdata(MDATA_MODERATE_CROWD) = 35
			map_initcustom "4mado"
			map_placeplayer
			mdata(MDATA_WALL) = 0
			flt
			characreate -1, CREATURE_ID_RAIZEL_THE_OLD_WIZARD, 7, 23
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_NEIN_THE_FLYING_WITCH, 18, 17
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_AILE_THE_ATTENDANT, 7, 3
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_FOOD, 100
			flt
			characreate -1, CREATURE_ID_CAPTAIN, 2, 5
			cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			flt
			characreate -1, CREATURE_ID_IMP, 9, 25
			if ( stat != 0 ) {
				cdata(CDATA_AI_CALM, rc) = 3
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_SHOP_MAGIC, 30
				cdatan(CDATAN_NAME, rc) = lang("魔法店の使い魔", "magic shop slave")
			}
			flt
			characreate -1, CREATURE_ID_IMP, 22, 20
			if ( stat != 0 ) {
				cdata(CDATA_AI_CALM, rc) = 3
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_SHOP_GENERAL, 20
				cdatan(CDATAN_NAME, rc) = lang("雑貨屋の使い魔", "general shop slave")
			}
			flt
			characreate -1, CREATURE_ID_IMP, 16, 28
			if ( stat != 0 ) {
				cdata(CDATA_AI_CALM, rc) = 2
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_SHOP_OFFICE, 20
				cdatan(CDATAN_NAME, rc) = lang("家具屋の使い魔", "furniture shop slave")
			}
			flt
			characreate -1, CREATURE_ID_BARTENDER, 36, 24
			cdata(CDATA_ROLE, rc) = ROLE_BARTENDER
			flt
			characreate -1, CREATURE_ID_TRAINER, 30, 1
			cdata(CDATA_ROLE, rc) = ROLE_TRAINER
			sntrainer cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_WIZARD, 35, 23
			cdata(CDATA_ROLE, rc) = ROLE_IDENTIFIER
			flt
			characreate -1, CREATURE_ID_INFORMER, 30, 23
			cdata(CDATA_ROLE, rc) = ROLE_INFORMER
			flt
			characreate -1, CREATURE_ID_HEALER, 6, 17
			cdata(CDATA_ROLE, rc) = ROLE_HEALER
			repeat 3
				flt
				characreate -1, CREATURE_ID_MAGE_GUILD_MEMBER, -3, 0
				if ( stat != 0 ) {
					cdata(CDATA_AI_CALM, rc) = 2
					cdata(CDATA_RELATION, rc) = 0
					cdata(CDATA_RELATION_ORG, rc) = 0
					cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
				}
				flt
				characreate -1, CREATURE_ID_HIGH_MAGICIAN, -3, 0
				if ( stat != 0 ) {
					cdata(CDATA_AI_CALM, rc) = 2
					cdata(CDATA_RELATION, rc) = 0
					cdata(CDATA_RELATION_ORG, rc) = 0
					cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
				}
			loop
			repeat 2
				flt
				characreate -1, CREATURE_ID_WAR_SPIRIT, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
				flt
				characreate -1, CREATURE_ID_MAGIC_SPIRIT, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
				flt
				characreate -1, CREATURE_ID_GUN_SPIRIT, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			loop
			repeat 4
				flt
				characreate -1, CREATURE_ID_SCHOLAR, -3, 0
			loop
		}
		if ( gdata(GDATA_LEVEL) == 3 ) {
			mdata(MDATA_TILESET) = 0
			map_initcustom "sqKari"
			mdata(MDATA_FIELD) = 1
			mdata(MDATA_TYPE) = MAP_TYPE_VILLAGE
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCDUNGEON9
			mdata(MDATA_NO_RENEW) = 1
			mdatan(MDATAN_NAME) = lang("仮", "Underground passage")
			put_questtarget
			map_placeplayer
		}
		if ( gdata(GDATA_LEVEL) == 100 ) {
			mdata(MDATA_TILESET) = 0
			map_initcustom "sqRed"
			mdata(MDATA_FIELD) = 2
			mdata(MDATA_TYPE) = MAP_TYPE_DUNGEON
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCBOSS5
			mdata(MDATA_NO_RENEW) = 1
			mdatan(MDATAN_NAME) = lang("王宮近隣", "Eulderna city")
			gdata(GDATA_LEVEL_START_ON) = 7
			mapstartx = 5
			mapstarty = 13
			flt
			initlv = 145
			characreate -1, CREATURE_ID_MAGIC_ARCHER, 41, 14
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_CHARACTER_TIER, rc) = CHARACTER_TIER_SUMMONED_NORMAL
			flt
			initlv = 145
			characreate -1, CREATURE_ID_MAGIC_ARCHER, 41, 15
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_CHARACTER_TIER, rc) = CHARACTER_TIER_SUMMONED_NORMAL
			flt
			initlv = 145
			characreate -1, CREATURE_ID_MAGIC_ARCHER, 41, 16
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_CHARACTER_TIER, rc) = CHARACTER_TIER_SUMMONED_NORMAL
			flt
			initlv = 145
			characreate -1, CREATURE_ID_MAGIC_ARCHER, 41, 17
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_CHARACTER_TIER, rc) = CHARACTER_TIER_SUMMONED_NORMAL
			flt
			initlv = 145
			characreate -1, CREATURE_ID_MAGIC_ARCHER, 41, 18
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_CHARACTER_TIER, rc) = CHARACTER_TIER_SUMMONED_NORMAL
			repeat 5
				flt
				initlv = 145
				characreate -1, CREATURE_ID_MAGIC_ARCHER, 32, 16
				cdata(CDATA_AI_CALM, rc) = 3
				cdata(CDATA_CHARACTER_TIER, rc) = CHARACTER_TIER_SUMMONED_NORMAL
			loop
			repeat 5
				flt
				initlv = 145
				characreate -1, CREATURE_ID_MAGIC_ARCHER, 33, 25
				cdata(CDATA_AI_CALM, rc) = 4
				cdata(CDATA_CHARACTER_TIER, rc) = CHARACTER_TIER_SUMMONED_NORMAL
			loop
			repeat 4
				flt
				initlv = 145
				characreate -1, CREATURE_ID_MAGIC_ARCHER, 16, 35
				cdata(CDATA_AI_CALM, rc) = 3
				cdata(CDATA_CHARACTER_TIER, rc) = CHARACTER_TIER_SUMMONED_NORMAL
			loop
			repeat 4
				flt
				initlv = 145
				characreate -1, CREATURE_ID_EULDERNA_SUMMONKNIGHT, 33, 31
				cdata(CDATA_AI_CALM, rc) = 3
				cdata(CDATA_CHARACTER_TIER, rc) = CHARACTER_TIER_SUMMONED_NORMAL
			loop
			repeat 4
				flt
				initlv = 145
				characreate -1, CREATURE_ID_EULDERNA_SUMMONKNIGHT, 28, 31
				cdata(CDATA_AI_CALM, rc) = 3
				cdata(CDATA_CHARACTER_TIER, rc) = CHARACTER_TIER_SUMMONED_NORMAL
			loop
			repeat 5
				flt
				initlv = 145
				characreate -1, CREATURE_ID_EULDERNA_SUMMONKNIGHT, 16, 12
				cdata(CDATA_AI_CALM, rc) = 3
				cdata(CDATA_CHARACTER_TIER, rc) = CHARACTER_TIER_SUMMONED_NORMAL
			loop
			put_questtarget
			flt
			characreate -1, CREATURE_ID_RAIZEL_THE_OLD_WIZARD, 11, 13
			cdata(CDATA_AI_CALM, rc) = 4
			cdata(CDATA_RELATION, rc) = 10
			cdata(CDATA_RELATION_ORG, rc) = 10
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			cdata(CDATA_AI_AGGRO, rc) = 30
			repeat 3
				flt
				characreate -1, CREATURE_ID_HIGH_MAGICIAN, 5, 30
				cdata(CDATA_AI_CALM, rc) = 4
				cdata(CDATA_RELATION, rc) = 10
				cdata(CDATA_RELATION_ORG, rc) = 10
			loop
			repeat 4
				flt
				characreate -1, CREATURE_ID_HIGH_MAGICIAN, 8, 7
				cdata(CDATA_AI_CALM, rc) = 4
				cdata(CDATA_RELATION, rc) = 10
				cdata(CDATA_RELATION_ORG, rc) = 10
				cdata(CDATA_AI_AGGRO, rc) = 30
			loop
			repeat 6
				flt
				characreate -1, CREATURE_ID_PALACE_MAGICIAN, 47, 16
				cdata(CDATA_AI_CALM, rc) = 4
				cdata(CDATA_RELATION, rc) = 10
				cdata(CDATA_RELATION_ORG, rc) = 10
			loop
			map_placeplayer
		}
	}
	if ( gdata(GDATA_AREA) == AREA_AMUR_CAGE ) {
		if ( gdata(GDATA_LEVEL) == 1 ) {
			mdata(MDATA_MODERATE_CROWD) = 60
			map_initcustom "3haka"
			map_placeplayer
			mdata(MDATA_WALL) = 0
			flt
			characreate -1, CREATURE_ID_AMURDAD, 27, 18
			if ( stat != 0 ) {
				cdata(CDATA_AI_CALM, rc) = 3
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			}
			flt
			characreate -1, CREATURE_ID_ETHER_GENERATOR, 8, 9
			cdata(CDATA_RELATION, rc) = 0
			cdata(CDATA_RELATION_ORG, rc) = 0
			cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			flt
			characreate -1, CREATURE_ID_CHAOS_UNICORN_KING_OF_CHAOS, 18, 13
			cdata(CDATA_RELATION, rc) = 0
			cdata(CDATA_RELATION_ORG, rc) = 0
			cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			flt
			characreate -1, CREATURE_ID_MESHERA_ALPHA_THE_DEFORMED_ANGEL, 14, 13
			cdata(CDATA_RELATION, rc) = 0
			cdata(CDATA_RELATION_ORG, rc) = 0
			cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			flt
			characreate -1, CREATURE_ID_MESHERA_PLANT, 14, 14
			cdata(CDATA_RELATION, rc) = 0
			cdata(CDATA_RELATION_ORG, rc) = 0
			cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			flt
			characreate -1, CREATURE_ID_EXOSSIL_THE_CHAOS_WING, 18, 9
			cdata(CDATA_RELATION, rc) = 0
			cdata(CDATA_RELATION_ORG, rc) = 0
			cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			flt
			characreate -1, CREATURE_ID_METAL_VESDA_THE_FIRE_MACHINE, 22, 9
			cdata(CDATA_RELATION, rc) = 0
			cdata(CDATA_RELATION_ORG, rc) = 0
			cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			flt
			characreate -1, CREATURE_ID_ANUBIS_THE_MASTER_OF_DEATH, 14, 9
			cdata(CDATA_RELATION, rc) = 0
			cdata(CDATA_RELATION_ORG, rc) = 0
			cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			flt
			characreate -1, CREATURE_ID_ZEOME_THE_FALSE_PROPHET, 42, 9
			cdata(CDATA_RELATION, rc) = 0
			cdata(CDATA_RELATION_ORG, rc) = 0
			cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			flt
			characreate -1, CREATURE_ID_SLAN_THE_SHADOW_OF_PALMIA, 37, 13
			cdata(CDATA_RELATION, rc) = 0
			cdata(CDATA_RELATION_ORG, rc) = 0
			cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			flt
			characreate -1, CREATURE_ID_KARAM_THE_LONELY_WOLF_OF_KARUNE, 37, 14
			cdata(CDATA_RELATION, rc) = 0
			cdata(CDATA_RELATION_ORG, rc) = 0
			cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			flt
			characreate -1, CREATURE_ID_ISSIZZLE_THE_DARK_ABOMINATION, 42, 13
			cdata(CDATA_RELATION, rc) = 0
			cdata(CDATA_RELATION_ORG, rc) = 0
			cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			flt
			characreate -1, CREATURE_ID_WYNAN_THE_LORD_OF_THE_ANCIENT_CASTLE, 33, 9
			cdata(CDATA_RELATION, rc) = 0
			cdata(CDATA_RELATION_ORG, rc) = 0
			cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			flt
			characreate -1, CREATURE_ID_XABI_THE_KING_OF_PALMIA, 36, 13
			cdata(CDATA_RELATION, rc) = 0
			cdata(CDATA_RELATION_ORG, rc) = 0
			cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			flt
			characreate -1, CREATURE_ID_QURUIZA_THE_RED_EYED_DECEIVER, 45, 9
			cdata(CDATA_RELATION, rc) = 0
			cdata(CDATA_RELATION_ORG, rc) = 0
			cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			flt
			characreate -1, CREATURE_ID_CORGON_THE_STEEL_DRAGON, 44, 9
			cdata(CDATA_RELATION, rc) = 0
			cdata(CDATA_RELATION_ORG, rc) = 0
			cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			if ( gdata(STARTING_GDATA_FLAG + 371) == 1001 ) {
				flt
				characreate -1, CREATURE_ID_BEILGENA_THE_ARTIFICIAL_DRAGON, 9, 8
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			}
			if ( gdata(STARTING_GDATA_FLAG + 370) == 1001 ) {
				flt
				characreate -1, CREATURE_ID_GRAVEED_THE_GRAVITY_VALLEY, 10, 9
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			}
			if ( gdata(STARTING_GDATA_FLAG + 369) == 1001 ) {
				flt
				characreate -1, CREATURE_ID_DOROTHIA_STANDING_IN_THE_WETLAND, 12, 9
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			}
			if ( gdata(GDATA_FLAG_SUB_MINOTAUR) == 1001 ) {
				flt
				characreate -1, CREATURE_ID_UNGAGA_THE_MINOTAUR_KING, 39, 25
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			}
			if ( gdata(GDATA_FLAG_SUB_CAT) == 1001 ) {
				flt
				characreate -1, CREATURE_ID_CACY_THE_CAT_TAMER, 35, 25
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			}
			if ( gdata(GDATA_FLAG_SUB_PYRAMID) == 1001 ) {
				flt
				characreate -1, CREATURE_ID_TUWEN_THE_MASTER_OF_THE_PYRAMID, 44, 23
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			}
			if ( gdata(GDATA_FLAG_SUB_YEEK) == 1001 ) {
				flt
				characreate -1, CREATURE_ID_RODLOB_THE_YEEK_CHIEF, 42, 25
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			}
			if ( gdata(GDATA_FLAG_SUB_H_SISTER) == 1001 ) {
				flt
				characreate -1, CREATURE_ID_H_SISTER, 39, 28
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			}
			if ( gdata(GDATA_FLAG_SUB_PIRATE_HUNTING) == 1001 ) {
				flt
				characreate -1, CREATURE_ID_EBARTH_THE_PIRATE_BOSS, 33, 29
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			}
			if ( gdata(GDATA_FLAG_SUB_DOGS_TAIL) == 1001 ) {
				flt
				characreate -1, CREATURE_ID_ESTORK_THE_DOGGOD, 37, 25
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			}
			if ( gdata(GDATA_FLAG_SUB_MANSION_FOR_SALE) == 1005 ) {
				flt
				characreate -1, CREATURE_ID_KING_COCKROACH, 41, 28
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			}
			if ( gdata(GDATA_FLAG_SUB_MOTHER) == 1006 ) {
				flt
				characreate -1, CREATURE_ID_PAELS_MOM_LILY, 45, 29
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			}
			if ( gdata(GDATA_FLAG_SUB_WHEN_THE_FLAME_BURNS_OUT) == 1001 ) {
				flt
				characreate -1, CREATURE_ID_VANSESDA_THE_ANCIENT_FIRE, 16, 23
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			}
			if ( gdata(GDATA_FLAG_SUB_REGULUS_EULDERNA) == 1001 ) {
				flt
				characreate -1, CREATURE_ID_INQTUAL_THE_REVENGE, 10, 25
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
				flt
				characreate -1, CREATURE_ID_PALACE_MAGICIAN, -3, 0
				if ( stat != 0 ) {
					cdata(CDATA_AI_CALM, rc) = 2
					cdata(CDATA_RELATION, rc) = -1
					cdata(CDATA_RELATION_ORG, rc) = -1
					cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
				}
			}
			if ( gdata(GDATA_FLAG_SUB_REGULUS_MAYROON) == 1001 ) {
				flt
				characreate -1, CREATURE_ID_LAZASYE_THE_DESTROY, 13, 25
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			}
			if ( gdata(GDATA_FLAG_SUB_REGULUS_ZANAN) == 1005 ) {
				flt
				characreate -1, CREATURE_ID_TESTER, 19, 25
				cdata(CDATA_RELATION, rc) = -1
				cdata(CDATA_RELATION_ORG, rc) = -1
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			}
			if ( gdata(GDATA_FLAG_SUB_REGULUS_KIKKASU) == 1001 ) {
				flt
				characreate -1, CREATURE_ID_ROATONIS_THE_INFECTIONS, 16, 25
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			}
			if ( gdata(GDATA_FLAG_SUB_THE_RESULT_OF_REVENGE) == 1004 ) {
				flt
				characreate -1, CREATURE_ID_CONDUCTOR_KOALA, 10, 29
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			}
			if ( gdata(STARTING_GDATA_FLAG + 275) >= 5 ) {
				flt
				characreate -1, CREATURE_ID_NINE_HEAD_DRAGON_THE_ABYSS, 13, 29
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			}
			if ( gdata(GDATA_FLAG_VISITED_MELUGAS) >= 3 ) {
				flt
				characreate -1, CREATURE_ID_EGELVEIL_THE_BIND, 10, 29
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			}
			if ( gdata(GDATA_FLAG_MAIN_CHAOS_CRADLE_34) == 2 ) {
				flt
				characreate -1, CREATURE_ID_ALFRED_THE_CANGNAN_WIND, 19, 28
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			}
			if ( gdata(GDATA_FLAG_MAIN_CHAOS_CRADLE_25) >= 1001 ) {
				flt
				characreate -1, CREATURE_ID_LANKATA_THE_LIGHTNING_OF_BLUE, 19, 29
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
				flt
				characreate -1, CREATURE_ID_ZANAN_ENHANCED_SOLDIER, -3, 0
				if ( stat != 0 ) {
					cdata(CDATA_AI_CALM, rc) = 2
					cdata(CDATA_RELATION, rc) = -1
					cdata(CDATA_RELATION_ORG, rc) = -1
					cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
				}
				flt
				characreate -1, CREATURE_ID_LOTHRIAN_AGENT, -3, 0
				if ( stat != 0 ) {
					cdata(CDATA_AI_CALM, rc) = 2
					cdata(CDATA_RELATION, rc) = -1
					cdata(CDATA_RELATION_ORG, rc) = -1
					cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
				}
			}
			if ( gdata(GDATA_FLAG_MAIN_CHAOS_CRADLE_25) >= 101 ) {
				flt
				characreate -1, CREATURE_ID_ZANAN_ENHANCED_SOLDIER, -3, 0
				if ( stat != 0 ) {
					cdata(CDATA_AI_CALM, rc) = 2
					cdata(CDATA_RELATION, rc) = -1
					cdata(CDATA_RELATION_ORG, rc) = -1
					cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
				}
				flt
				characreate -1, CREATURE_ID_LOTHRIAN_AGENT, -3, 0
				if ( stat != 0 ) {
					cdata(CDATA_AI_CALM, rc) = 2
					cdata(CDATA_RELATION, rc) = -1
					cdata(CDATA_RELATION_ORG, rc) = -1
					cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
				}
			}
			if ( gdata(STARTING_GDATA_FLAG + 360) >= 101 ) {
				flt
				characreate -1, CREATURE_ID_ENTHUMESIS, 27, 16
				if ( stat != 0 ) {
					cdata(CDATA_AI_CALM, rc) = 3
					cdata(CDATA_RELATION, rc) = -1
					cdata(CDATA_RELATION_ORG, rc) = -1
					cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
				}
			}
			if ( gdata(STARTING_GDATA_FLAG + 361) >= 60 ) {
				flt
				characreate -1, CREATURE_ID_ALSAPIA_THE_MURDERER_MASK, 36, 9
				if ( stat != 0 ) {
					cdata(CDATA_AI_CALM, rc) = 3
					cdata(CDATA_RELATION, rc) = 0
					cdata(CDATA_RELATION_ORG, rc) = 0
					cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
				}
				flt
				characreate -1, CREATURE_ID_GILPHEM_THE_MAGIC_STEEL, 39, 9
				if ( stat != 0 ) {
					cdata(CDATA_AI_CALM, rc) = 3
					cdata(CDATA_RELATION, rc) = 0
					cdata(CDATA_RELATION_ORG, rc) = 0
					cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
				}
			}
			repeat 8
				flt
				characreate -1, CREATURE_ID_INFECTED_YERLES_SOLDIER, -3, 0
				if ( stat != 0 ) {
					cdata(CDATA_AI_CALM, rc) = 2
					cdata(CDATA_RELATION, rc) = -1
					cdata(CDATA_RELATION_ORG, rc) = -1
					cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
				}
				flt
				characreate -1, CREATURE_ID_WISP, -3, 0
				if ( stat != 0 ) {
					cdata(CDATA_AI_CALM, rc) = 2
					cdata(CDATA_RELATION, rc) = -1
					cdata(CDATA_RELATION_ORG, rc) = -1
				}
			loop
		}
		if ( gdata(GDATA_LEVEL) == 2 ) {
			mdata(MDATA_TILESET) = MAP_TILESET_DUNGEON
			map_initcustom "3haka2"
			map_placeplayer
			mdata(MDATA_WALL) = 0
			if ( gdata(GDATA_FLAG_AMUR_CAGE_SIVA) == 1 ) {
				flt
				characreate -1, CREATURE_ID_SIVA_THE_DESTRUCTION, 43, 20
				cdata(CDATA_RELATION, rc) = RELATION_NEUTRAL
				cdata(CDATA_RELATION_ORG, rc) = RELATION_NEUTRAL
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			}
			if ( gdata(GDATA_FLAG_AMUR_CAGE_YERLESWOOD) == 1 ) {
				flt
				characreate -1, CREATURE_ID_YERLESWOOD_THE_SAVAGE_MACHINE, 45, 20
				cdata(CDATA_RELATION, rc) = RELATION_NEUTRAL
				cdata(CDATA_RELATION_ORG, rc) = RELATION_NEUTRAL
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			}
			if ( gdata(GDATA_FLAG_AMUR_CAGE_ULZASSIL) == 1 ) {
				flt
				characreate -1, CREATURE_ID_ULZASSIL_THE_DEAD_EMPEROR, 47, 20
				cdata(CDATA_RELATION, rc) = RELATION_NEUTRAL
				cdata(CDATA_RELATION_ORG, rc) = RELATION_NEUTRAL
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			}
			if ( gdata(GDATA_FLAG_AMUR_CAGE_FRISIA) == 1 ) {
				flt
				characreate -1, CREATURE_ID_FRISIA_THE_CAT_QUEEN, 43, 17
				cdata(CDATA_RELATION, rc) = RELATION_NEUTRAL
				cdata(CDATA_RELATION_ORG, rc) = RELATION_NEUTRAL
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			}
			if ( gdata(GDATA_FLAG_AMUR_CAGE_UTIMA) == 1 ) {
				flt
				characreate -1, CREATURE_ID_UTIMA_THE_DESTROYER_OF_XEREN, 45, 17
				cdata(CDATA_RELATION, rc) = RELATION_NEUTRAL
				cdata(CDATA_RELATION_ORG, rc) = RELATION_NEUTRAL
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			}
			if ( gdata(GDATA_FLAG_AMUR_CAGE_AZZRSSIL) == 1 ) {
				flt
				characreate -1, CREATURE_ID_AZZRSSIL_THE_IMPURE, 47, 17
				cdata(CDATA_RELATION, rc) = RELATION_NEUTRAL
				cdata(CDATA_RELATION_ORG, rc) = RELATION_NEUTRAL
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			}
			if ( gdata(GDATA_FLAG_AMUR_CAGE_SUNRISE) == 1 ) {
				flt
				characreate -1, CREATURE_ID_SUNRISE_THE_ARCHIPELAGO_DRAGON, 21, 6
				cdata(CDATA_RELATION, rc) = RELATION_NEUTRAL
				cdata(CDATA_RELATION_ORG, rc) = RELATION_NEUTRAL
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			}
			if ( gdata(GDATA_FLAG_AMUR_CAGE_PASCAL) == 1 ) {
				flt
				characreate -1, CREATURE_ID_PASCAL, 23, 6
				cdata(CDATA_RELATION, rc) = RELATION_NEUTRAL
				cdata(CDATA_RELATION_ORG, rc) = RELATION_NEUTRAL
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			}
			if ( gdata(GDATA_FLAG_AMUR_CAGE_WING_SNAIL) == 1 ) {
				flt
				characreate -1, CREATURE_ID_WING_SNAIL, 23, 6
				cdata(CDATA_RELATION, rc) = RELATION_NEUTRAL
				cdata(CDATA_RELATION_ORG, rc) = RELATION_NEUTRAL
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			}
			if ( gdata(GDATA_FLAG_AMUR_CAGE_MURDER_KNIGHT) == 1 ) {
				flt
				characreate -1, CREATURE_ID_MURDER_KNIGHT, 27, 6
				cdata(CDATA_RELATION, rc) = RELATION_NEUTRAL
				cdata(CDATA_RELATION_ORG, rc) = RELATION_NEUTRAL
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			}
			if ( gdata(GDATA_FLAG_AMUR_CAGE_LITYOU) == 1 ) {
				flt
				characreate -1, CREATURE_ID_LITYOU, 29, 6
				cdata(CDATA_RELATION, rc) = RELATION_NEUTRAL
				cdata(CDATA_RELATION_ORG, rc) = RELATION_NEUTRAL
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			}
			if ( gdata(GDATA_FLAG_AMUR_CAGE_MAD_SCIENTIST) == 1 ) {
				flt
				characreate -1, CREATURE_ID_MAD_SCIENTIST, 31, 6
				cdata(CDATA_RELATION, rc) = RELATION_NEUTRAL
				cdata(CDATA_RELATION_ORG, rc) = RELATION_NEUTRAL
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			}
			if ( gdata(GDATA_FLAG_AMUR_CAGE_ISCA) == 1 ) {
				flt
				characreate -1, CREATURE_ID_ISCA_THE_FALLEN_ANGEL, 33, 6
				cdata(CDATA_RELATION, rc) = RELATION_NEUTRAL
				cdata(CDATA_RELATION_ORG, rc) = RELATION_NEUTRAL
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			}
			if ( gdata(GDATA_FLAG_AMUR_CAGE_DUNGEON_CLEANER) == 1 ) {
				flt
				characreate -1, CREATURE_ID_DUNGEON_CLEANER, 21, 10
				cdata(CDATA_RELATION, rc) = RELATION_NEUTRAL
				cdata(CDATA_RELATION_ORG, rc) = RELATION_NEUTRAL
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			}
			if ( gdata(GDATA_FLAG_AMUR_CAGE_GODA) == 1 ) {
				flt
				characreate -1, CREATURE_ID_GODA_THE_CAPTAIN_OF_ORC, 23, 10
				cdata(CDATA_RELATION, rc) = RELATION_NEUTRAL
				cdata(CDATA_RELATION_ORG, rc) = RELATION_NEUTRAL
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			}
		}
		if ( gdata(GDATA_LEVEL) == 10 ) {
			map_initcustom "meiq101"
			mdata(MDATA_FIELD) = MAP_FIELD_INDOOR
			mdata(MDATA_TYPE) = MAP_TYPE_VILLAGE
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCDUNGEON14
			mdata(MDATA_CAN_SAVE) = 0
			mdata(MDATA_NO_RENEW) = 0
			mdatan(0) = lang("冥宮入口", "LabyrinDeath 1F")
			gdata(GDATA_LEVEL_START_ON) = 7
			mapstartx = 17
			mapstarty = 3
			map_placeplayer
		}
		if ( gdata(GDATA_LEVEL) == 11 ) {
			map_initcustom "meiq111"
			mdata(MDATA_FIELD) = MAP_FIELD_INDOOR
			mdata(MDATA_TYPE) = MAP_TYPE_VILLAGE
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCDUNGEON14
			mdata(MDATA_CAN_SAVE) = 0
			mdata(MDATA_NO_RENEW) = 0
			mdatan(0) = lang("冥宮入口", "LabyrinDeath 1F")
			gdata(GDATA_LEVEL_START_ON) = 7
			mapstartx = 17
			mapstarty = 24
			map_placeplayer
			if ( soulstage < 5 ) {
				flt , 6
				novoidlv = 1
				characreate -1, CREATURE_ID_HELLABYRINTH_RULER, 17, 2
				cdata(CDATA_AI_CALM, rc) = 3
				cdata(CDATA_PIC, rc) = xy2pic(3, 31)
				cdata(CDATA_RELATION, rc) = RELATION_NEUTRAL
				cdata(CDATA_RELATION_ORG, rc) = RELATION_NEUTRAL
				cdata(CDATA_SEX, rc) = 1
				cdatan(CDATAN_NAME, rc) = lang("？？？？", "????")
			}
			evadd EVENT_AMURDEAD_SUB_FIREWORKS
		}
		if ( gdata(GDATA_LEVEL) == 12 ) {
			map_initcustom "meiq121"
			mdata(MDATA_FIELD) = MAP_FIELD_INDOOR
			mdata(MDATA_TYPE) = MAP_TYPE_VILLAGE
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCDUNGEON14
			mdata(MDATA_CAN_SAVE) = 0
			mdata(MDATA_NO_RENEW) = 0
			mdatan(0) = lang("冥宮入口", "LabyrinDeath 1F")
			gdata(GDATA_LEVEL_START_ON) = 7
			mapstartx = 17
			mapstarty = 24
			map_placeplayer
			if ( soulstage < 5 ) {
				flt , 6
				novoidlv = 1
				characreate -1, CREATURE_ID_HELLABYRINTH_RULER, 17, 2
				cdata(CDATA_AI_CALM, rc) = 3
				cdata(CDATA_PIC, rc) = xy2pic(3, 31)
				cdata(CDATA_RELATION, rc) = RELATION_NEUTRAL
				cdata(CDATA_RELATION_ORG, rc) = RELATION_NEUTRAL
				cdata(CDATA_SEX, rc) = 1
				cdatan(CDATAN_NAME, rc) = lang("？？？？", "????")
			}
			evadd EVENT_AMURDEAD_SUB_FIREWORKS
		}
		if ( gdata(GDATA_LEVEL) == 16 ) {
			map_initcustom "meiq161"
			mdata(MDATA_FIELD) = MAP_FIELD_INDOOR
			mdata(MDATA_TYPE) = MAP_TYPE_VILLAGE
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCDUNGEON14
			mdata(MDATA_CAN_SAVE) = 0
			mdata(MDATA_NO_RENEW) = 0
			mdatan(0) = lang("悪鬼の掌", "Area of Curse")
			gdata(GDATA_LEVEL_START_ON) = 7
			mapstartx = 17
			mapstarty = 16
			map_placeplayer
			if ( rnd(2) == 0 | 0 ) {
				kaidan = 1
			}
			else {
				kaidan = 0
			}
			if ( kaidan == 0 ) {
				cell_featset 17, 12, tile_upstairs, CELL_FEATURE_UPSTAIRS, 11
			}
			else {
				cell_featset 17, 12, tile_upstairs, CELL_FEATURE_UPSTAIRS, 12
			}
			flt , 4
			novoidlv = 1
			characreate -1, CREATURE_ID_HELLABYRINTH_RULER, 17, 12
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_AI_MOVE_FREQ, rc) = 0
		}
		if ( gdata(GDATA_LEVEL) == 20 ) {
			map_initcustom "meiq102"
			mdata(MDATA_FIELD) = MAP_FIELD_INDOOR
			mdata(MDATA_TYPE) = MAP_TYPE_VILLAGE
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCDUNGEON14
			mdata(MDATA_CAN_SAVE) = 0
			mdata(MDATA_NO_RENEW) = 0
			mdatan(0) = lang("冥宮　2層", "LabyrinDeath 2F")
			gdata(GDATA_LEVEL_START_ON) = 7
			mapstartx = 23
			mapstarty = 4
			map_placeplayer
		}
		if ( gdata(GDATA_LEVEL) == 21 ) {
			map_initcustom "meiq112"
			mdata(MDATA_FIELD) = MAP_FIELD_INDOOR
			mdata(MDATA_TYPE) = MAP_TYPE_VILLAGE
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCDUNGEON14
			mdata(MDATA_CAN_SAVE) = 0
			mdata(MDATA_NO_RENEW) = 0
			mdatan(0) = lang("冥宮　2層", "LabyrinDeath 2F")
			gdata(GDATA_LEVEL_START_ON) = 7
			mapstartx = 31
			mapstarty = 16
			map_placeplayer
			if ( rnd(2) == 0 | 0 ) {
				kaidan = 1
			}
			else {
				kaidan = 0
			}
			if ( kaidan == 0 ) {
				cell_featset 17, 2, tile_upstairs, CELL_FEATURE_UPSTAIRS, 11
			}
			else {
				cell_featset 17, 2, tile_upstairs, CELL_FEATURE_UPSTAIRS, 12
			}
			txt lang("「…か…び…よ…」", cnvtalk("...dle.. fin..."))
		}
		if ( gdata(GDATA_LEVEL) == 22 ) {
			map_initcustom "meiq122"
			mdata(MDATA_FIELD) = MAP_FIELD_INDOOR
			mdata(MDATA_TYPE) = MAP_TYPE_VILLAGE
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCDUNGEON14
			mdata(MDATA_CAN_SAVE) = 0
			mdata(MDATA_NO_RENEW) = 0
			mdatan(0) = lang("冥宮　2層", "LabyrinDeath 2F")
			gdata(GDATA_LEVEL_START_ON) = 7
			mapstartx = 31
			mapstarty = 16
			map_placeplayer
			if ( rnd(2) == 0 | 0 ) {
				kaidan = 1
			}
			else {
				kaidan = 0
			}
			if ( kaidan == 0 ) {
				cell_featset 6, 7, tile_upstairs, CELL_FEATURE_UPSTAIRS, 11
			}
			else {
				cell_featset 6, 7, tile_upstairs, CELL_FEATURE_UPSTAIRS, 12
			}
			txt lang("「こ…び…だ…」", cnvtalk("...ittl.. fin..."))
		}
		if ( gdata(GDATA_LEVEL) == 26 ) {
			map_initcustom "meiq162"
			mdata(MDATA_FIELD) = MAP_FIELD_INDOOR
			mdata(MDATA_TYPE) = MAP_TYPE_VILLAGE
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCDUNGEON14
			mdata(MDATA_CAN_SAVE) = 0
			mdata(MDATA_NO_RENEW) = 0
			mdatan(0) = lang("悪鬼の掌", "Area of Curse")
			gdata(GDATA_LEVEL_START_ON) = 7
			mapstartx = 17
			mapstarty = 16
			map_placeplayer
			if ( rnd(2) == 0 | 0 ) {
				kaidan = 1
			}
			else {
				kaidan = 0
			}
			if ( kaidan == 0 ) {
				cell_featset 17, 12, tile_upstairs, CELL_FEATURE_UPSTAIRS, 21
			}
			else {
				cell_featset 17, 12, tile_upstairs, CELL_FEATURE_UPSTAIRS, 22
			}
			flt , 4
			novoidlv = 1
			characreate -1, CREATURE_ID_HELLABYRINTH_RULER, 17, 12
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_AI_MOVE_FREQ, rc) = 0
		}
		if ( gdata(GDATA_LEVEL) == 30 ) {
			map_initcustom "meiq103"
			mdata(MDATA_FIELD) = MAP_FIELD_INDOOR
			mdata(MDATA_TYPE) = MAP_TYPE_VILLAGE
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCDUNGEON14
			mdata(MDATA_CAN_SAVE) = 0
			mdata(MDATA_NO_RENEW) = 0
			mdatan(0) = lang("冥宮　3層", "LabyrinDeath 3F")
			gdata(GDATA_LEVEL_START_ON) = 7
			mapstartx = 17
			mapstarty = 2
			map_placeplayer
		}
		if ( gdata(GDATA_LEVEL) == 31 ) {
			map_initcustom "meiq113"
			mdata(MDATA_FIELD) = MAP_FIELD_INDOOR
			mdata(MDATA_TYPE) = MAP_TYPE_VILLAGE
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCDUNGEON14
			mdata(MDATA_CAN_SAVE) = 0
			mdata(MDATA_NO_RENEW) = 0
			mdatan(0) = lang("冥宮　3層", "LabyrinDeath 3F")
			gdata(GDATA_LEVEL_START_ON) = 7
			mapstartx = 31
			mapstarty = 16
			map_placeplayer
			if ( rnd(2) == 0 | 0 ) {
				kaidan = 1
			}
			else {
				kaidan = 0
			}
			if ( kaidan == 0 ) {
				cell_featset 11, 4, tile_upstairs, CELL_FEATURE_UPSTAIRS, 21
			}
			else {
				cell_featset 11, 4, tile_upstairs, CELL_FEATURE_UPSTAIRS, 22
			}
			txt lang("「あお…だ…」", cnvtalk("Bl.. sta..."))
			evadd EVENT_AMURDEAD_SUB_FIREWORKS
		}
		if ( gdata(GDATA_LEVEL) == 32 ) {
			map_initcustom "meiq123"
			mdata(MDATA_FIELD) = MAP_FIELD_INDOOR
			mdata(MDATA_TYPE) = MAP_TYPE_VILLAGE
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCDUNGEON14
			mdata(MDATA_CAN_SAVE) = 0
			mdata(MDATA_NO_RENEW) = 0
			mdatan(0) = lang("冥宮　3層", "LabyrinDeath 3F")
			gdata(GDATA_LEVEL_START_ON) = 7
			mapstartx = 31
			mapstarty = 16
			map_placeplayer
			if ( rnd(2) == 0 | 0 ) {
				kaidan = 1
			}
			else {
				kaidan = 0
			}
			if ( kaidan == 0 ) {
				cell_featset 23, 4, tile_upstairs, CELL_FEATURE_UPSTAIRS, 21
			}
			else {
				cell_featset 23, 4, tile_upstairs, CELL_FEATURE_UPSTAIRS, 22
			}
			txt lang("「あお…だ…」", cnvtalk("Bl.. sta..."))
			evadd EVENT_AMURDEAD_SUB_FIREWORKS
		}
		if ( gdata(GDATA_LEVEL) == 36 ) {
			map_initcustom "meiq163"
			mdata(MDATA_FIELD) = MAP_FIELD_INDOOR
			mdata(MDATA_TYPE) = MAP_TYPE_VILLAGE
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCDUNGEON14
			mdata(MDATA_CAN_SAVE) = 0
			mdata(MDATA_NO_RENEW) = 0
			mdatan(0) = lang("悪鬼の掌", "Area of Curse")
			gdata(GDATA_LEVEL_START_ON) = 7
			mapstartx = 17
			mapstarty = 16
			map_placeplayer
			if ( rnd(2) == 0 | 0 ) {
				kaidan = 1
			}
			else {
				kaidan = 0
			}
			if ( kaidan == 0 ) {
				cell_featset 17, 12, tile_upstairs, CELL_FEATURE_UPSTAIRS, 31
			}
			else {
				cell_featset 17, 12, tile_upstairs, CELL_FEATURE_UPSTAIRS, 32
			}
			flt , 4
			novoidlv = 1
			characreate -1, CREATURE_ID_HELLABYRINTH_RULER, 17, 12
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_AI_MOVE_FREQ, rc) = 0
		}
		if ( gdata(GDATA_LEVEL) == 40 ) {
			map_initcustom "meiq104"
			mdata(MDATA_FIELD) = MAP_FIELD_INDOOR
			mdata(MDATA_TYPE) = MAP_TYPE_VILLAGE
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCDUNGEON14
			mdata(MDATA_CAN_SAVE) = 0
			mdata(MDATA_NO_RENEW) = 0
			mdatan(0) = lang("冥宮　4層", "LabyrinDeath 4F")
			gdata(GDATA_LEVEL_START_ON) = 7
			mapstartx = 11
			mapstarty = 4
			map_placeplayer
		}
		if ( gdata(GDATA_LEVEL) == 41 ) {
			map_initcustom "meiq114"
			mdata(MDATA_FIELD) = MAP_FIELD_INDOOR
			mdata(MDATA_TYPE) = MAP_TYPE_VILLAGE
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCDUNGEON14
			mdata(MDATA_CAN_SAVE) = 0
			mdata(MDATA_NO_RENEW) = 0
			mdatan(0) = lang("冥宮　4層", "LabyrinDeath 4F")
			gdata(GDATA_LEVEL_START_ON) = 7
			mapstartx = 31
			mapstarty = 16
			map_placeplayer
			if ( rnd(2) == 0 | 0 ) {
				kaidan = 1
			}
			else {
				kaidan = 0
			}
			if ( kaidan == 0 ) {
				cell_featset 17, 2, tile_upstairs, CELL_FEATURE_UPSTAIRS, 31
			}
			else {
				cell_featset 17, 2, tile_upstairs, CELL_FEATURE_UPSTAIRS, 32
			}
			txt lang("「赤の階…だ…」", cnvtalk("Re..d sta..irs..."))
		}
		if ( gdata(GDATA_LEVEL) == 42 ) {
			map_initcustom "meiq124"
			mdata(MDATA_FIELD) = MAP_FIELD_INDOOR
			mdata(MDATA_TYPE) = MAP_TYPE_VILLAGE
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCDUNGEON14
			mdata(MDATA_CAN_SAVE) = 0
			mdata(MDATA_NO_RENEW) = 0
			mdatan(0) = lang("冥宮　4層", "LabyrinDeath 4F")
			gdata(GDATA_LEVEL_START_ON) = 7
			mapstartx = 31
			mapstarty = 16
			map_placeplayer
			if ( rnd(2) == 0 | 0 ) {
				kaidan = 1
			}
			else {
				kaidan = 0
			}
			if ( kaidan == 0 ) {
				cell_featset 11, 4, tile_upstairs, CELL_FEATURE_UPSTAIRS, 31
			}
			else {
				cell_featset 11, 4, tile_upstairs, CELL_FEATURE_UPSTAIRS, 32
			}
			txt lang("「くすりゆび…階だ…」", cnvtalk("Rin..g fin...ger st...airs..."))
		}
		if ( gdata(GDATA_LEVEL) == 46 ) {
			map_initcustom "meiq164"
			mdata(MDATA_FIELD) = MAP_FIELD_INDOOR
			mdata(MDATA_TYPE) = MAP_TYPE_VILLAGE
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCDUNGEON14
			mdata(MDATA_CAN_SAVE) = 0
			mdata(MDATA_NO_RENEW) = 0
			mdatan(0) = lang("悪鬼の掌", "Area of Curse")
			gdata(GDATA_LEVEL_START_ON) = 7
			mapstartx = 17
			mapstarty = 16
			map_placeplayer
			if ( rnd(2) == 0 | 0 ) {
				kaidan = 1
			}
			else {
				kaidan = 0
			}
			if ( kaidan == 0 ) {
				cell_featset 17, 12, tile_upstairs, CELL_FEATURE_UPSTAIRS, 41
			}
			else {
				cell_featset 17, 12, tile_upstairs, CELL_FEATURE_UPSTAIRS, 42
			}
			flt , 4
			novoidlv = 1
			characreate -1, CREATURE_ID_HELLABYRINTH_RULER, 17, 12
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_AI_MOVE_FREQ, rc) = 0
		}
		if ( gdata(GDATA_LEVEL) == 50 ) {
			map_initcustom "meiq105"
			mdata(MDATA_FIELD) = MAP_FIELD_INDOOR
			mdata(MDATA_TYPE) = MAP_TYPE_VILLAGE
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCDUNGEON14
			mdata(MDATA_CAN_SAVE) = 0
			mdata(MDATA_NO_RENEW) = 0
			mdatan(0) = lang("冥宮　5層", "LabyrinDeath 5F")
			gdata(GDATA_LEVEL_START_ON) = 7
			mapstartx = 6
			mapstarty = 7
			map_placeplayer
		}
		if ( gdata(GDATA_LEVEL) == 51 ) {
			map_initcustom "meiq115"
			mdata(MDATA_FIELD) = MAP_FIELD_INDOOR
			mdata(MDATA_TYPE) = MAP_TYPE_VILLAGE
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCDUNGEON14
			mdata(MDATA_CAN_SAVE) = 0
			mdata(MDATA_NO_RENEW) = 0
			mdatan(0) = lang("冥宮　5層", "LabyrinDeath 5F")
			gdata(GDATA_LEVEL_START_ON) = 7
			mapstartx = 31
			mapstarty = 16
			map_placeplayer
			if ( rnd(2) == 0 | 0 ) {
				kaidan = 1
			}
			else {
				kaidan = 0
			}
			if ( kaidan == 0 ) {
				cell_featset 23, 4, tile_upstairs, CELL_FEATURE_UPSTAIRS, 41
			}
			else {
				cell_featset 23, 4, tile_upstairs, CELL_FEATURE_UPSTAIRS, 42
			}
			txt lang("「ひとさしゆびの階段だよ…」", cnvtalk("Index finger stairs..."))
		}
		if ( gdata(GDATA_LEVEL) == 52 ) {
			map_initcustom "meiq125"
			mdata(MDATA_FIELD) = MAP_FIELD_INDOOR
			mdata(MDATA_TYPE) = MAP_TYPE_VILLAGE
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCDUNGEON14
			mdata(MDATA_CAN_SAVE) = 0
			mdata(MDATA_NO_RENEW) = 0
			mdatan(0) = lang("冥宮　5層", "LabyrinDeath 5F")
			gdata(GDATA_LEVEL_START_ON) = 7
			mapstartx = 31
			mapstarty = 16
			map_placeplayer
			if ( rnd(2) == 0 | 0 ) {
				kaidan = 1
			}
			else {
				kaidan = 0
			}
			if ( kaidan == 0 ) {
				cell_featset 6, 7, tile_upstairs, CELL_FEATURE_UPSTAIRS, 41
			}
			else {
				cell_featset 6, 7, tile_upstairs, CELL_FEATURE_UPSTAIRS, 42
			}
			txt lang("「青の階段だよ…」", cnvtalk("Blue stairs..."))
		}
		if ( gdata(GDATA_LEVEL) == 56 ) {
			map_initcustom "meiq165"
			mdata(MDATA_FIELD) = MAP_FIELD_INDOOR
			mdata(MDATA_TYPE) = MAP_TYPE_VILLAGE
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCDUNGEON14
			mdata(MDATA_CAN_SAVE) = 0
			mdata(MDATA_NO_RENEW) = 0
			mdatan(0) = lang("悪鬼の掌", "Area of Curse")
			gdata(GDATA_LEVEL_START_ON) = 7
			mapstartx = 17
			mapstarty = 16
			map_placeplayer
			if ( rnd(2) == 0 | 0 ) {
				kaidan = 1
			}
			else {
				kaidan = 0
			}
			if ( kaidan == 0 ) {
				cell_featset 17, 12, tile_upstairs, CELL_FEATURE_UPSTAIRS, 51
			}
			else {
				cell_featset 17, 12, tile_upstairs, CELL_FEATURE_UPSTAIRS, 52
			}
			flt , 4
			novoidlv = 1
			characreate -1, CREATURE_ID_HELLABYRINTH_RULER, 17, 12
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_AI_MOVE_FREQ, rc) = 0
		}
		if ( gdata(GDATA_LEVEL) == 60 ) {
			map_initcustom "meiq106"
			mdata(MDATA_FIELD) = MAP_FIELD_INDOOR
			mdata(MDATA_TYPE) = MAP_TYPE_VILLAGE
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCDUNGEON14
			mdata(MDATA_CAN_SAVE) = 0
			mdata(MDATA_NO_RENEW) = 0
			mdatan(0) = lang("冥宮　6層", "LabyrinDeath 6F")
			gdata(GDATA_LEVEL_START_ON) = 7
			mapstartx = 26
			mapstarty = 26
			map_placeplayer
			flt , 6
			novoidlv = 1
			characreate -1, CREATURE_ID_STRAY_SOUL, 8, 21
		}
	}
	if ( gdata(GDATA_AREA) == AREA_YLVA_LIBRARY ) {
		if ( gdata(GDATA_LEVEL) == 1 ) {
			mdata(MDATA_MODERATE_CROWD) = 30
			map_initcustom "3lib"
			map_placeplayer
			mdata(MDATA_WALL) = 0
			if ( gdata(GDATA_FLAG_SUB_THE_TRUE_APPEARANCE) >= 1002 ) {
				flt
				characreate -1, CREATURE_ID_ARIBEL_THE_WHITE_ARMS, 24, 16
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
				cdata(CDATA_AI_CALM, rc) = 3
			}
			flt
			characreate -1, CREATURE_ID_SOPHIA_THE_WISE, 31, 3
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_ALICE_THE_BIG_ANT, 32, 27
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			if ( gdata(GDATA_FLAG_SUB_THE_TRUE_APPEARANCE) >= 6 ) {
				cdata(CDATA_PIC, rc) = xy2pic(15, 19) + COLOR_LIGHT_GREEN * COLOR_TINT_MULT
			}
			flt
			characreate -1, CREATURE_ID_MARY_THE_INSECT_MASTER, 30, 24
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			repeat 3
				flt
				characreate -1, CREATURE_ID_ARKHAI, -3, 0
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
				flt
				characreate -1, CREATURE_ID_DOMINION, -3, 0
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
				flt
				characreate -1, CREATURE_ID_SERAPH, -3, 0
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			loop
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER_CROW, 1, 22
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_BOOK_RESERVE
			cdatan(CDATAN_NAME, rc) = lang("魔法書作家の" + cdatan(CDATAN_NAME, rc), sncnv(cdatan(CDATAN_NAME, rc)) + "the spell writer")
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER_CROW, 22, 23
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_GOODS, 38
			sngoods cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER_CROW, 11, 23
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_BAKERY, 25
			snbakery cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER_CROW, 4, 25
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_MAGIC, 32
			snmagic cdatan(CDATAN_NAME, rc)
			repeat 3
				flt
				characreate -1, CREATURE_ID_EXILE, -3, 0
				if ( stat != 0 ) {
					cdata(CDATA_AI_CALM, rc) = 2
					cdata(CDATA_RELATION, rc) = -1
					cdata(CDATA_RELATION_ORG, rc) = -1
					cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
				}
				flt
				characreate -1, CREATURE_ID_GOOSE, -3, 0
				if ( stat != 0 ) {
					cdata(CDATA_AI_CALM, rc) = 2
					cdata(CDATA_RELATION, rc) = -1
					cdata(CDATA_RELATION_ORG, rc) = -1
					cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
				}
			loop
			repeat 4
				flt
				characreate -1, CREATURE_ID_SCHOLAR, -3, 0
			loop
		}
	}
	if ( gdata(GDATA_AREA) == AREA_MIRAGE_TOWER ) {
		if ( gdata(GDATA_LEVEL) == 1 ) {
			mdata(MDATA_MODERATE_CROWD) = 30
			map_initcustom "3sazin"
			map_placeplayer
			mdata(MDATA_WALL) = 0
			flt
			characreate -1, CREATURE_ID_SINAHA, 39, 6
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			if ( gdata(GDATA_FLAG_SUB_THE_DISTANT_SEA_OF_STARS) < 1000 ) {
				flt
				characreate -1, CREATURE_ID_JIN_THE_MACHINE_REBEL, 32, 21
				cdata(CDATA_AI_CALM, rc) = 3
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			}
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 24, 20
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_ARMOR, 22
			snarmor cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 12, 9
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_GENERAL, 35
			sngeneral cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_WIZARD, 8, 15
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_MAGIC, 21
			snmagic cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 13, 22
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_INN, 28
			sninn cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_BARTENDER, 25, 8
			cdata(CDATA_ROLE, rc) = ROLE_BARTENDER
			flt
			characreate -1, CREATURE_ID_TRAINER, 9, 22
			cdata(CDATA_ROLE, rc) = ROLE_TRAINER
			sntrainer cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_WIZARD, 22, 9
			cdata(CDATA_ROLE, rc) = ROLE_IDENTIFIER
			flt
			characreate -1, CREATURE_ID_INFORMER, 24, 6
			cdata(CDATA_ROLE, rc) = ROLE_INFORMER
			flt
			characreate -1, CREATURE_ID_HEALER, 37, 28
			cdata(CDATA_ROLE, rc) = ROLE_HEALER
			flt
			characreate -1, CREATURE_ID_SAND_WORM, 1, 23
			if ( stat != 0 ) {
				cdata(CDATA_AI_CALM, rc) = 2
				cdata(CDATA_RELATION, rc) = -1
				cdata(CDATA_RELATION_ORG, rc) = -1
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			}
			flt
			characreate -1, CREATURE_ID_SAND_WORM, 8, 1
			if ( stat != 0 ) {
				cdata(CDATA_AI_CALM, rc) = 2
				cdata(CDATA_RELATION, rc) = -1
				cdata(CDATA_RELATION_ORG, rc) = -1
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			}
			flt
			characreate -1, CREATURE_ID_SCORPION, 43, 2
			if ( stat != 0 ) {
				cdata(CDATA_AI_CALM, rc) = 2
				cdata(CDATA_RELATION, rc) = -1
				cdata(CDATA_RELATION_ORG, rc) = -1
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			}
			flt
			characreate -1, CREATURE_ID_SCORPION, 1, 1
			if ( stat != 0 ) {
				cdata(CDATA_AI_CALM, rc) = 2
				cdata(CDATA_RELATION, rc) = -1
				cdata(CDATA_RELATION_ORG, rc) = -1
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			}
			repeat 4
				flt
				characreate -1, CREATURE_ID_BLACK_CAT, -3, 0
				if ( stat != 0 ) {
					cdata(CDATA_AI_CALM, rc) = 2
					cdata(CDATA_RELATION, rc) = -1
					cdata(CDATA_RELATION_ORG, rc) = -1
					cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
				}
			loop
			repeat 8
				flt
				characreate -1, CREATURE_ID_TWINTAIL, -3, 0
				cdata(CDATA_RELATION, rc) = -1
				cdata(CDATA_RELATION_ORG, rc) = -1
			loop
		}
		if ( gdata(GDATA_LEVEL) == 60 ) {
			mdata(MDATA_TILESET) = 0
			map_initcustom "4sazin"
			mdata(MDATA_FIELD) = 1
			mdata(MDATA_TYPE) = MAP_TYPE_VILLAGE
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCCASINO
			mdata(MDATA_NO_RENEW) = 0
			mdatan(MDATAN_NAME) = lang("オアシスリゾート", "Oasis in tower")
			gdata(GDATA_LEVEL_START_ON) = 7
			mapstartx = 32
			mapstarty = 12
			map_placeplayer
			flt
			characreate -1, CREATURE_ID_ARASIEL, 7, 17
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_PRISONER, 33, 1
			cdata(CDATA_RELATION, rc) = -1
			cdata(CDATA_RELATION_ORG, rc) = -1
			flt
			characreate -1, CREATURE_ID_PRISONER, 34, 1
			cdata(CDATA_RELATION, rc) = -1
			cdata(CDATA_RELATION_ORG, rc) = -1
			flt
			characreate -1, CREATURE_ID_PRISONER, 35, 1
			cdata(CDATA_RELATION, rc) = -1
			cdata(CDATA_RELATION_ORG, rc) = -1
			flt
			characreate -1, CREATURE_ID_MAIDSANN, 22, 18
			cdata(CDATA_RELATION, rc) = 0
			cdata(CDATA_RELATION_ORG, rc) = 0
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_BAKERY, 20
			flt
			characreate -1, CREATURE_ID_MAIDSANN, 18, 20
			cdata(CDATA_RELATION, rc) = 0
			cdata(CDATA_RELATION_ORG, rc) = 0
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_FOOD, 30
			flt
			characreate -1, CREATURE_ID_MAIDSANN, 12, 20
			cdata(CDATA_RELATION, rc) = 0
			cdata(CDATA_RELATION_ORG, rc) = 0
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_MAGIC, 18
			repeat 16
				flt
				characreate -1, CREATURE_ID_BLACK_ANGEL, -3, 0
				if ( stat != 0 ) {
					cdata(CDATA_AI_CALM, rc) = 2
					cdata(CDATA_RELATION, rc) = -1
					cdata(CDATA_RELATION_ORG, rc) = -1
					cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
				}
			loop
		}
	}
	if ( gdata(GDATA_AREA) == AREA_DOCK ) {
		if ( gdata(GDATA_LEVEL) == 1 ) {
			mdata(MDATA_MODERATE_CROWD) = 20
			map_initcustom "7bship"
			map_placeplayer
			mdata(MDATA_WALL) = 0
			if ( gdata(GDATA_FLAG_SUB_SOCKS_THIEF) >= 10 ) {
				flt
				characreate -1, CREATURE_ID_KUROYA_THE_LOOKING_UNIVERSE, 6, 14
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			}
			if ( gdata(GDATA_FLAG_SUB_BELPHAT_THE_COSMIC_SWORD) >= 1000 ) {
				flt
				characreate -1, CREATURE_ID_BELPHAT_THE_COSMIC_SWORD, 6, 12
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			}
			flt
			characreate -1, CREATURE_ID_WORKER_02, 8, 16
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_ARMOR, 32
			snarmor cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_WORKER_02, 22, 5
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_GENERAL, 28
			sngeneral cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_WORKER_02, 7, 5
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_SALESPERSON, 15
			sngeneral cdatan(CDATAN_NAME, rc)
			repeat 12
				flt
				characreate -1, CREATURE_ID_WORKER_01, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			loop
		}
		if ( gdata(GDATA_LEVEL) == 60 ) {
			mdata(MDATA_TILESET) = 0
			map_initcustom "8bship"
			mdata(MDATA_FIELD) = 1
			mdata(MDATA_TYPE) = MAP_TYPE_VILLAGE
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCHUGE
			mdata(MDATA_NO_RENEW) = 0
			mdatan(MDATAN_NAME) = lang("眠れる神艦・上層", "Albedrion")
			gdata(GDATA_LEVEL_START_ON) = 7
			mapstartx = 4
			mapstarty = 48
			map_placeplayer
			if ( gdata(GDATA_FLAG_SUB_REGULUS_KIKKASU) >= 2 ) {
				if ( findchara(CREATURE_ID_SHURAIDA_THE_EXPERT_MERC) == 0 ) {
					flt
					characreate -1, CREATURE_ID_SHURAIDA_THE_EXPERT_MERC, 12, 29
					cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
					cdata(CDATA_AI_CALM, rc) = 3
				}
			}
			flt
			characreate -1, CREATURE_ID_GARZIEM, 15, 10
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_WORKER_02, 25, 5
			cdata(CDATA_ROLE, rc) = ROLE_TRAINER
			sntrainer cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_WORKER_02, 13, 4
			cdata(CDATA_ROLE, rc) = ROLE_IDENTIFIER
			flt
			characreate -1, CREATURE_ID_WORKER_02, 4, 7
			cdata(CDATA_ROLE, rc) = ROLE_INFORMER
			flt
			characreate -1, CREATURE_ID_WORKER_02, 22, 48
			cdata(CDATA_ROLE, rc) = ROLE_HEALER
			repeat 6
				flt
				characreate -1, CREATURE_ID_ANDROID, -3, 0
				if ( stat != 0 ) {
					cdata(CDATA_AI_CALM, rc) = 2
					cdata(CDATA_RELATION, rc) = 0
					cdata(CDATA_RELATION_ORG, rc) = 0
					cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
				}
			loop
			repeat 10
				flt
				characreate -1, CREATURE_ID_WORKER_01, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			loop
			repeat 4
				flt
				characreate -1, CREATURE_ID_R_CLEANER, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			loop
		}
		if ( gdata(GDATA_LEVEL) == 70 ) {
			mdata(MDATA_TILESET) = MAP_TILESET_DUNGEON
			map_initcustom "87bship"
			mdata(MDATA_FIELD) = MAP_FIELD_INDOOR
			mdata(MDATA_TYPE) = MAP_TYPE_VILLAGE
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCMELAN
			mdata(MDATA_NO_RENEW) = 0
			mdatan(0) = lang("作業区画", "Work area")
			gdata(GDATA_LEVEL_START_ON) = 7
			mapstartx = 15
			mapstarty = 12
			map_placeplayer
			flt
			characreate -1, CREATURE_ID_WORKER_02, 9, 3
			cdata(CDATA_RELATION, rc) = RELATION_NEUTRAL
			cdata(CDATA_RELATION_ORG, rc) = RELATION_NEUTRAL
			cdata(CDATA_ROLE, rc) = ROLE_SISTER
			cdata(CDATA_PIC, rc) = 761 + 15 * 1000
			cdata(CDATA_AI_CALM, rc) = 3
			flt
			characreate -1, CREATURE_ID_WORKER_02, 7, 7
			cdata(CDATA_SEX, rc) = 0
			cdata(CDATA_RELATION, rc) = RELATION_NEUTRAL
			cdata(CDATA_RELATION_ORG, rc) = RELATION_NEUTRAL
			cdata(CDATA_ROLE, rc) = ROLE_SISTER
			cdata(CDATA_PIC, rc) = 761 + 15 * 1000
			cdata(CDATA_AI_CALM, rc) = 3
			flt
			characreate -1, CREATURE_ID_WORKER_02, 3, 11
			cdata(CDATA_SEX, rc) = 1
			cdata(CDATA_RELATION, rc) = RELATION_NEUTRAL
			cdata(CDATA_RELATION_ORG, rc) = RELATION_NEUTRAL
			cdata(CDATA_ROLE, rc) = ROLE_SISTER
			cdata(CDATA_PIC, rc) = 761 + 15 * 1000
			cdata(CDATA_AI_CALM, rc) = 3
			flt
			characreate -1, CREATURE_ID_WORKER_02, 5, 15
			cdata(CDATA_RELATION, rc) = RELATION_NEUTRAL
			cdata(CDATA_RELATION_ORG, rc) = RELATION_NEUTRAL
			cdata(CDATA_ROLE, rc) = ROLE_SISTER
			cdata(CDATA_PIC, rc) = 761 + 15 * 1000
			cdata(CDATA_AI_CALM, rc) = 3
			flt
			characreate -1, CREATURE_ID_WORKER_01, 21, 1
			cdata(CDATA_RELATION, rc) = RELATION_NEUTRAL
			cdata(CDATA_RELATION_ORG, rc) = RELATION_NEUTRAL
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			cdata(CDATA_AI_CALM, rc) = 3
			flt
			characreate -1, CREATURE_ID_WORKER_01, 22, 1
			cdata(CDATA_RELATION, rc) = RELATION_NEUTRAL
			cdata(CDATA_RELATION_ORG, rc) = RELATION_NEUTRAL
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			cdata(CDATA_AI_CALM, rc) = 3
			flt
			characreate -1, CREATURE_ID_WORKER_01, 21, 11
			cdata(CDATA_RELATION, rc) = RELATION_NEUTRAL
			cdata(CDATA_RELATION_ORG, rc) = RELATION_NEUTRAL
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			cdata(CDATA_AI_CALM, rc) = 3
			flt
			characreate -1, CREATURE_ID_WORKER_01, 3, 3
			cdata(CDATA_RELATION, rc) = RELATION_NEUTRAL
			cdata(CDATA_RELATION_ORG, rc) = RELATION_NEUTRAL
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			cdata(CDATA_AI_CALM, rc) = 3
			flt
			characreate -1, CREATURE_ID_WORKER_01, 7, 3
			cdata(CDATA_RELATION, rc) = RELATION_NEUTRAL
			cdata(CDATA_RELATION_ORG, rc) = RELATION_NEUTRAL
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			cdata(CDATA_AI_CALM, rc) = 3
			flt
			characreate -1, CREATURE_ID_WORKER_01, 3, 7
			cdata(CDATA_RELATION, rc) = RELATION_NEUTRAL
			cdata(CDATA_RELATION_ORG, rc) = RELATION_NEUTRAL
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			cdata(CDATA_AI_CALM, rc) = 3
			flt
			characreate -1, CREATURE_ID_WORKER_01, 5, 7
			cdata(CDATA_RELATION, rc) = RELATION_NEUTRAL
			cdata(CDATA_RELATION_ORG, rc) = RELATION_NEUTRAL
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			cdata(CDATA_AI_CALM, rc) = 3
			flt
			characreate -1, CREATURE_ID_WORKER_01, 9, 7
			cdata(CDATA_RELATION, rc) = RELATION_NEUTRAL
			cdata(CDATA_RELATION_ORG, rc) = RELATION_NEUTRAL
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			cdata(CDATA_AI_CALM, rc) = 3
			flt
			characreate -1, CREATURE_ID_WORKER_01, 9, 11
			cdata(CDATA_RELATION, rc) = RELATION_NEUTRAL
			cdata(CDATA_RELATION_ORG, rc) = RELATION_NEUTRAL
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			cdata(CDATA_AI_CALM, rc) = 3
			flt
			characreate -1, CREATURE_ID_WORKER_01, 5, 11
			cdata(CDATA_RELATION, rc) = RELATION_NEUTRAL
			cdata(CDATA_RELATION_ORG, rc) = RELATION_NEUTRAL
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			cdata(CDATA_AI_CALM, rc) = 3
			flt
			characreate -1, CREATURE_ID_WORKER_01, 7, 11
			cdata(CDATA_RELATION, rc) = RELATION_NEUTRAL
			cdata(CDATA_RELATION_ORG, rc) = RELATION_NEUTRAL
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			cdata(CDATA_AI_CALM, rc) = 3
			flt
			characreate -1, CREATURE_ID_WORKER_01, 3, 15
			cdata(CDATA_RELATION, rc) = RELATION_NEUTRAL
			cdata(CDATA_RELATION_ORG, rc) = RELATION_NEUTRAL
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			cdata(CDATA_AI_CALM, rc) = 3
			flt
			characreate -1, CREATURE_ID_WORKER_01, 9, 15
			cdata(CDATA_RELATION, rc) = RELATION_NEUTRAL
			cdata(CDATA_RELATION_ORG, rc) = RELATION_NEUTRAL
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			cdata(CDATA_AI_CALM, rc) = 3
			flt
			characreate -1, CREATURE_ID_WORKER_01, 7, 15
			cdata(CDATA_RELATION, rc) = RELATION_NEUTRAL
			cdata(CDATA_RELATION_ORG, rc) = RELATION_NEUTRAL
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			cdata(CDATA_AI_CALM, rc) = 3
		}
		if ( gdata(GDATA_LEVEL) == 100 ) {
			mdata(MDATA_TILESET) = 0
			map_initcustom "sqBlack"
			mdata(MDATA_FIELD) = 2
			mdata(MDATA_TYPE) = MAP_TYPE_DUNGEON
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCBOSS5
			mdata(MDATA_NO_RENEW) = 1
			mdatan(MDATAN_NAME) = lang("死の街", "Ruined city")
			gdata(GDATA_LEVEL_START_ON) = 7
			mapstartx = 5
			mapstarty = 52
			flt
			characreate -1, CREATURE_ID_ROATONIS_THE_INFECTIONS, 20, 6
			cdata(CDATA_AI_CALM, rc) = 3
			fixlv = FIX_QUALITY_MIRACLE
			characreate -1, CREATURE_ID_ZOMBIE_QUEEN, 20, 8
			cdata(CDATA_AI_CALM, rc) = 3
			flt
			initlv = 140
			characreate -1, CREATURE_ID_NECRO_LANCER, 19, 9
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_CHARACTER_TIER, rc) = CHARACTER_TIER_SUMMONED_NORMAL
			flt
			initlv = 140
			characreate -1, CREATURE_ID_NECRO_LANCER, 20, 9
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_CHARACTER_TIER, rc) = CHARACTER_TIER_SUMMONED_NORMAL
			flt
			initlv = 140
			characreate -1, CREATURE_ID_NECRO_LANCER, 21, 9
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_CHARACTER_TIER, rc) = CHARACTER_TIER_SUMMONED_NORMAL
			flt
			initlv = 140
			characreate -1, CREATURE_ID_NECRO_DOLL, 18, 7
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_CHARACTER_TIER, rc) = CHARACTER_TIER_SUMMONED_NORMAL
			flt
			initlv = 140
			characreate -1, CREATURE_ID_NECRO_DOLL, 22, 7
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_CHARACTER_TIER, rc) = CHARACTER_TIER_SUMMONED_NORMAL
			repeat 5
				flt
				initlv = 140
				characreate -1, CREATURE_ID_CRYING_WITCH, 8, 11
				cdata(CDATA_AI_CALM, rc) = 3
				cdata(CDATA_CHARACTER_TIER, rc) = CHARACTER_TIER_SUMMONED_NORMAL
			loop
			repeat 5
				flt
				initlv = 140
				characreate -1, CREATURE_ID_NECRO_DOLL, 20, 17
				cdata(CDATA_AI_CALM, rc) = 4
				cdata(CDATA_CHARACTER_TIER, rc) = CHARACTER_TIER_SUMMONED_NORMAL
			loop
			repeat 10
				flt
				initlv = 140
				characreate -1, CREATURE_ID_ZOMBIE, 14, 24
				cdata(CDATA_AI_CALM, rc) = 4
				cdata(CDATA_CHARACTER_TIER, rc) = CHARACTER_TIER_SUMMONED_NORMAL
			loop
			repeat 10
				flt
				initlv = 140
				characreate -1, CREATURE_ID_ZOMBIE, 14, 37
				cdata(CDATA_AI_CALM, rc) = 4
				cdata(CDATA_CHARACTER_TIER, rc) = CHARACTER_TIER_SUMMONED_NORMAL
			loop
			repeat 4
				flt
				initlv = 140
				characreate -1, CREATURE_ID_LICH, 21, 34
				cdata(CDATA_AI_CALM, rc) = 4
				cdata(CDATA_CHARACTER_TIER, rc) = CHARACTER_TIER_SUMMONED_NORMAL
			loop
			repeat 4
				flt
				initlv = 140
				characreate -1, CREATURE_ID_SKELETON_WARRIOR, 6, 41
				cdata(CDATA_AI_CALM, rc) = 4
				cdata(CDATA_CHARACTER_TIER, rc) = CHARACTER_TIER_SUMMONED_NORMAL
			loop
			put_questtarget
			flt
			characreate -1, CREATURE_ID_SHURAIDA_THE_EXPERT_MERC, 14, 48
			cdata(CDATA_AI_CALM, rc) = 4
			cdata(CDATA_RELATION, rc) = 10
			cdata(CDATA_RELATION_ORG, rc) = 10
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			cdata(CDATA_AI_AGGRO, rc) = 30
			repeat 3
				flt
				initlv = 130
				characreate -1, CREATURE_ID_MERCENARY_WARRIOR, 14, 40
				cdata(CDATA_AI_CALM, rc) = 4
				cdata(CDATA_RELATION, rc) = 10
				cdata(CDATA_RELATION_ORG, rc) = 10
				cdata(CDATA_AI_AGGRO, rc) = 30
				cdata(CDATA_CHARACTER_TIER, rc) = CHARACTER_TIER_SUMMONED_NORMAL
			loop
			repeat 3
				flt
				initlv = 130
				characreate -1, CREATURE_ID_MERCENARY_ARCHER, 16, 42
				cdata(CDATA_AI_CALM, rc) = 4
				cdata(CDATA_RELATION, rc) = 10
				cdata(CDATA_RELATION_ORG, rc) = 10
				cdata(CDATA_AI_AGGRO, rc) = 30
				cdata(CDATA_CHARACTER_TIER, rc) = CHARACTER_TIER_SUMMONED_NORMAL
			loop
			repeat 3
				flt
				initlv = 130
				characreate -1, CREATURE_ID_MERCENARY_WIZARD, 14, 43
				cdata(CDATA_AI_CALM, rc) = 4
				cdata(CDATA_RELATION, rc) = 10
				cdata(CDATA_RELATION_ORG, rc) = 10
				cdata(CDATA_AI_AGGRO, rc) = 30
				cdata(CDATA_CHARACTER_TIER, rc) = CHARACTER_TIER_SUMMONED_NORMAL
			loop
			map_placeplayer
		}
	}
	if ( gdata(GDATA_AREA) == AREA_IRMA_THALIA_WORKSHOP ) {
		map_initcustom "10dwa"
		mdata(MDATA_MODERATE_CROWD) = 0
		flt
		characreate -1, CREATURE_ID_IRMA_THE_INDOMITABLE_SMITH, 17, 11
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		flt
		characreate -1, CREATURE_ID_THALIA_THE_STAR_VIEWER, 26, 7
		cdata(CDATA_AI_CALM, rc) = 3
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		repeat 5
			flt
			characreate -1, CREATURE_ID_CAT, -3, 0
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		loop
		mdata(MDATA_MUSIC) = MUSICLIST_MCMEMORY
		mdata(MDATA_NO_RENEW) = 0
		map_placeplayer
	}
	if ( gdata(GDATA_AREA) == AREA_RUST_PLAZA ) {
		if ( gdata(GDATA_LEVEL) == 1 ) {
			mdata(MDATA_MODERATE_CROWD) = 30
			map_initcustom "5cave"
			map_placeplayer
			mdata(MDATA_WALL) = 0
			flt
			characreate -1, CREATURE_ID_IRMA_THE_INDOMITABLE_SMITH, 39, 7
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			if ( gdata(GDATA_FLAG_SUB_BEYOND_THE_GENERATIONS) <= 7 ) {
				flt
				characreate -1, CREATURE_ID_THALIA_THE_STAR_VIEWER, 32, 3
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			}
			if ( gdata(GDATA_FLAG_SUB_BEYOND_THE_GENERATIONS) <= 7 ) {
				flt
				characreate -1, CREATURE_ID_DAIN_THE_ELDER_OF_HILL, 8, 13
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			}
			repeat 9
				flt
				characreate -1, CREATURE_ID_HILL_CITIZEN, -3, 0
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			loop
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER2, 17, 2
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_DEED, 21
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER2, 31, 21
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_DEED, 45
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER2, 42, 27
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_OFFICE, 41
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER2, 16, 27
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_FOOD, 23
			snfood cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_WISE_HILL_CITIZEN, 11, 29
			cdata(CDATA_ROLE, rc) = ROLE_IDENTIFIER
			flt
			characreate -1, CREATURE_ID_WISE_HILL_CITIZEN, 10, 37
			cdata(CDATA_ROLE, rc) = ROLE_INFORMER
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER_CROW, 3, 26
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_MAGIC, 21
			snmagic cdatan(CDATAN_NAME, rc)
			gosub *client_update
			repeat 10
				flt
				characreate -1, CREATURE_ID_HILL_CHILD, -3, 0
			loop
		}
	}
	if ( gdata(GDATA_AREA) == AREA_GUARDIAN_SHRINE ) {
		if ( gdata(GDATA_LEVEL) == 1 ) {
			mdata(MDATA_MODERATE_CROWD) = 30
			map_initcustom "6defend"
			map_placeplayer
			mdata(MDATA_WALL) = 0
			flt
			characreate -1, CREATURE_ID_ROVID, 20, 13
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			cdata(CDATA_AI_CALM, rc) = 3
			flt
			characreate -1, CREATURE_ID_NORNE_THE_GUIDE, 15, 10
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			cdata(CDATA_AI_CALM, rc) = 3
			if ( gdata(GDATA_FLAG_MAIN_CHAOS_CRADLE_34) >= 101 ) {
				flt
				characreate -1, CREATURE_ID_LANKATA_THE_LIGHTNING_OF_BLUE, 11, 5
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
				cdata(CDATA_AI_CALM, rc) = 3
				flt
				characreate -1, CREATURE_ID_ALFRED_THE_CANGNAN_WIND, 12, 5
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
				cdata(CDATA_AI_CALM, rc) = 3
			}
			if ( gdata(GDATA_FLAG_GUARDIAN_SHRINE) >= 1 ) {
				flt
				characreate -1, CREATURE_ID_AIME_THE_STORY_TELLER, 20, 8
				cdata(CDATA_RELATION, rc) = RELATION_NEUTRAL
				cdata(CDATA_RELATION_ORG, rc) = RELATION_NEUTRAL
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
				cdata(CDATA_AI_CALM, rc) = 3
			}
			repeat 10
				flt
				characreate -1, CREATURE_ID_DEFENDER, -3, 0
				if ( stat != 0 ) {
					cdata(CDATA_AI_CALM, rc) = 2
					cdata(CDATA_RELATION, rc) = -1
					cdata(CDATA_RELATION_ORG, rc) = -1
					cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
				}
			loop
			repeat 2
				flt
				characreate -1, CREATURE_ID_MERCENARY_WARRIOR, -3, 0
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cbitmod CHARA_BIT_SUMMONED, rc, 1
				flt
				characreate -1, CREATURE_ID_MERCENARY_ARCHER, -3, 0
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cbitmod CHARA_BIT_SUMMONED, rc, 1
				flt
				characreate -1, CREATURE_ID_MERCENARY_WIZARD, -3, 0
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cbitmod CHARA_BIT_SUMMONED, rc, 1
			loop
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 21, 18
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_FOOD, 29
			snfood cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_WIZARD, 19, 4
			cdata(CDATA_ROLE, rc) = ROLE_IDENTIFIER
			flt
			characreate -1, CREATURE_ID_HEALER, 19, 11
			cdata(CDATA_ROLE, rc) = ROLE_HEALER
			flt
			characreate -1, CREATURE_ID_INFORMER, 11, 14
			cdata(CDATA_ROLE, rc) = ROLE_INFORMER
			repeat 10
				flt
				characreate -1, CREATURE_ID_TRAVELER, -3, 0
				cbitmod CHARA_BIT_SUMMONED, rc, 1
			loop
		}
	}
	if ( gdata(GDATA_AREA) == AREA_DRAGON_VOLCANO ) {
		if ( gdata(GDATA_LEVEL) == 160 ) {
			map_initcustom "kazan"
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCBATTLE2
			map_placeplayer
		}
		if ( gdata(GDATA_LEVEL) == 161 ) {
			map_initcustom "kazan2"
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCLASTBOSS
			map_placeplayer
		}
	}
	if ( gdata(GDATA_AREA) == AREA_HARVEST_SHIP ) {
		if ( gdata(GDATA_LEVEL) == 140 ) {
			map_initcustom "sqSpace"
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCRUIN
			map_placeplayer
			if ( gdata(GDATA_FLAG_SUB_THE_DISTANT_SEA_OF_STARS) > 1000 ) {
				flt
				characreate -1, CREATURE_ID_JIN_THE_MACHINE_REBEL, 2, 19
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
				cdata(CDATA_AI_CALM, rc) = 3
			}
		}
		if ( gdata(GDATA_LEVEL) == 141 ) {
			map_initcustom "sqSpace2"
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCBATTLE2
			put_questtarget
			map_placeplayer
		}
	}
	if ( gdata(GDATA_AREA) == AREA_EIREL ) {
		if ( gdata(GDATA_LEVEL) == 1 ) {
			mdata(MDATA_MODERATE_CROWD) = 40
			map_initcustom "eirel"
			map_placeplayer
			mdata(MDATA_WALL) = 0
			flt
			characreate -1, CREATURE_ID_ALCHEMIST_NAPLUS, 16, 6
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_DOG_COP, 7, 14
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_MILIS_CAPTAIN_OF_THE_SPECIAL_FORCES, 2, 2
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			cdata(CDATA_AI_CALM, rc) = 3
			flt
			characreate -1, CREATURE_ID_CLEANER, 41, 3
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_BARD, 36, 12
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 21, 18
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_ARMOR, 12
			snarmor cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 44, 4
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_TRADE, 22
			sntrade cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 20, 14
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_GENERAL, 10
			sngeneral cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 29, 26
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_GOODS, 18
			sngoods cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_WIZARD, 5, 27
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_MAGIC, 21
			snmagic cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 46, 22
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_INN, 8
			sninn cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 41, 21
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_BAKERY, 9
			snbakery cdatan(CDATAN_NAME, rc)
			cdata(CDATA_PIC, rc) = xy2pic(6, 4)
			flt
			characreate -1, CREATURE_ID_WIZARD, 41, 5
			cdata(CDATA_ROLE, rc) = ROLE_IDENTIFIER
			flt
			characreate -1, CREATURE_ID_BARTENDER, 47, 4
			cdata(CDATA_ROLE, rc) = ROLE_BARTENDER
			flt
			characreate -1, CREATURE_ID_HEALER, 8, 5
			cdata(CDATA_ROLE, rc) = ROLE_HEALER
			flt
			characreate -1, CREATURE_ID_ELDER, 29, 4
			cdata(CDATA_ROLE, rc) = ROLE_MAYOR
			cdatan(CDATAN_NAME, rc) = lang("エイレルの" + cdatan(CDATAN_NAME, rc), cdatan(CDATAN_NAME, rc) + " of Eirel")
			flt
			characreate -1, CREATURE_ID_TRAINER, 25, 13
			cdata(CDATA_ROLE, rc) = ROLE_TRAINER
			sntrainer cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_INFORMER, 26, 15
			cdata(CDATA_ROLE, rc) = ROLE_INFORMER
			repeat 4
				flt
				characreate -1, CREATURE_ID_CITIZEN4, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
				flt
				characreate -1, CREATURE_ID_CITIZEN3, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			loop
			repeat 4
				flt
				characreate -1, CREATURE_ID_GUARD2, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_GUARD
			loop
			gosub *client_update
			repeat 11
				dbid = 0
				gosub *fltChara
				characreate -1, dbid, -3, 0
			loop
		}
		if ( gdata(GDATA_LEVEL) == 3 ) {
			mdata(MDATA_TILESET) = 0
			map_initcustom "sqEulderna"
			mdata(MDATA_FIELD) = 1
			mdata(MDATA_TYPE) = MAP_TYPE_DUNGEON
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCBATTLE1
			mdata(MDATA_NO_RENEW) = 1
			mdatan(MDATAN_NAME) = lang("エウダーナ駐屯地", "The Mine")
			put_questtarget
			gdata(GDATA_LEVEL_START_ON) = 7
			mapstartx = 9
			mapstarty = 10
			map_placeplayer
		}
	}
	if ( gdata(GDATA_AREA) == AREA_OBLIVION_PALACE ) {
		if ( gdata(GDATA_LEVEL) == 1 ) {
			mdata(MDATA_MODERATE_CROWD) = 30
			map_initcustom "obli"
			map_placeplayer
			mdata(MDATA_WALL) = 0
			flt
			characreate -1, CREATURE_ID_MAILE_THE_MARIONETTE_SHAMAN, 13, 1
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			cdata(CDATA_AI_CALM, rc) = 3
			repeat 4
				flt
				characreate -1, CREATURE_ID_DEVOTEE_OF_OBLIVION, 13, 7
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			loop
			repeat 2
				flt
				characreate -1, CREATURE_ID_DEVOTEE_OF_OBLIVION, 3, 27
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			loop
			repeat 2
				flt
				characreate -1, CREATURE_ID_DEVOTEE_OF_OBLIVION, 12, 31
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			loop
			repeat 2
				flt
				characreate -1, CREATURE_ID_DEVOTEE_OF_OBLIVION, 22, 31
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			loop
			repeat 15
				flt
				characreate -1, CREATURE_ID_MEMORY_EMPTY_MAN, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			loop
			repeat 15
				flt
				characreate -1, CREATURE_ID_MAD_SCRATCHER, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			loop
		}
	}
	if ( gdata(GDATA_AREA) == AREA_RUOZA ) {
		if ( gdata(GDATA_LEVEL) == 1 ) {
			mdata(MDATA_MODERATE_CROWD) = 20
			map_initcustom "ruoza"
			map_placeplayer
			mdata(MDATA_WALL) = 0
			if ( gdata(GDATA_FLAG_SUB_THE_RESULT_OF_REVENGE) ) {
				cell_featset 23, 22, tile_downstairs, CELL_FEATURE_DOWNSTAIRS, 3
			}
			if ( gdata(GDATA_FLAG_SUB_THE_RESULT_OF_REVENGE) >= 1001 ) {
				cell_featset 17, 19, tile_downstairs, CELL_FEATURE_DOWNSTAIRS, 10
			}
			flt
			characreate -1, CREATURE_ID_BAMBOO_SPROUT, 3, 19
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_CARLA_OF_THE_FORGOTTEN_WORLD, 23, 2
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			if ( gdata(GDATA_FLAG_LEOLD_LOCATION_STATE) >= 3 & gdata(GDATA_FLAG_MAIN) < 365 ) {
				flt
				characreate -1, CREATURE_ID_BLACK_GAUNTLET_LEOLD, 12, 5
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			}
			if ( gdata(STARTING_GDATA_FLAG + 320) > 0 ) {
				flt
				characreate -1, CREATURE_ID_MILOS_OF_THE_FORGOTTEN_WORLD, 22, 2
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
				flt
				characreate -1, CREATURE_ID_HALION_THE_EXTREMIST, 19, 18
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			}
			flt
			characreate -1, CREATURE_ID_HEALER, 4, 3
			cdata(CDATA_ROLE, rc) = ROLE_HEALER
			repeat 10
				flt
				characreate -1, CREATURE_ID_REFUGEE, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			loop
			repeat 5
				dbid = 0
				gosub *fltChara
				characreate -1, dbid, -3, 0
			loop
		}
		if ( gdata(GDATA_LEVEL) == 3 ) {
			mdata(MDATA_TILESET) = 0
			map_initcustom "sqRevenge"
			mdata(MDATA_FIELD) = 2
			mdata(MDATA_TYPE) = MAP_TYPE_DUNGEON
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCPUTI
			mdata(MDATA_NO_RENEW) = 0
			mdatan(MDATAN_NAME) = lang("きのこ達の山", "Hill of mushroom")
			put_questtarget
			gdata(GDATA_LEVEL_START_ON) = 1
			map_placeplayer
		}
		if ( gdata(GDATA_LEVEL) == 10 ) {
			mdata(MDATA_TILESET) = 0
			map_initcustom "sqRevenge2"
			mdata(MDATA_FIELD) = 2
			mdata(MDATA_TYPE) = MAP_TYPE_DUNGEON
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCBOSS4
			mdata(MDATA_NO_RENEW) = 0
			mdatan(MDATAN_NAME) = lang("すぎのこ廃村近辺", "Near the ruins")
			put_questtarget
			gdata(GDATA_LEVEL_START_ON) = 1
			map_placeplayer
		}
	}
	if ( gdata(GDATA_AREA) == AREA_MELKAWN ) {
		if ( gdata(GDATA_LEVEL) == 1 ) {
			mdata(MDATA_MODERATE_CROWD) = 50
			map_initcustom "melkawn1"
			map_placeplayer
			mdata(MDATA_WALL) = 0
			if ( gdata(GDATA_FLAG_VISITED_MELKAWN) > 0 ) {
				flt
				characreate -1, CREATURE_ID_NAGA_THE_THIEF_REPORTER, 11, 6
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			}
			flt
			characreate -1, CREATURE_ID_NAIVE_KYLE, 47, 31
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_CAIM_THE_MAD_RICH, 51, 32
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_LUNE_THE_MAID_CHIEF, 13, 21
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_WIZARD, 48, 28
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_MAGIC, 11
			snmagic cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 8, 20
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_TRADE, 32
			sntrade cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_BARTENDER, 13, 15
			cdata(CDATA_ROLE, rc) = ROLE_BARTENDER
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 48, 17
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_GENERAL, 20
			sngeneral cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 4, 15
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_INN, 8
			sninn cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 20, 10
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_GOODS, 18
			sngoods cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 46, 2
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_BLACKMARKET, 10
			snblack cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 30, 20
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_ARMOR, 22
			snarmor cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 48, 23
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_ARMOR, 12
			snarmor cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 38, 29
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_GENERAL, 20
			sngeneral cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_ELDER, 21, 29
			cdata(CDATA_ROLE, rc) = ROLE_MAYOR
			cdatan(CDATAN_NAME, rc) = lang("メルカーンの" + cdatan(CDATAN_NAME, rc), cdatan(CDATAN_NAME, rc) + " of Melkawn")
			flt
			characreate -1, CREATURE_ID_TRAINER, 31, 13
			cdata(CDATA_ROLE, rc) = ROLE_TRAINER
			sntrainer cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_WIZARD, 32, 16
			cdata(CDATA_ROLE, rc) = ROLE_IDENTIFIER
			flt
			characreate -1, CREATURE_ID_INFORMER, 29, 13
			cdata(CDATA_ROLE, rc) = ROLE_INFORMER
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 5, 30
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_BAKERY, 20
			snbakery cdatan(CDATAN_NAME, rc)
			cdata(CDATA_PIC, rc) = xy2pic(6, 4)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 14, 19
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_FOOD, 30
			snfood cdatan(CDATAN_NAME, rc)
			repeat 4
				flt
				characreate -1, CREATURE_ID_CITIZEN4, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
				flt
				characreate -1, CREATURE_ID_CITIZEN3, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			loop
			repeat 5
				flt
				characreate -1, CREATURE_ID_BOUNTY_HUNTER, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_BOUNTY_HUNTER
			loop
			gosub *client_update
			repeat 20
				dbid = 0
				gosub *fltChara
				characreate -1, dbid, -3, 0
			loop
		}
		if ( gdata(GDATA_LEVEL) == 3 ) {
			mdata(MDATA_TILESET) = 0
			map_initcustom "melkawn2"
			mdata(MDATA_FIELD) = 1
			mdata(MDATA_TYPE) = MAP_TYPE_VILLAGE
			mdata(MDATA_MODERATE_CROWD) = 40
			mdata(MDATA_MUSIC) = MUSICLIST_MCTOWN3
			mdata(MDATA_NO_RENEW) = 0
			mdatan(MDATAN_NAME) = lang("地下賭博場", "Gambling hall")
			map_placeplayer
			flt
			itemcreate -1, ITEM_ID_ALTAR, 15, 17, 0
			inv(INV_ITEM_PARAM1, ci) = 8
			inv(INV_ITEM_PROPERTY, ci) = PROP_NPC
			flt
			characreate -1, CREATURE_ID_ROGUE, 29, 20
			cbitmod CHARA_BIT_SANDBAG, rc, 1
			cdatan(CDATAN_NAME, rc) = lang("負け犬", "loser")
			flt
			characreate -1, CREATURE_ID_LEND_THE_TAKER, 3, 3
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_MOYER, 10
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 9, 4
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_BLACKMARKET, 10
			snblack cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 2, 4
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_BLACKMARKET, 10
			snblack cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 22, 20
			cdata(CDATA_ROLE, rc) = ROLE_SLAVER
			cdatan(CDATAN_NAME, rc) = lang("謎の奴隷商人", "The slave master")
			flt
			characreate -1, CREATURE_ID_ARENA_MASTER, 29, 11
			cdata(CDATA_ROLE, rc) = ROLE_ARENA_MASTER
			repeat 30
				dbid = 0
				gosub *fltChara
				characreate -1, dbid, -3, 0
			loop
		}
	}
	if ( gdata(GDATA_AREA) == AREA_KURUALM ) {
		if ( gdata(GDATA_LEVEL) == 1 ) {
			mdata(MDATA_MODERATE_CROWD) = 40
			map_initcustom "kurualm"
			map_placeplayer
			mdata(MDATA_WALL) = 0
			if ( gdata(GDATA_FLAG_SUB_LAW_OF_NINJAS) < 1000 ) {
				flt
				characreate -1, CREATURE_ID_EILA_THE_FUGITIVE_KUNOICHI, 69, 38
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			}
			if ( gdata(GDATA_FLAG_SUB_LAW_OF_NINJAS) >= 1000 ) {
				flt
				characreate -1, CREATURE_ID_NEW_CITIZEN, 21, 34
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			}
			flt
			characreate -1, CREATURE_ID_ZERNARD_THE_CAPABLE_MERCENARY, 10, 33
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_MILOS_OF_THE_FORGOTTEN_WORLD, 25, 3
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_CLEANER, 23, 21
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_CLEANER, 8, 11
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_BARD, 39, 14
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 63, 8
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_TRADE, 32
			sntrade cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 48, 15
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_ARMOR, 22
			snarmor cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 48, 19
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_GENERAL, 10
			sngeneral cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 36, 2
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_BLACKMARKET, 10
			snblack cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 2, 12
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_FOOD, 10
			snfood cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_WIZARD, 58, 5
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_MAGIC, 11
			snmagic cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 48, 4
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_INN, 8
			sninn cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_BARTENDER, 36, 17
			cdata(CDATA_ROLE, rc) = ROLE_BARTENDER
			flt
			characreate -1, CREATURE_ID_ARENA_MASTER, 11, 16
			cdata(CDATA_ROLE, rc) = ROLE_ARENA_MASTER
			flt
			characreate -1, CREATURE_ID_ELDER, 42, 17
			cdata(CDATA_ROLE, rc) = ROLE_MAYOR
			cdatan(CDATAN_NAME, rc) = lang("クルアルムの" + cdatan(CDATAN_NAME, rc), cdatan(CDATAN_NAME, rc) + " of Kurualm")
			flt
			characreate -1, CREATURE_ID_TRAINER, 53, 5
			cdata(CDATA_ROLE, rc) = ROLE_TRAINER
			sntrainer cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_WIZARD, 56, 6
			cdata(CDATA_ROLE, rc) = ROLE_IDENTIFIER
			flt
			characreate -1, CREATURE_ID_INFORMER, 54, 7
			cdata(CDATA_ROLE, rc) = ROLE_INFORMER
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 67, 3
			cdata(CDATA_ROLE, rc) = ROLE_HORSE_MASTER
			cdatan(CDATAN_NAME, rc) = lang("馬屋の" + cdatan(CDATAN_NAME, rc), sncnv(cdatan(CDATAN_NAME, rc)) + "the horse master")
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 45, 28
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_BAKERY, 20
			snbakery cdatan(CDATAN_NAME, rc)
			cdata(CDATA_PIC, rc) = xy2pic(6, 4)
			repeat 2
				flt
				characreate -1, CREATURE_ID_CITIZEN4, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
				flt
				characreate -1, CREATURE_ID_CITIZEN3, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			loop
			repeat 4
				flt
				characreate -1, CREATURE_ID_SAILOR, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			loop
			repeat 5
				flt
				characreate -1, CREATURE_ID_BOUNTY_HUNTER, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_BOUNTY_HUNTER
			loop
			flt
			characreate -1, CREATURE_ID_CAPTAIN, 44, 31
			cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			gosub *client_update
			repeat 20
				gosub *fltChara
				characreate -1, CREATURE_ID_BUG, -3, 0
			loop
		}
		if ( gdata(GDATA_LEVEL) == 3 ) {
			mdata(MDATA_TILESET) = 0
			map_initcustom "sqPirate"
			mdata(MDATA_FIELD) = 1
			mdata(MDATA_TYPE) = MAP_TYPE_DUNGEON
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCBOSS3
			mdata(MDATA_NO_RENEW) = 1
			mdatan(MDATAN_NAME) = lang("海賊船内部", "Pirate ship")
			put_questtarget
			gdata(GDATA_LEVEL_START_ON) = 7
			mapstartx = 4
			mapstarty = 11
			map_placeplayer
		}
		if ( gdata(GDATA_LEVEL) == 5 ) {
			mdata(MDATA_TILESET) = 0
			map_initcustom "Ninjya"
			mdata(MDATA_FIELD) = 1
			mdata(MDATA_TYPE) = MAP_TYPE_DUNGEON
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCBOSS3
			mdata(MDATA_NO_RENEW) = 1
			mdatan(MDATAN_NAME) = lang("忍者屋敷", "Ninja House")
			put_questtarget
			gdata(GDATA_LEVEL_START_ON) = 7
			mapstartx = 23
			mapstarty = 21
			map_placeplayer
		}
	}
	if ( gdata(GDATA_AREA) == AREA_VALM ) {
		if ( gdata(GDATA_LEVEL) == 1 ) {
			mdata(MDATA_MODERATE_CROWD) = 35
			map_initcustom "valm"
			map_placeplayer
			mdata(MDATA_WALL) = 0
			flt
			itemcreate -1, ITEM_ID_ALTAR, 35, 1, 0
			inv(INV_ITEM_PARAM1, ci) = 4
			inv(INV_ITEM_PROPERTY, ci) = PROP_NPC
			if ( gdata(GDATA_FLAG_VISITED_VALM) > 0 ) {
				flt
				characreate -1, CREATURE_ID_RATIN_THE_FIGHTER_REPORTER, 8, 13
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			}
			if ( gdata(STARTING_GDATA_FLAG + 275) >= 4 | gdata(GDATA_FLAG_MAIN) < 396 ) {
				flt
				characreate -1, CREATURE_ID_SNAIL_THE_ANDROID_RIDER, 41, 9
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			}
			if ( gdata(STARTING_GDATA_FLAG + 275) >= 4 | gdata(GDATA_FLAG_MAIN) < 396 ) {
				flt
				characreate -1, CREATURE_ID_RECONCILED_CLEANER, 8, 7
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			}
			flt
			characreate -1, CREATURE_ID_LEIKI, 4, 18
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 40, 18
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_TRADE, 12
			sntrade cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 41, 22
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_GOODS, 20
			sngoods cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 11, 24
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_FOOD, 10
			snfood cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 34, 9
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_INN, 14
			sninn cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_ELDER, 24, 14
			cdata(CDATA_ROLE, rc) = ROLE_MAYOR
			cdatan(CDATAN_NAME, rc) = lang("ヴァルムの" + cdatan(CDATAN_NAME, rc), cdatan(CDATAN_NAME, rc) + " of Valm")
			flt
			characreate -1, CREATURE_ID_TRAINER, 32, 23
			cdata(CDATA_ROLE, rc) = ROLE_TRAINER
			sntrainer cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_WIZARD, 35, 22
			cdata(CDATA_ROLE, rc) = ROLE_IDENTIFIER
			flt
			characreate -1, CREATURE_ID_INFORMER, 34, 25
			cdata(CDATA_ROLE, rc) = ROLE_INFORMER
			repeat 2
				flt
				characreate -1, CREATURE_ID_CITIZEN4, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
				flt
				characreate -1, CREATURE_ID_CITIZEN3, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			loop
			repeat 4
				flt
				characreate -1, CREATURE_ID_FISHERMAN, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			loop
			repeat 2
				flt
				characreate -1, CREATURE_ID_BOUNTY_HUNTER, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_BOUNTY_HUNTER
			loop
			repeat 4
				flt
				characreate -1, CREATURE_ID_SWIMMER, -3, 0
			loop
			gosub *client_update
			repeat 11
				gosub *fltChara
				characreate -1, CREATURE_ID_BUG, -3, 0
			loop
		}
		if ( gdata(GDATA_LEVEL) == 3 ) {
			map_initcustom "abyss"
			mdata(MDATA_FIELD) = 1
			mdata(MDATA_TYPE) = MAP_TYPE_VILLAGE
			mdata(MDATA_MODERATE_CROWD) = 14
			mdata(MDATA_MUSIC) = MUSICLIST_MCRUIN
			mdata(MDATA_CAN_SAVE) = 0
			mdata(MDATA_NO_RENEW) = 0
			mdatan(MDATAN_NAME) = lang("九頭竜の城", "Deep-Sea Castle")
			gdata(GDATA_LEVEL_START_ON) = 7
			mapstartx = 17
			mapstarty = 24
			map_placeplayer
			flt
			characreate -1, CREATURE_ID_MIZUKI_THE_ABYSS_PRINCESS, 17, 9
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_LEIKI, 16, 21
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			repeat 6
				flt
				characreate -1, CREATURE_ID_ABYSS_DWELLER, -3, 0
			loop
			repeat 3
				flt
				characreate -1, CREATURE_ID_ABYSS_ANIMAL, -3, 0
				flt
				characreate -1, CREATURE_ID_GREAT_RACE_OF_YITH, -3, 0
				if ( stat != 0 ) {
					cdata(CDATA_AI_CALM, rc) = 2
					cdata(CDATA_RELATION, rc) = -1
					cdata(CDATA_RELATION_ORG, rc) = -1
					cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
				}
			loop
		}
		if ( gdata(GDATA_LEVEL) == 30 ) {
			map_initcustom "abyss2"
			mdata(MDATA_FIELD) = 1
			mdata(MDATA_TYPE) = MAP_TYPE_VILLAGE
			mdata(MDATA_MODERATE_CROWD) = 14
			mdata(MDATA_MUSIC) = MUSICLIST_MCRUIN
			mdata(MDATA_NO_RENEW) = 1
			mdatan(MDATAN_NAME) = lang("狂気列島", "Island in madness")
			gdata(GDATA_LEVEL_START_ON) = 7
			mapstartx = 18
			mapstarty = 65
			map_placeplayer
			flt
			characreate -1, CREATURE_ID_NINE_HEAD_DRAGON_THE_ABYSS, 17, 4
			flt
			characreate -1, CREATURE_ID_MIZUKI_THE_ABYSS_PRINCESS, 17, 63
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_FISHERMAN, 13, 21
			if ( stat != 0 ) {
				cdata(CDATA_SANITY, rc) = 100
			}
			flt
			characreate -1, CREATURE_ID_FISHERMAN, 15, 60
			if ( stat != 0 ) {
				cdata(CDATA_SANITY, rc) = 100
			}
			flt
			characreate -1, CREATURE_ID_FISHERMAN, 12, 55
			if ( stat != 0 ) {
				cdata(CDATA_SANITY, rc) = 100
			}
			flt
			characreate -1, CREATURE_ID_FISHERMAN, 25, 63
			if ( stat != 0 ) {
				cdata(CDATA_SANITY, rc) = 100
			}
			repeat 3
				characreate -1, CREATURE_ID_JELLYFISH_KRAKEN, 13, 21
			loop
			repeat 3
				characreate -1, CREATURE_ID_JELLYFISH_KRAKEN, 27, 27
			loop
			repeat 3
				characreate -1, CREATURE_ID_JELLYFISH_KRAKEN, 19, 36
			loop
		}
	}
	if ( gdata(GDATA_AREA) == AREA_MELUGAS ) {
		if ( gdata(GDATA_LEVEL) == 1 ) {
			mdata(MDATA_MODERATE_CROWD) = 35
			map_initcustom "melugas"
			map_placeplayer
			mdata(MDATA_WALL) = 0
			if ( gdata(GDATA_FLAG_SUB_JUERES_IMPERTINENCE) ) {
				cell_featset 8, 21, tile_downstairs, CELL_FEATURE_DOWNSTAIRS, 3
			}
			flt
			characreate -1, CREATURE_ID_HEINRICH_THE_ARMORED_GENERAL, 15, 8
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_SECURITY_OFFICER_ORVILLE, 10, 24
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_LEAD_DEVELOPER_DR_GAVELA, 40, 8
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			if ( gdata(GDATA_FLAG_MAIN) >= 390 ) {
				flt
				characreate -1, CREATURE_ID_YERLESWOOD_NEO, 26, 18
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			}
			if ( gdata(GDATA_FLAG_MAIN) >= 480 ) {
				flt
				characreate -1, CREATURE_ID_MELUGAST_TYPEM, 26, 23
				if ( stat != 0 ) {
					cdata(CDATA_AI_CALM, rc) = 3
					cdata(CDATA_RELATION, rc) = -1
					cdata(CDATA_RELATION_ORG, rc) = -1
					cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
				}
			}
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 33, 12
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_TRADE, 22
			sntrade cdatan(CDATAN_NAME, rc)
			cdata(CDATA_PIC, rc) = xy2pic(19, 7)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 37, 13
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_GENERAL, 10
			sngeneral cdatan(CDATAN_NAME, rc)
			cdata(CDATA_PIC, rc) = xy2pic(19, 7)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 37, 25
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_MAGIC, 20
			snmagic cdatan(CDATAN_NAME, rc)
			cdata(CDATA_PIC, rc) = xy2pic(19, 7)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 17, 28
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_FOOD, 10
			snfood cdatan(CDATAN_NAME, rc)
			cdata(CDATA_PIC, rc) = xy2pic(19, 7)
			flt
			characreate -1, CREATURE_ID_BARTENDER, 34, 14
			cdata(CDATA_ROLE, rc) = ROLE_BARTENDER
			flt
			characreate -1, CREATURE_ID_ARENA_MASTER, 41, 31
			cdata(CDATA_ROLE, rc) = ROLE_ARENA_MASTER
			flt
			characreate -1, CREATURE_ID_MASTER_OF_PET_ARENA, 37, 34
			cdata(CDATA_ROLE, rc) = ROLE_PET_ARENA_MASTER
			flt
			characreate -1, CREATURE_ID_TRAINER, 38, 13
			cdata(CDATA_ROLE, rc) = ROLE_TRAINER
			sntrainer cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_WIZARD, 42, 15
			cdata(CDATA_ROLE, rc) = ROLE_IDENTIFIER
			flt
			characreate -1, CREATURE_ID_INFORMER, 40, 16
			cdata(CDATA_ROLE, rc) = ROLE_INFORMER
			flt
			characreate -1, CREATURE_ID_HEALER, 39, 26
			cdata(CDATA_ROLE, rc) = ROLE_HEALER
			repeat 6
				flt
				characreate -1, CREATURE_ID_YERLES_LATEST_OUTFIT_SOLDIER, -3, 0
				if ( stat != 0 ) {
					cdata(CDATA_AI_CALM, rc) = 2
					cdata(CDATA_RELATION, rc) = 0
					cdata(CDATA_RELATION_ORG, rc) = 0
					cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
				}
				flt
				characreate -1, CREATURE_ID_PALMIAN_ELITE_SOLDIER, -3, 0
				if ( stat != 0 ) {
					cdata(CDATA_AI_CALM, rc) = 2
					cdata(CDATA_RELATION, rc) = 0
					cdata(CDATA_RELATION_ORG, rc) = 0
					cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
				}
			loop
			repeat 5
				flt
				characreate -1, CREATURE_ID_GUARD2, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_GUARD
			loop
			gosub *client_update
			repeat 10
				gosub *fltChara
				characreate -1, CREATURE_ID_BUG, -3, 0
			loop
		}
		if ( gdata(GDATA_LEVEL) == 3 ) {
			mdata(MDATA_TILESET) = 0
			map_initcustom "sqJuere"
			mdata(MDATA_FIELD) = 1
			mdata(MDATA_TYPE) = MAP_TYPE_VILLAGE
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCDUNGEON9
			mdata(MDATA_NO_RENEW) = 1
			mdatan(MDATAN_NAME) = lang("地下通路", "Underground passage")
			put_questtarget
			map_placeplayer
		}
	}
	if ( gdata(GDATA_AREA) == AREA_ARCBELC ) {
		if ( gdata(GDATA_LEVEL) == 1 ) {
			mdata(MDATA_MODERATE_CROWD) = 30
			map_initcustom "arcbelc"
			map_placeplayer
			mdata(MDATA_WALL) = 0
			if ( gdata(GDATA_FLAG_VISITED_ARCBELC) > 0 ) {
				flt
				characreate -1, CREATURE_ID_LENAS_THE_MAGE_REPORTER, 27, 13
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			}
			flt
			characreate -1, CREATURE_ID_MEFAN_THE_BARD, 11, 17
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_RICH_PERSON_STOKE, 25, 10
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_STOKE, 100
			flt
			characreate -1, CREATURE_ID_ARMA_THE_TOUR_GUIDE, 10, 7
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_CLEANER, 19, 16
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_CLEANER, 36, 20
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_BARD, 27, 4
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_BARD, 3, 31
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_BARTENDER, 26, 9
			cdata(CDATA_ROLE, rc) = ROLE_BARTENDER
			flt
			characreate -1, CREATURE_ID_HEALER, 16, 29
			cdata(CDATA_ROLE, rc) = ROLE_HEALER
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 21, 8
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_GENERAL, 25
			sngeneral cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 28, 23
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_INN, 12
			sninn cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 11, 21
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_INN, 8
			sninn cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 29, 32
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_BAKERY, 9
			snbakery cdatan(CDATAN_NAME, rc)
			cdata(CDATA_PIC, rc) = xy2pic(6, 4)
			flt
			characreate -1, CREATURE_ID_WIZARD, 34, 13
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_MAGIC, 31
			snmagic cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 12, 31
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_TRADE, 32
			sntrade cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 14, 3
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_FISH, 15
			snfish cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_ELDER, 25, 4
			cdata(CDATA_ROLE, rc) = ROLE_MAYOR
			cdatan(CDATAN_NAME, rc) = lang("アーク・ベルクの" + cdatan(CDATAN_NAME, rc), cdatan(CDATAN_NAME, rc) + " of Arcbelc")
			flt
			characreate -1, CREATURE_ID_TRAINER, 36, 5
			cdata(CDATA_ROLE, rc) = ROLE_TRAINER
			sntrainer cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_WIZARD, 35, 7
			cdata(CDATA_ROLE, rc) = ROLE_IDENTIFIER
			flt
			characreate -1, CREATURE_ID_INFORMER, 34, 5
			cdata(CDATA_ROLE, rc) = ROLE_INFORMER
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 20, 4
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_MOUNTAIN2, 50
			cdatan(CDATAN_NAME, rc) = lang("おみやげ屋の" + cdatan(CDATAN_NAME, rc), sncnv(cdatan(CDATAN_NAME, rc)) + "the souvenir vendor")
			flt
			characreate -1, CREATURE_ID_TOURIST, 8, 8
			flt
			characreate -1, CREATURE_ID_TOURIST, 7, 7
			flt
			characreate -1, CREATURE_ID_TOURIST, 11, 10
			flt
			characreate -1, CREATURE_ID_TOURIST, 11, 7
			flt
			characreate -1, CREATURE_ID_TOURIST, 12, 9
			flt
			characreate -1, CREATURE_ID_TOURIST, 11, 13
			flt
			characreate -1, CREATURE_ID_TOURIST, 18, 29
			repeat 3
				flt
				characreate -1, CREATURE_ID_CITIZEN, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
				flt
				characreate -1, CREATURE_ID_CITIZEN2, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			loop
			repeat 2
				flt
				characreate -1, CREATURE_ID_BOUNTY_HUNTER, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_BOUNTY_HUNTER
			loop
			gosub *client_update
			repeat 10
				dbid = 0
				gosub *fltChara
				characreate -1, dbid, -3, 0
			loop
		}
	}
	if ( gdata(GDATA_AREA) == AREA_LUDUS ) {
		if ( gdata(GDATA_LEVEL) == 1 ) {
			mdata(MDATA_MODERATE_CROWD) = 30
			map_initcustom "ludus"
			map_placeplayer
			mdata(MDATA_WALL) = 0
			if ( gdata(GDATA_FLAG_SUB_H_SISTER) ) {
				cell_featset 57, 10, tile_downstairs, CELL_FEATURE_DOWNSTAIRS, 3
			}
			flt
			characreate -1, CREATURE_ID_SIRAHA_THE_WHITE_CLOTH, 37, 11
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_OLDER_SISTER2, 53, 9
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_BANKRUPT_GUO, 21, 50
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 8, 3
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_GENERAL, 30
			sngeneral cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 12, 3
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_INN, 8
			sninn cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 3, 4
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_GOODS, 28
			sngoods cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_SHOPKEEPER, 17, 6
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_TRADE, 12
			sntrade cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_ELDER, 40, 11
			cdata(CDATA_ROLE, rc) = ROLE_MAYOR
			cdatan(CDATAN_NAME, rc) = lang("ルードゥスの" + cdatan(CDATAN_NAME, rc), cdatan(CDATAN_NAME, rc) + " of Ludus")
			flt
			characreate -1, CREATURE_ID_TRAINER, 31, 11
			cdata(CDATA_ROLE, rc) = ROLE_TRAINER
			sntrainer cdatan(CDATAN_NAME, rc)
			flt
			characreate -1, CREATURE_ID_WIZARD, 30, 12
			cdata(CDATA_ROLE, rc) = ROLE_IDENTIFIER
			flt
			characreate -1, CREATURE_ID_INFORMER, 31, 13
			cdata(CDATA_ROLE, rc) = ROLE_INFORMER
			repeat 3
				flt
				characreate -1, CREATURE_ID_CITIZEN4, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
				flt
				characreate -1, CREATURE_ID_CITIZEN3, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_CITIZEN
			loop
			repeat 2
				flt
				characreate -1, CREATURE_ID_BOUNTY_HUNTER, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_BOUNTY_HUNTER
			loop
			gosub *client_update
			repeat 11
				dbid = 0
				gosub *fltChara
				characreate -1, dbid, -3, 0
			loop
		}
		if ( gdata(GDATA_LEVEL) == 3 ) {
			mdata(MDATA_TILESET) = 0
			map_initcustom "sqHitman"
			mdata(MDATA_FIELD) = 1
			mdata(MDATA_TYPE) = MAP_TYPE_DUNGEON
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCBATTLE2
			mdata(MDATA_NO_RENEW) = 1
			mdatan(MDATAN_NAME) = lang("地下室", "basement")
			put_questtarget
			map_placeplayer
		}
		if ( gdata(GDATA_LEVEL) == 5 ) {
			mdata(MDATA_TILESET) = MAP_TILESET_DUNGEON
			map_initcustom "ane"
			mdata(MDATA_FIELD) = MAP_FIELD_INDOOR
			mdata(MDATA_TYPE) = MAP_TYPE_VILLAGE
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCCHURCH
			mdata(MDATA_NO_RENEW) = 0
			mdatan(0) = lang("姉の教会", "the Church of Older Sister")
			flt
			characreate -1, CREATURE_ID_SIST_THE_OLDER_SISTER, 20, 3
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			if ( stat != 0 ) {
				cdata(CDATA_AI_CALM, rc) = 3
			}
			flt
			characreate -1, CREATURE_ID_OLDER_SISTER2, 13, 36
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_OLDER_SISTER2, 33, 2
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_OLDER_SISTER2, 9, 1
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_OLDER_SISTER2, 26, 24
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_YOUNGER_SISTER, 7, 42
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			if ( stat != 0 ) {
				cdata(CDATA_AI_CALM, rc) = 3
			}
			flt
			characreate -1, CREATURE_ID_YOUNG_LADY, 33, 42
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			if ( stat != 0 ) {
				cdata(CDATA_AI_CALM, rc) = 3
			}
			repeat 6
				flt
				characreate -1, CREATURE_ID_YOUNG_LADY, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			loop
			repeat 8
				flt
				characreate -1, CREATURE_ID_SILVER_CAT, -3, 0
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			loop
			map_placeplayer
		}
	}
	if ( gdata(GDATA_AREA) == AREA_MAID_MANSION ) {
		if ( gdata(GDATA_LEVEL) == 1 ) {
			mdata(MDATA_MODERATE_CROWD) = 20
			map_initcustom "maidhouse"
			mdata(MDATA_MUSIC) = MUSICLIST_MCMEMORY
			mdata(MDATA_NO_RENEW) = 0
			map_placeplayer
			mdata(MDATA_WALL) = 0
			flt
			itemcreate -1, ITEM_ID_STATUE_YACATECT, 19, 5, 0
			flt
			characreate -1, CREATURE_ID_LUNE_THE_MAID_CHIEF, 19, 17
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			flt
			characreate -1, CREATURE_ID_MAIDSANN, 7, 17
			if ( stat != 0 ) {
				cdata(CDATA_AI_CALM, rc) = 3
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_BARTENDER
			}
			flt
			characreate -1, CREATURE_ID_MAIDSANN, 7, 21
			if ( stat != 0 ) {
				cdata(CDATA_AI_CALM, rc) = 3
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_TRAINER
			}
			flt
			characreate -1, CREATURE_ID_MAIDSANN, 26, 21
			if ( stat != 0 ) {
				cdata(CDATA_AI_CALM, rc) = 3
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_IDENTIFIER
			}
			flt
			characreate -1, CREATURE_ID_MAIDSANN, 27, 17
			if ( stat != 0 ) {
				cdata(CDATA_AI_CALM, rc) = 3
				cdata(CDATA_RELATION, rc) = 0
				cdata(CDATA_RELATION_ORG, rc) = 0
				cdata(CDATA_ROLE, rc) = ROLE_INFORMER
			}
			repeat 10
				flt
				characreate -1, CREATURE_ID_MAIDSANN, -3, 0
			loop
		}
		if ( gdata(GDATA_LEVEL) == 3 ) {
			mdata(MDATA_TILESET) = 0
			map_initcustom "goki"
			mdata(MDATA_FIELD) = 1
			mdata(MDATA_TYPE) = MAP_TYPE_DUNGEON
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCBOSS4
			mdata(MDATA_NO_RENEW) = 0
			mdatan(MDATAN_NAME) = lang("悪魔の巣", "basement")
			put_questtarget
			gdata(GDATA_LEVEL_START_ON) = 7
			mapstartx = 16
			mapstarty = 28
			map_placeplayer
		}
	}
	if ( gdata(GDATA_AREA) == AREA_MELKA_FOREST ) {
		if ( gdata(GDATA_LEVEL) == adata(ADATA_MAX_LEVEL, gdata(GDATA_AREA)) ) {
			map_initcustom "WetF"
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCLASTBOSS
			map_placeplayer
		}
		else {
			gosub *map_randomDungeon
		}
	}
	if ( gdata(GDATA_AREA) == AREA_GRAVITY_VALLEY ) {
		if ( gdata(GDATA_LEVEL) == adata(ADATA_MAX_LEVEL, gdata(GDATA_AREA)) ) {
			map_initcustom "wgrava"
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCLASTBOSS
			map_placeplayer
		}
		else {
			gosub *map_randomDungeon
		}
	}
	if ( gdata(GDATA_AREA) == AREA_MOUNTAIN_RUIN ) {
		if ( gdata(GDATA_LEVEL) == adata(ADATA_MAX_LEVEL, gdata(GDATA_AREA)) ) {
			map_initcustom "wfoot"
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCLASTBOSS
			map_placeplayer
		}
		else {
			gosub *map_randomDungeon
		}
	}
	if ( gdata(GDATA_AREA) == AREA_CHAOS_SHRINE ) {
		if ( gdata(GDATA_LEVEL) == adata(ADATA_MAX_LEVEL, gdata(GDATA_AREA)) ) {
			map_initcustom "Ssil"
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCLASTBOSS
			map_placeplayer
		}
		else {
			gosub *map_randomDungeon
		}
	}
	if ( gdata(GDATA_AREA) == AREA_VALLEY_HADES ) {
		if ( gdata(GDATA_LEVEL) == 70 ) {
			map_initcustom "valley1"
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCDUNGEON8
			map_placeplayer
		}
		if ( gdata(GDATA_LEVEL) == 71 ) {
			map_initcustom "valley2"
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCLASTBOSS
			map_placeplayer
		}
	}
	if ( gdata(GDATA_AREA) == AREA_MACHINERY_FORT ) {
		if ( gdata(GDATA_LEVEL) == adata(ADATA_MAX_LEVEL, gdata(GDATA_AREA)) ) {
			map_initcustom "base"
			mdata(MDATA_MODERATE_CROWD) = 0
			mdata(MDATA_MUSIC) = MUSICLIST_MCDUNGEON7
			map_placeplayer
		}
		else {
			gosub *map_randomDungeon
		}
	}
	if ( gdata(GDATA_AREA) == AREA_DESTRUCTION_FORT ) {
		map_initcustom "god"
		mdata(MDATA_MODERATE_CROWD) = 0
		mdata(MDATA_MUSIC) = MUSICLIST_MCBOSS3
		flt
		characreate -1, CREATURE_ID_SIVA_THE_DESTRUCTION, 12, 14
		map_placeplayer
	}
	if ( gdata(GDATA_AREA) == AREA_WEAPONS_FORT ) {
		map_initcustom "god"
		mdata(MDATA_MODERATE_CROWD) = 0
		mdata(MDATA_MUSIC) = MUSICLIST_MCBOSS3
		flt
		characreate -1, CREATURE_ID_YERLESWOOD_THE_SAVAGE_MACHINE, 12, 14
		map_placeplayer
	}
	if ( gdata(GDATA_AREA) == AREA_HELL_FORT ) {
		map_initcustom "god"
		mdata(MDATA_MUSIC) = MUSICLIST_MCBOSS3
		mdata(MDATA_MODERATE_CROWD) = 0
		flt
		characreate -1, CREATURE_ID_ULZASSIL_THE_DEAD_EMPEROR, 12, 14
		map_placeplayer
	}
	if ( gdata(GDATA_AREA) == AREA_DOJO ) {
		map_initcustom "Doujyou"
		mdata(MDATA_MODERATE_CROWD) = 0
		mdata(MDATA_MUSIC) = MUSICLIST_MCJAPAN
		flt
		characreate -1, CREATURE_ID_NAZUNA_THE_INSTRUCTOR, 12, 11
		cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		map_placeplayer
	}
	if ( gdata(GDATA_AREA) == AREA_ANCIENT_GARDEN ) {
		mdata(MDATA_MODERATE_CROWD) = 0
		map_initcustom "yamaniwa"
		mdata(MDATA_MUSIC) = MUSICLIST_MCRUIN
		mdata(MDATA_NO_RENEW) = 1
		if ( gdata(GDATA_FLAG_MAIN) >= 368 ) {
			flt
			characreate -1, CREATURE_ID_MELUGAST_TYPE0_THE_DIMENSION_DRIVER, 5, 29
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
		}
		map_placeplayer
		mdata(MDATA_WALL) = 0
	}
	map_setfog
	proc "map_init:1"
	if ( gdata(GDATA_AREA) == AREA_PET_ARENA | dbg_revealmap | gdata(GDATA_AREA) == AREA_ARENA | mdata(MDATA_TYPE) == MAP_TYPE_TOWN | mdata(MDATA_TYPE) == MAP_TYPE_WORLD | mdata(MDATA_TYPE) == MAP_TYPE_HOME | mdata(MDATA_TYPE) == MAP_TYPE_VILLAGE | gdata(GDATA_AREA) == AREA_SHELTER | gdata(GDATA_AREA) == AREA_EMBASSY | gdata(GDATA_AREA) == AREA_MIROK_WORKSHOP | gdata(GDATA_AREA) == AREA_ABODE_OF_WITCH | gdata(GDATA_AREA) == AREA_DEVIL_CAPE | gdata(GDATA_AREA) == AREA_SHOW_HOUSE | (gdata(GDATA_AREA) == AREA_QUEST & gdata(GDATA_QUEST) == QUEST_TYPE_PARTY) ) {
		repeat mdata(MDATA_HEIGHT)
			y = cnt
			repeat mdata(MDATA_WIDTH)
				map(cnt, y, 2) = map(cnt, y, 0)
			loop
		loop
	}
	if ( mapupdate == 1 ) {
		if ( mdata(MDATA_TYPE) == MAP_TYPE_WORLD ) {
			f = 0
			i = 0
			repeat 500 - 300, 300
				p = cnt
				if ( adata(ADATA_X, cnt) == 0 | adata(ADATA_Y, cnt) == 0 | adata(ADATA_ID, cnt) == AREA_NONE ) {
					continue
				}
				repeat 300
					if ( adata(ADATA_X, cnt) == 0 | adata(ADATA_Y, cnt) == 0 | adata(ADATA_ID, cnt) == AREA_NONE ) {
						continue
					}
					if ( adata(ADATA_PARENT, cnt) != gdata(GDATA_WORLD) ) {
						continue
					}
					if ( prevsekai != 0 ) {
						continue
					}
					if ( adata(ADATA_X, p) == adata(ADATA_X, cnt) ) {
						if ( adata(ADATA_Y, p) == adata(ADATA_Y, cnt) ) {
							repeat
								await
								dx = limit(rnd(cnt / 4 + 1) + 1, 1, mdata(MDATA_WIDTH))
								dy = limit(rnd(cnt / 4 + 1) + 1, 1, mdata(MDATA_HEIGHT))
								x = adata(ADATA_X, p) + rnd(dx) - rnd(dx)
								y = adata(ADATA_Y, p) + rnd(dy) - rnd(dy)
								if ( x < 0 | y < 0 | x >= mdata(MDATA_WIDTH) | y >= mdata(MDATA_HEIGHT) ) {
									continue
								}
								if ( range_tileRoad(map(x, y, 0)) ) {
									continue
								}
								if ( map(x, y, 0) > 16 ) {
									continue
								}
								i = 1
								repeat 300
									if ( adata(ADATA_X, cnt) == 0 | adata(ADATA_Y, cnt) == 0 | adata(ADATA_ID, cnt) == AREA_NONE ) {
										continue
									}
									if ( x == adata(ADATA_X, cnt) ) {
										if ( y == adata(ADATA_Y, cnt) ) {
											i = 0
											break
										}
									}
								loop
								if ( i == 0 ) {
									continue
								}
								dialog lang("ワールド" + prevworld + "からワールド" + gdata(GDATA_WORLD) + "へ移動に伴い、エリア" + adata(ADATA_PARENT, p) + "が再配置されます。" + mapname(p) + "の位置は、x" + adata(ADATA_X, p) + ":y" + adata(ADATA_Y, p) + "からx" + x + ":y" + y + "に変更されます。", "The location of " + mapname(p) + " has been changed from x" + adata(ADATA_X, p) + ":y" + adata(ADATA_Y, p) + " to x" + x + ":y" + y + ".")
								adata(ADATA_X, p) = x
								adata(ADATA_Y, p) = y
								f++
								break
							loop
						}
					}
				loop
			loop
			prevsekai = 0
			gosub *world_refresh
		}
		mapupdate = 0
		repeat MAX_CHARA_TOTAL
			if ( cdata(CDATA_EXIST, cnt) == CHAR_STATE_DEAD ) {
				continue
			}
			if ( cdata(CDATA_ROLE, cnt) >= ROLE_SHOP_MIN & cdata(CDATA_ROLE, cnt) < ROLE_GUEST_MIN | cdata(CDATA_ROLE, cnt) == ROLE_GUEST_MERCHANT ) {
				cnt2 = cnt
				repeat maxnpcbk
					if ( cdata(CDATA_ROLE, cnt2) == rolebk(0, cnt) ) {
						cdata(CDATA_ROLE_SHOP_LEVEL, cnt2) = rolebk(1, cnt)
						rolebk(0, cnt) = 0, 0
						break
					}
				loop
			}
		loop
		repeat maxmedal
			cell_featset medalbk(0, cnt), medalbk(1, cnt), tile_hidden, CELL_FEATURE_SMALL_MEDAL
		loop
	}
	randomize
	mdata(MDATA_VERSION) = gdata(GDATA_MAP_VERSION)
	mdata(MDATA_VERSION_FIX1) = 1
*map_preBegin
	proc "map_preBegin"
	if ( gdata(GDATA_AREA) == AREA_NORTH_TYRIS | gdata(GDATA_AREA) == AREA_SOUTH_TYRIS | gdata(GDATA_AREA) == AREA_LOST_YLVA | gdata(GDATA_AREA) == AREA_AIMWELL ) {
		if ( sekaikousin == 100 ) {
			gsel 2
			folder = exedir + "user\\graphic\\"
			dirlist buff, folder + "map_*.bmp"
			notesel buff
			repeat stat
				noteget file, cnt
				p = int(strmid(file, 4, instr(file, 4, "."))) + 329
				pos p \ 34 * inf_tiles, p / 34 * inf_tiles
				picload folder + file, 1
			loop
			gsel 0
			sekaikousin = 0
			gosub *world_refresh
		}
	}
	if ( gdata(GDATA_AREA) == AREA_NORTH_TYRIS ) {
		if ( gdata(GDATA_FLAG_MAIN) == 180 ) {
			cdata(CDATA_X, CHARA_PLAYER) = adata(ADATA_X, AREA_PORT_KAPUL)
			cdata(CDATA_Y, CHARA_PLAYER) = adata(ADATA_Y, AREA_PORT_KAPUL)
			gdata(GDATA_RUN_DIR) = 1
			gdata(GDATA_LAST_EDGE_X) = -1
			msg_newline
			msgtemp = lang("  三年の月日が経ち、あなたは再びノースティリスに降り立った。", "  Three years have passed. You set foot onto the cool soil of North Tyris once more.")
		}
	}
	if ( gdata(GDATA_AREA) == AREA_SOUTH_TYRIS ) {
		if ( gdata(GDATA_FLAG_MAIN) == 345 ) {
			cdata(CDATA_X, CHARA_PLAYER) = adata(ADATA_X, AREA_MELUGAS)
			cdata(CDATA_Y, CHARA_PLAYER) = adata(ADATA_Y, AREA_MELUGAS)
			gdata(GDATA_RUN_DIR) = 1
			gdata(GDATA_LAST_EDGE_X) = -1
			msg_newline
			msgtemp = lang("  三年の月日が経ち、あなたは再び冒険の旅に出た。", "  Three years have passed. You set out on adventure once more.")
		}
	}
	repeat MAX_CHARA_ADVENTURER, MAX_CHARA_FOLLOWER
		if ( cdata(CDATA_EXIST, cnt) != CHAR_STATE_ADV ) {
			continue
		}
		if ( cbit(CHARA_BIT_HIRED, cnt) ) {
			cdata(CDATA_RELATION, cnt) = 10
			cdata(CDATA_AREA, cnt) = gdata(GDATA_AREA)
			goto *skip_advPlace
		}
		if ( cdata(CDATA_AREA, cnt) != gdata(GDATA_AREA) ) {
			continue
		}
		if ( mdata(MDATA_TYPE) != MAP_TYPE_TOWN & mdata(MDATA_TYPE) != MAP_TYPE_VILLAGE ) {
			continue
		}
		if ( gdata(GDATA_LEVEL) != 1 ) {
			continue
		}
*skip_advPlace
		if ( gdata(GDATA_AREA) == AREA_ARENA | gdata(GDATA_AREA) == AREA_PET_ARENA ) {
			continue
		}
		rc = cnt
		cdata(CDATA_EXIST, rc) = CHAR_STATE_ALIVE
		if ( cbit(CHARA_BIT_HIRED, cnt) == 1 ) {
			cxinit = cdata(CDATA_X, CHARA_PLAYER)
			cyinit = cdata(CDATA_Y, CHARA_PLAYER)
			gosub *place_chara
		}
		else {
			cxinit = -1
			gosub *place_chara
			cdata(CDATA_HP, rc) = cdata(CDATA_MAX_HP, rc)
			cdata(CDATA_MP, rc) = cdata(CDATA_MAX_MP, rc)
			cdata(CDATA_SP, rc) = cdata(CDATA_MAX_SP, rc)
		}
	loop
	if ( mdata(MDATA_CAN_SAVE) == 1 ) {
		if ( gdata(GDATA_HOUR) + gdata(GDATA_DAY) * 24 + gdata(GDATA_MONTH) * 24 * 30 + gdata(GDATA_YEAR) * 24 * 30 * 12 >= mdata(MDATA_RENEW) ) {
			if ( mdata(MDATA_NO_RENEW) == 0 ) {
				if ( mdata(MDATA_RENEW) != 0 ) {
					if ( gdata(GDATA_LEVEL) == 1 ) {
						if ( gdata(GDATA_AREA) == AREA_SEMINAR ) {
							map_reload "semi1"
						}
						if ( gdata(GDATA_AREA) == AREA_LUMIEST ) {
							map_reload "lumiest"
						}
						if ( gdata(GDATA_AREA) == AREA_VERNIS ) {
							map_reload "vernis"
						}
						if ( gdata(GDATA_AREA) == AREA_PALMIA ) {
							map_reload "palmia"
						}
						if ( gdata(GDATA_AREA) == AREA_PORT_KAPUL ) {
							map_reload "kapul"
						}
						if ( gdata(GDATA_AREA) == AREA_YOWYN ) {
							map_reload "yowyn"
						}
						if ( gdata(GDATA_AREA) == AREA_DERPHY ) {
							map_reload "rogueden"
						}
						if ( gdata(GDATA_AREA) == AREA_EIREL ) {
							map_reload "eirel"
						}
						if ( gdata(GDATA_AREA) == AREA_LARNA ) {
							map_reload "highmountain"
						}
						if ( gdata(GDATA_AREA) == AREA_DOJO ) {
							map_reload "Doujyou"
						}
						if ( gdata(GDATA_AREA) == AREA_RUOZA ) {
							map_reload "ruoza"
						}
						if ( gdata(GDATA_AREA) == AREA_MELKAWN ) {
							map_reload "melkawn1"
						}
						if ( gdata(GDATA_AREA) == AREA_KURUALM ) {
							map_reload "kurualm"
						}
						if ( gdata(GDATA_AREA) == AREA_VALM ) {
							map_reload "valm"
						}
						if ( gdata(GDATA_AREA) == AREA_MELUGAS ) {
							map_reload "melugas"
						}
						if ( gdata(GDATA_AREA) == AREA_ARCBELC ) {
							map_reload "arcbelc"
						}
						if ( gdata(GDATA_AREA) == AREA_ULM_LESON ) {
							map_reload "1iseki"
						}
						if ( gdata(GDATA_AREA) == AREA_YLVA_LIBRARY ) {
							map_reload "3lib"
						}
						if ( gdata(GDATA_AREA) == AREA_BLIMP ) {
							map_reload "4mado"
						}
						if ( gdata(GDATA_AREA) == AREA_AMUR_CAGE ) {
							map_reload "3haka"
						}
						if ( gdata(GDATA_AREA) == AREA_MIRAGE_TOWER ) {
							if ( gdata(GDATA_LEVEL) == 1 ) {
								map_reload "3sazin"
							}
						}
						if ( gdata(GDATA_AREA) == AREA_RUST_PLAZA ) {
							map_reload "5cave"
						}
						if ( gdata(GDATA_AREA) == AREA_GUARDIAN_SHRINE ) {
							map_reload "6defend"
						}
						if ( gdata(GDATA_AREA) == AREA_DOCK ) {
							if ( gdata(GDATA_LEVEL) == 1 ) {
								map_reload "7bship"
							}
						}
						if ( gdata(GDATA_AREA) == AREA_OL_DRAN ) {
							map_reload "9dran"
						}
						if ( gdata(GDATA_AREA) == AREA_IRMA_THALIA_WORKSHOP ) {
							map_reload "10dwa"
						}
						if ( gdata(GDATA_AREA) == AREA_OBLIVION_PALACE ) {
							map_reload "obli"
						}
						if ( gdata(GDATA_AREA) == AREA_ZAILE ) {
							map_reload "zaile"
						}
						if ( gdata(GDATA_AREA) == AREA_SEBI ) {
							map_reload "sebi"
						}
						if ( gdata(GDATA_AREA) == AREA_SOUTH_RASKILIS ) {
							map_reload "ras_south"
						}
						if ( gdata(GDATA_AREA) == AREA_WEST_RASKILIS ) {
							map_reload "ras0"
						}
						if ( gdata(GDATA_AREA) == AREA_LUDUS ) {
							if ( gdata(GDATA_MONTH) == 8 ) {
								if ( adata(ADATA_FESTIVAL, gdata(GDATA_AREA)) == 0 ) {
									adata(ADATA_FESTIVAL, gdata(GDATA_AREA)) = 1
									gosub *ludus_festival
								}
								map_reload "ludus_fest"
							}
							else {
								if ( adata(ADATA_FESTIVAL, gdata(GDATA_AREA)) == 1 ) {
									adata(ADATA_FESTIVAL, gdata(GDATA_AREA)) = 0
									gosub *ludus_festival
								}
								map_reload "ludus"
							}
						}
						if ( gdata(GDATA_AREA) == AREA_NOYEL ) {
							if ( gdata(GDATA_MONTH) == 12 ) {
								if ( adata(ADATA_FESTIVAL, gdata(GDATA_AREA)) == 0 ) {
									adata(ADATA_FESTIVAL, gdata(GDATA_AREA)) = 1
									gosub *noyel_festival
								}
								map_reload "noyel_fest"
							}
							else {
								if ( adata(ADATA_FESTIVAL, gdata(GDATA_AREA)) == 1 ) {
									adata(ADATA_FESTIVAL, gdata(GDATA_AREA)) = 0
									gosub *noyel_festival
								}
								map_reload "noyel"
							}
							gdata(GDATA_FLAG_FIRE_GIANT) = 0
						}
					}
				}
			}
		}
		if ( gdata(GDATA_HOUR) + gdata(GDATA_DAY) * 24 + gdata(GDATA_MONTH) * 24 * 30 + gdata(GDATA_YEAR) * 24 * 30 * 12 >= mdata(MDATA_RENEW) ) {
			if ( mdata(MDATA_NO_RENEW) == 0 ) {
				if ( mdata(MDATA_RENEW) != 0 ) {
					if ( gdata(GDATA_AREA) == AREA_DERPHY ) {
						if ( gdata(GDATA_LEVEL) == 3 ) {
							map_reload "thiefguild"
						}
					}
					if ( gdata(GDATA_AREA) == AREA_LUMIEST ) {
						if ( gdata(GDATA_LEVEL) == 3 ) {
							map_reload "mageguild"
						}
					}
					if ( gdata(GDATA_AREA) == AREA_PORT_KAPUL ) {
						if ( gdata(GDATA_LEVEL) == 3 ) {
							map_reload "fighterguild"
						}
					}
					if ( gdata(GDATA_AREA) == AREA_LUDUS ) {
						if ( gdata(GDATA_LEVEL) == 5 ) {
							map_reload "ane"
						}
					}
					if ( gdata(GDATA_AREA) == AREA_EMBASSY ) {
						map_reload "office_1"
					}
					if ( gdata(GDATA_AREA) == AREA_MELKAWN ) {
						if ( gdata(GDATA_LEVEL) == 3 ) {
							map_reload "melkawn2"
						}
					}
					if ( gdata(GDATA_AREA) == AREA_MIRAGE_TOWER ) {
						if ( gdata(GDATA_LEVEL) == 60 ) {
							map_reload "4sazin"
						}
					}
					if ( gdata(GDATA_AREA) == AREA_DOCK ) {
						if ( gdata(GDATA_LEVEL) == 60 ) {
							map_reload "8bship"
						}
					}
					if ( gdata(GDATA_AREA) == AREA_DOCK ) {
						if ( gdata(GDATA_LEVEL) == 70 ) {
							map_reload "87bship"
						}
					}
					if ( gdata(GDATA_AREA) == AREA_MIROK_WORKSHOP ) {
						map_reload "smith0"
					}
					if ( gdata(GDATA_AREA) == AREA_ABODE_OF_WITCH ) {
						map_reload "shoten"
					}
					if ( gdata(GDATA_AREA) == AREA_DEVIL_CAPE ) {
						map_reload "proud"
					}
					if ( gdata(GDATA_AREA) == AREA_IRMA_THALIA_WORKSHOP ) {
						map_reload "10dwa"
					}
					if ( gdata(GDATA_AREA) == AREA_AMUR_CAGE ) {
						if ( gdata(GDATA_LEVEL) == 2 ) {
							map_reload "3haka2"
						}
					}
				}
			}
		}
		repeat mdata(MDATA_HEIGHT)
			y = cnt
			repeat mdata(MDATA_WIDTH)
				map(cnt, y, 1) = 0
			loop
		loop
		repeat MAX_CHARA_TOTAL
			rc = cnt
			cbitmod CHARA_BIT_POISON_FLAG, rc, 0
			if ( rc < MAX_CHARA_SAVE ) {
				if ( mode == MODELIST_MAP ) {
					continue
				}
			}
			if ( cdata(CDATA_EXIST, rc) == CHAR_STATE_SPIRIT ) {
				if ( gdata(GDATA_HOUR) + gdata(GDATA_DAY) * 24 + gdata(GDATA_MONTH) * 24 * 30 + gdata(GDATA_YEAR) * 24 * 30 * 12 >= cdata(CDATA_RESPAWN, rc) ) {
					gosub *chara_respawn
				}
				else {
					continue
				}
			}
			if ( cdata(CDATA_EXIST, rc) != CHAR_STATE_ALIVE ) {
				continue
			}
			if ( cdata(CDATA_ROLE, rc) == ROLE_GUARD | cdata(CDATA_ROLE, rc) == ROLE_BOUNTY_HUNTER ) {
				if ( rc >= MAX_CHARA_FOLLOWER & cbit(CHARA_BIT_LIVESTOCK, rc) != 1 ) {
					if ( cdata(CDATA_KARMA, CHARA_PLAYER) < (-30) ) {
						if ( cdata(CDATA_LEVEL, CHARA_PLAYER) > cdata(CDATA_LEVEL, rc) ) {
							r1 = rc
							r2 = 1
							gosub *calcLevelUp
						}
					}
				}
			}
			if ( cdata(CDATA_ID, rc) == CREATURE_ID_GWEN_THE_PITILESS & cdata(CDATA_ROLE, rc) == ROLE_SPECIAL & rc >= MAX_CHARA_FOLLOWER & cbit(CHARA_BIT_LIVESTOCK, rc) != 1 & cdata(CDATA_LEVEL, rc) < 500 & cdata(CDATA_ALLIED, rc) == 0 ) {
				repeat gdata(GDATA_GWEN_PITILESS_LVL)
					r1 = rc
					r2 = 1
					gosub *calcLevelUp
				loop
				gdata(GDATA_GWEN_PITILESS_LVL) = 0
			}
			if ( rc >= MAX_CHARA_SAVE ) {
				cdata(CDATA_HP, rc) = cdata(CDATA_MAX_HP, rc)
				cdata(CDATA_MP, rc) = cdata(CDATA_MAX_MP, rc)
				cdata(CDATA_SP, rc) = cdata(CDATA_MAX_SP, rc)
				cdata(CDATA_SANITY, rc) = 0
			}
			if ( rc >= MAX_CHARA_SAVE ) {
				if ( mdata(MDATA_RESTORE_POS) == 1 ) {
					if ( mdata(MDATA_TILE_FILE) == 3 ) {
						if ( map(cdata(CDATA_X_ORG, rc), cdata(CDATA_Y_ORG, rc), 0) <= 395 ) {
							chipm(CHIPM_ATTRIB, map(cdata(CDATA_X_ORG, rc), cdata(CDATA_Y_ORG, rc), 0)) = 0
						}
					}
					if ( mdata(MDATA_TILE_FILE) == 2 ) {
						if ( map(cdata(CDATA_X_ORG, rc), cdata(CDATA_Y_ORG, rc), MAP_TILE_ID) <= xy2pic(32, 11) ) {
							chipm(CHIPM_ATTRIB, map(cdata(CDATA_X_ORG, rc), cdata(CDATA_Y_ORG, rc), MAP_TILE_ID)) = CHIPM_ATTRIB_DEFAULT
						}
					}
					if ( mdata(MDATA_TILE_FILE) == 1 ) {
						if ( map(cdata(CDATA_X_ORG, rc), cdata(CDATA_Y_ORG, rc), MAP_TILE_ID) >= xy2pic(24, 9) & map(cdata(CDATA_X_ORG, rc), cdata(CDATA_Y_ORG, rc), MAP_TILE_ID) <= xy2pic(32, 11) ) {
							chipm(CHIPM_ATTRIB, map(cdata(CDATA_X_ORG, rc), cdata(CDATA_Y_ORG, rc), MAP_TILE_ID)) = CHIPM_ATTRIB_DEFAULT
						}
					}
					cdata(CDATA_X, rc) = cdata(CDATA_X_ORG, rc)
					cdata(CDATA_Y, rc) = cdata(CDATA_Y_ORG, rc)
				}
				if ( cbit(CHARA_BIT_QUEST_TARGET, rc) == 0 ) {
					cdata(CDATA_AI_AGGRO, rc) = 0
					cdata(CDATA_RELATION, rc) = cdata(CDATA_RELATION_ORG, rc)
				}
				if ( cdata(CDATA_ROLE, rc) == ROLE_GUARD | cdata(CDATA_ROLE, rc) == ROLE_BOUNTY_HUNTER ) {
					if ( cdata(CDATA_KARMA, CHARA_PLAYER) < (-30) ) {
						if ( cbit(CHARA_BIT_INCOGNITO, CHARA_PLAYER) == 0 ) {
							cdata(CDATA_AI_AGGRO, rc) = 200
							cdata(CDATA_RELATION, rc) = -3
						}
					}
				}
				if ( gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_ABNORMAL & cdata(CDATA_IMPRESSION, rc) < 0 ) {
					if ( cbit(CHARA_BIT_INCOGNITO, CHARA_PLAYER) == 0 ) {
						cdata(CDATA_AI_AGGRO, rc) = 200
						cdata(CDATA_RELATION, rc) = -3
					}
				}
				if ( mdata(MDATA_TYPE) == MAP_TYPE_TOWN | mdata(MDATA_TYPE) == MAP_TYPE_VILLAGE ) {
					cdata(CDATA_CONDITION_SLEEP, rc) = 0
					if ( gdata(GDATA_HOUR) >= 22 | gdata(GDATA_HOUR) < 7 ) {
						if ( cbit(CHARA_BIT_NECRO, rc) != TRUE ) {
							if ( rnd(6) == 0 ) {
								cdata(CDATA_CONDITION_SLEEP, rc) = rnd(400)
							}
						}
					}
				}
			}
			if ( dbg_advTalkLine ) {
				cdata(CDATA_CUSTOM_TALK_LINE, rc) = ADVENTURER_MESSAGE_GET_ALONG
			}
			if ( cdata(CDATA_ROLE, rc) == ROLE_ADVENTURER ) {
				if ( cdata(CDATA_CUSTOM_TALK_LINE, rc) == ADVENTURER_MESSAGE_GET_ALONG ) {
					if ( cdata(CDATA_RELATION, rc) < RELATION_NEUTRAL ) {
						cdata(CDATA_RELATION, rc) = RELATION_NEUTRAL
						cdata(CDATA_AI_AGGRO, rc) = 0
						cdata(CDATA_ADVENTURER_MESSAGE_RECEIVED, rc) = ADVENTURER_MESSAGE_NONE
						msgtemp += lang(cdatan(CDATAN_AKA, rc) + "はあなたからのメッセージを思い出した…。", cdatan(CDATAN_AKA, rc) + " recalled your message...")
					}
				}
			}
			if ( rc == CHARA_PLAYER | gdata(GDATA_RIDER) != rc ) {
				if ( cdata(CDATA_TAGTEAM_PARTNER, rc) < 0 | cdata(CDATA_IN_TAGTEAM, rc) != 1 ) {
					cell_check cdata(CDATA_X, rc), cdata(CDATA_Y, rc)
					if ( map(cdata(CDATA_X, rc), cdata(CDATA_Y, rc), 1) != 0 | cellaccess != 1 ) {
						repeat
							x = cdata(CDATA_X, rc) + rnd(cnt / 2 + 2) - rnd(cnt / 2 + 2)
							y = cdata(CDATA_Y, rc) + rnd(cnt / 2 + 2) - rnd(cnt / 2 + 2)
							if ( cnt > 100 ) {
								x = rnd(mdata(MDATA_WIDTH))
								y = rnd(mdata(MDATA_HEIGHT))
							}
							if ( cnt > 1000 ) {
								break
							}
							cell_check x, y
							if ( cellaccess == 1 ) {
								cdata(CDATA_X, rc) = x
								cdata(CDATA_Y, rc) = y
								break
							}
						loop
					}
				}
			}
			if ( cbit(CHARA_BIT_RIDE, rc) == 0 ) {
				if ( cdata(CDATA_IN_TAGTEAM, rc) != 1 ) {
					map(cdata(CDATA_X, rc), cdata(CDATA_Y, rc), 1) = rc + 1
				}
			}
		loop
	}
*map_begin
	create_pcpic 0, 1 ; image is refreshed here because of world-vehicle display
	if ( gdata(GDATA_ADVENTURER_ORACLE) == 100 ) {
		gdata(GDATA_ADVENTURER_ORACLE) = 0
	}
	dim efmap, 4, mdata(MDATA_WIDTH), mdata(MDATA_HEIGHT)
	if ( mdata(MDATA_WIDTH) == 0 | mdata(MDATA_HEIGHT) == 0 ) {
		if ( medit == 0 ) {
			dialog lang("マップのロードに失敗しました。", "Map loading failed.")
			mode = MODELIST_NEW
			gdata(GDATA_AREA) = AREA_HOME
			gdata(GDATA_LEVEL) = 1
			gdata(GDATA_WORLD_X) = adata(ADATA_X, AREA_HOME)
			gdata(GDATA_WORLD_Y) = adata(ADATA_Y, AREA_HOME)
			gdata(GDATA_AREA_PREV) = AREA_WILDERNESS
			levelexitby = 4
			goto *map_init
		}
	}
	if ( gdata(GDATA_AREA) == AREA_SHOW_HOUSE ) {
		gosub *userNpc_update
	}
	proc "Map:Check renew"
	gosub *check_renew
	proc "Map:Recaluculate crowd"
	gdata(GDATA_CROWD) = 0
	repeat MAX_CHARA_TOTAL
		if ( gdata(GDATA_SPEEDSUM_RESET) == 0 ) {
			cdata(CDATA_SPEED_SUM, cnt) = 0
		}
		if ( cdata(CDATA_ID, cnt) == CREATURE_ID_USER ) {
			getunid cnt
			r1 = cnt
			gosub *charaRefresh
		}
		cdata(CDATA_SYNC, cnt) = 0
		if ( cnt > MAX_CHARA_SAVE ) {
			if ( cdata(CDATA_EXIST, cnt) != CHAR_STATE_DEAD ) {
				gdata(GDATA_CROWD)++
			}
		}
		r1 = cnt
		if ( cdata(CDATA_ROLE, r1) == ROLE_ADVENTURER ) {
			repeat MAX_EQUIP_SLOT_TOTAL, CDATA_STARTING_EQUIP_SLOTS
				p = cdata(cnt, r1) / EXT_EQUIP_SLOTS
				if ( p == EQUIP_SLOT_NONE ) {
					break
				}
				if ( cdata(cnt, r1) \ EXT_EQUIP_SLOTS != 0 ) {
					if ( p == EQUIP_SLOT_HAND ) {
						if ( refitem(inv(INV_ITEM_ID, cdata(cnt, r1) \ EXT_EQUIP_SLOTS - 1), DBSPEC_TYPE) != FILTER_WEAPON ) {
							inv(INV_ITEM_EQUIP, cdata(cnt, r1) \ EXT_EQUIP_SLOTS - 1) = 0
						}
					}
			loop
		}
	}
	loop
	gdata(GDATA_SPEEDSUM_RESET) = 0
	if ( gdata(GDATA_FLAG_BIRTHDAY_CURRENT_YEAR) <= int(gettime(0)) & gdata(GDATA_FLAG_INFORMER_BIRTHDAY_MONTH) == int(gettime(1)) & gdata(GDATA_FLAG_INFORMER_BIRTHDAY_DAY) == int(gettime(3)) ) {
		evadd EVENT_BIRTHDAY
	}
	if ( adata(ADATA_ECONOMY, gdata(GDATA_AREA)) != 0 & adata(ADATA_ID, gdata(GDATA_AREA)) != AREA_NONE ) {
		if ( mdata(MDATA_CITY_ETHER_CORRUPTION) == 0 ) {
			p = adata(ADATA_ECONOMY, gdata(GDATA_AREA))
			if ( p == 1 ) {
				mdata(MDATA_CITY_PROPERTY_VALUE) = 30
				mdata(MDATA_CITY_WATER_POLLUTION) = 68
				mdata(MDATA_CITY_DEAD_PEOPLE) = 46
				mdata(MDATA_CITY_ETHER_CORRUPTION) = 15
				mdata(MDATA_CITY_TOURISM_REVENUE) = 1200
				mdata(MDATA_CITY_MAINTENANCE_COST) = 3600
				mdata(MDATA_CITY_BUDGET) = 3000
			}
			if ( p == 2 ) {
				mdata(MDATA_CITY_PROPERTY_VALUE) = 20
				mdata(MDATA_CITY_WATER_POLLUTION) = 22
				mdata(MDATA_CITY_DEAD_PEOPLE) = 6
				mdata(MDATA_CITY_ETHER_CORRUPTION) = 11
				mdata(MDATA_CITY_TOURISM_REVENUE) = 600
				mdata(MDATA_CITY_MAINTENANCE_COST) = 4500
				mdata(MDATA_CITY_BUDGET) = 1100
			}
			if ( p == 3 ) {
				mdata(MDATA_CITY_PROPERTY_VALUE) = 76
				mdata(MDATA_CITY_WATER_POLLUTION) = 54
				mdata(MDATA_CITY_DEAD_PEOPLE) = 27
				mdata(MDATA_CITY_ETHER_CORRUPTION) = 43
				mdata(MDATA_CITY_TOURISM_REVENUE) = 18000
				mdata(MDATA_CITY_MAINTENANCE_COST) = 12000
				mdata(MDATA_CITY_BUDGET) = 36000
			}
			if ( p == 4 ) {
				mdata(MDATA_CITY_PROPERTY_VALUE) = -63
				mdata(MDATA_CITY_WATER_POLLUTION) = 58
				mdata(MDATA_CITY_DEAD_PEOPLE) = 42
				mdata(MDATA_CITY_ETHER_CORRUPTION) = 55
				mdata(MDATA_CITY_TOURISM_REVENUE) = 300
				mdata(MDATA_CITY_MAINTENANCE_COST) = 3000
				mdata(MDATA_CITY_BUDGET) = 14000
			}
			if ( p == 5 ) {
				mdata(MDATA_CITY_PROPERTY_VALUE) = 46
				mdata(MDATA_CITY_WATER_POLLUTION) = 38
				mdata(MDATA_CITY_DEAD_PEOPLE) = 21
				mdata(MDATA_CITY_ETHER_CORRUPTION) = 26
				mdata(MDATA_CITY_TOURISM_REVENUE) = 8600
				mdata(MDATA_CITY_MAINTENANCE_COST) = 7000
				mdata(MDATA_CITY_BUDGET) = 21000
			}
			if ( p == 6 ) {
				mdata(MDATA_CITY_PROPERTY_VALUE) = 24
				mdata(MDATA_CITY_WATER_POLLUTION) = 5
				mdata(MDATA_CITY_DEAD_PEOPLE) = 2
				mdata(MDATA_CITY_ETHER_CORRUPTION) = 10
				mdata(MDATA_CITY_TOURISM_REVENUE) = 2200
				mdata(MDATA_CITY_MAINTENANCE_COST) = 8000
				mdata(MDATA_CITY_BUDGET) = 6000
			}
			if ( p == 7 ) {
				mdata(MDATA_CITY_PROPERTY_VALUE) = 33
				mdata(MDATA_CITY_WATER_POLLUTION) = 9
				mdata(MDATA_CITY_DEAD_PEOPLE) = 5
				mdata(MDATA_CITY_ETHER_CORRUPTION) = 25
				mdata(MDATA_CITY_TOURISM_REVENUE) = 28000
				mdata(MDATA_CITY_MAINTENANCE_COST) = 21000
				mdata(MDATA_CITY_BUDGET) = 5000
			}
			if ( p == 8 ) {
				mdata(MDATA_CITY_PROPERTY_VALUE) = 59
				mdata(MDATA_CITY_WATER_POLLUTION) = 11
				mdata(MDATA_CITY_DEAD_PEOPLE) = 12
				mdata(MDATA_CITY_ETHER_CORRUPTION) = 16
				mdata(MDATA_CITY_TOURISM_REVENUE) = 5800
				mdata(MDATA_CITY_MAINTENANCE_COST) = 4300
				mdata(MDATA_CITY_BUDGET) = 9000
			}
			if ( p == 10 ) {
				mdata(MDATA_CITY_PROPERTY_VALUE) = -10
				mdata(MDATA_CITY_WATER_POLLUTION) = 36
				mdata(MDATA_CITY_DEAD_PEOPLE) = 42
				mdata(MDATA_CITY_ETHER_CORRUPTION) = 35
				mdata(MDATA_CITY_TOURISM_REVENUE) = 27000
				mdata(MDATA_CITY_MAINTENANCE_COST) = 24000
				mdata(MDATA_CITY_BUDGET) = 16000
			}
			if ( p == 11 ) {
				mdata(MDATA_CITY_PROPERTY_VALUE) = 10
				mdata(MDATA_CITY_WATER_POLLUTION) = 27
				mdata(MDATA_CITY_DEAD_PEOPLE) = 31
				mdata(MDATA_CITY_ETHER_CORRUPTION) = 36
				mdata(MDATA_CITY_TOURISM_REVENUE) = 9700
				mdata(MDATA_CITY_MAINTENANCE_COST) = 8400
				mdata(MDATA_CITY_BUDGET) = 3600
			}
			if ( p == 12 ) {
				mdata(MDATA_CITY_PROPERTY_VALUE) = 23
				mdata(MDATA_CITY_WATER_POLLUTION) = 16
				mdata(MDATA_CITY_DEAD_PEOPLE) = 14
				mdata(MDATA_CITY_ETHER_CORRUPTION) = 31
				mdata(MDATA_CITY_TOURISM_REVENUE) = 1200
				mdata(MDATA_CITY_MAINTENANCE_COST) = 2000
				mdata(MDATA_CITY_BUDGET) = 300
			}
			if ( p == 13 ) {
				mdata(MDATA_CITY_PROPERTY_VALUE) = 83
				mdata(MDATA_CITY_WATER_POLLUTION) = 67
				mdata(MDATA_CITY_DEAD_PEOPLE) = 56
				mdata(MDATA_CITY_ETHER_CORRUPTION) = 65
				mdata(MDATA_CITY_TOURISM_REVENUE) = 2600
				mdata(MDATA_CITY_MAINTENANCE_COST) = 37000
				mdata(MDATA_CITY_BUDGET) = 53000
			}
			if ( p == 14 ) {
				mdata(MDATA_CITY_PROPERTY_VALUE) = 41
				mdata(MDATA_CITY_WATER_POLLUTION) = 29
				mdata(MDATA_CITY_DEAD_PEOPLE) = 26
				mdata(MDATA_CITY_ETHER_CORRUPTION) = 45
				mdata(MDATA_CITY_TOURISM_REVENUE) = 26000
				mdata(MDATA_CITY_MAINTENANCE_COST) = 12900
				mdata(MDATA_CITY_BUDGET) = 32000
			}
			if ( p == 15 ) {
				mdata(MDATA_CITY_PROPERTY_VALUE) = -5
				mdata(MDATA_CITY_WATER_POLLUTION) = 11
				mdata(MDATA_CITY_DEAD_PEOPLE) = 52
				mdata(MDATA_CITY_ETHER_CORRUPTION) = 30
				mdata(MDATA_CITY_TOURISM_REVENUE) = 800
				mdata(MDATA_CITY_MAINTENANCE_COST) = 1600
				mdata(MDATA_CITY_BUDGET) = -4100
			}
		}
	}
	proc "Map:Prepare tile"
	cdata(CDATA_AREA, CHARA_PLAYER) = gdata(GDATA_AREA), gdata(GDATA_LEVEL)
	raderx = -1
	radery = -1
	raderw = 120 / mdata(MDATA_WIDTH) + 2
	raderh = 84 / mdata(MDATA_HEIGHT) + 2
	scx = cdata(CDATA_X, CHARA_PLAYER)
	scy = cdata(CDATA_Y, CHARA_PLAYER)
	msync = 1
	gosub *map_prepareTile
	gosub *rader_preDraw
	gosub *screen_setPos
	proc "Map:Update quest"
	if ( mdata(MDATA_TYPE) == MAP_TYPE_TOWN | gdata(GDATA_AREA) == AREA_LUDUS ) {
		if ( gdata(GDATA_AREA) != AREA_GUARDIAN_SHRINE & gdata(GDATA_AREA) != AREA_BLIMP ) {
			if ( adata(ADATA_QUEST_RENEW, gdata(GDATA_AREA)) != 4 ) {
				gosub *client_update
				gosub *quest_update
			}
		}
	}
	if ( mode == MODELIST_MAP ) {
		return
	}
	if ( adata(ADATA_INITIALIZED, gdata(GDATA_AREA)) == 0 ) {
		adata(ADATA_INITIALIZED, gdata(GDATA_AREA)) = 1
		fix_find ITEM_ID_SHELTER, -1
	}
	if ( kamen >= 100 ) {
		if ( kamen == 100 ) {
			flt
			itemcreate -1, ITEM_ID_PHILOSOPHERS_STONE_MASK, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
			inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_NORMAL
			txt_questitem
		}
		kamen = 0
	}
	if ( kamen2 >= 100 ) {
		if ( kamen2 == 100 ) {
			flt
			itemcreate -1, ITEM_ID_PLEASANT_SLEEP_BLANKET, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 10
			inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_NORMAL
			txt_questitem
		}
		kamen2 = 0
	}
	if ( kamen3 >= 100 ) {
		if ( kamen3 == 100 ) {
			flt
			itemcreate -1, ITEM_ID_CHRISTMAS_CAKE_SET, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 1
			inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_NORMAL
			txt_questitem
		}
		kamen3 = 0
	}
	if ( kamen4 >= 100 ) {
		if ( gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_PURGE ) {
			txt_questitem
			flt
			itemcreate -1, ITEM_ID_GOLD_PIECE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 1000000
			dbg_noautosave = 1
			cdata(CDATA_SKILLPOINT, CHARA_PLAYER) += 10000
			if ( spact(SKILL_SPACT_WIN - STARTING_SKILL_SPACT) == 0 ) {
				spact(SKILL_SPACT_WIN - STARTING_SKILL_SPACT) = 1
				txtmore
				txtef COLOR_YELLOW
				txt lang("あなたは「" + skillname(SKILL_SPACT_WIN) + "」の能力を得た。", "You have learned a new ability, " + skillname(SKILL_SPACT_WIN) + ".")
				if ( spact(SKILL_SPACT_PURGE - STARTING_SKILL_SPACT) == 0 ) {
					spact(SKILL_SPACT_PURGE - STARTING_SKILL_SPACT) = 1
					txtmore
					txtef COLOR_YELLOW
					txt lang("あなたは「" + skillname(SKILL_SPACT_PURGE) + "」の能力を得た。", "You have learned a new ability, " + skillname(SKILL_SPACT_PURGE) + ".")
				}
			}
			kamen4 = 0
		}
	}
	if ( kamen5 >= 100 ) {
		if ( kamen5 == 100 ) {
			flt
			itemcreate -1, ITEM_ID_SAND_BAG, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_NORMAL
			txt_questitem
		}
		kamen5 = 0
	}
	if ( kamen6 >= 100 ) {
		if ( kamen6 == 100 ) {
			flt
			itemcreate -1, ITEM_ID_TOILET, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_NORMAL
			txt_questitem
		}
		kamen6 = 0
	}
	if ( kamen7 >= 100 ) {
		if ( kamen7 == 100 ) {
			flt
			itemcreate -1, ITEM_ID_LESIMAS_FRAGMENT, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_NORMAL
			txt_questitem
		}
		kamen7 = 0
	}
	if ( kamen8 >= 100 ) {
		if ( kamen8 == 100 ) {
			flt
			itemcreate -1, ITEM_ID_REMIDO_FRAGMENT, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_NORMAL
			txt_questitem
		}
		kamen8 = 0
	}
	if ( kamen9 >= 100 ) {
		if ( kamen9 == 100 ) {
			flt
			itemcreate -1, ITEM_ID_CHAOS_FRAGMENT, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_NORMAL
			txt_questitem
		}
		kamen9 = 0
	}
	if ( tuikabui == 100 ) {
		flt
		itemcreate -1, ITEM_ID_WONDER_BODY_FORMER, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 6
		inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_NORMAL
		txt_questitem
		tuikabui = 0
		gdata(GDATA_FLAG_CAN_USE_WONDER_BODY_FORMER) = 140
	}
	if ( hagureta == 100 ) {
		hagureta = 0
		gosub *screen_draw
	}
	if ( renshyou != 0 ) {
		txt_questitem
		snd SOUNDLIST_DING1
		if ( renshyou == 3 ) {
			flt
			itemcreate -1, ITEM_ID_POTION_RESISTANCE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_NORMAL
		}
		if ( renshyou == 10 ) {
			flt
			itemcreate -1, ITEM_ID_SCROLL_OF_WITCHCRAFT, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_NORMAL
		}
		if ( renshyou == 30 ) {
			flt
			itemcreate -1, ITEM_ID_SCROLL_GROWTH, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_NORMAL
		}
		if ( renshyou == 50 ) {
			flt
			itemcreate -1, ITEM_ID_ASTRAL_LIGHT_PEN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_NORMAL
		}
		if ( renshyou == 100 ) {
			p = limit(adata(ADATA_ARENA_WIN, gdata(GDATA_AREA)) / 100 + 1, 2, 4)
			repeat p
				flt
				itemcreate -1, ITEM_ID_POTION_EVOLUTION, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
				inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_NORMAL
				flt
				itemcreate -1, ITEM_ID_POTION_DESCENT, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
				inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_NORMAL
				flt
				itemcreate -1, ITEM_ID_TREASURE_MAP, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
				inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_NORMAL
			loop
		}
		renshyou = 0
	}
	if ( prenshyou != 0 ) {
		txt_questitem
		snd SOUNDLIST_DING1
		if ( prenshyou == 3 ) {
			flt
			itemcreate -1, ITEM_ID_SCROLL_CHANGE_MATERIAL, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_NORMAL
		}
		if ( prenshyou == 10 ) {
			flt
			itemcreate -1, ITEM_ID_SCROLL_SUPERIOR_MATERIAL, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_NORMAL
		}
		if ( prenshyou == 30 ) {
			flt
			itemcreate -1, ITEM_ID_CRAFT_REPAIR_KIT, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_NORMAL
		}
		if ( prenshyou == 50 ) {
			flt
			itemcreate -1, ITEM_ID_EVITEM, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_NORMAL
			inv(INV_ITEM_PARAM1, ci) = 15
		}
		if ( prenshyou == 100 ) {
			p = limit(adata(ADATA_PET_ARENA_WIN, gdata(GDATA_AREA)) / 100, 1, 3)
			repeat p
				flt
				nostack = 1
				itemcreate -1, ITEM_ID_MATERIAL_KIT, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
				inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_NORMAL
				flt
				nostack = 1
				itemcreate -1, ITEM_ID_EVITEM, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
				inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_NORMAL
				inv(INV_ITEM_PARAM1, ci) = 13
			loop
		}
		prenshyou = 0
	}
	kamui = 0
	gdata(GDATA_FLAG_CUT_IN_MESSAGE_1) = 0
	gdata(GDATA_FLAG_CUT_IN_MESSAGE_2) = 0
	if ( gdata(GDATA_FLAG_MAIN) >= 875 & gdata(GDATA_FLAG_MAIN) < 990 ) {
		gdata(GDATA_FLAG_MAIN) = 845
	}
	if ( deru == 44 ) {
		deru = 0

		/********** ORIGINAL - BEGINNING **********

		if ( dbg_noautosave == 0 & gdata(GDATA_WIZARD) == 0 ) {

		 ********** ORIGINAL - ENDING **********/

		/********** BLOODYSHADE CUSTOM - BEGINNING **********/ // Re-enable save-scumming.

		if ( ( dbg_noautosave == 0 & gdata(GDATA_WIZARD) == 0 & gdata(GDATA_FLAG_GAME_MODE) != GAMEMODE_PURGE ) | TweakData(TWEAK_GAMEPLAY_ENABLE_SAVE_SCUMMING, TWEAK_CATEGORY_GAMEPLAY) == 0 ) {

		/********** BLOODYSHADE CUSTOM - ENDING **********/

			if ( gdata(GDATA_AREA) != AREA_PET_ARENA & gdata(GDATA_AREA) != AREA_SHOW_HOUSE ) {
				gosub *game_save
			}
		}
	}
	proc "Map:Proc scene"
	if ( gdata(GDATA_FLAG_MAIN) == 9 ) {
		sceneid = 2
		gosub *scene
		gdata(GDATA_FLAG_MAIN) = 10
	}
	if ( gdata(GDATA_FLAG_MAIN) == 60 ) {
		sceneid = 5
		gosub *scene
		gdata(GDATA_FLAG_MAIN) = 65
	}
	if ( gdata(GDATA_FLAG_MAIN) == 110 ) {
		sceneid = 20
		gosub *scene
		gdata(GDATA_FLAG_MAIN) = 115
	}
	if ( gdata(GDATA_FLAG_MAIN) == 115 ) {
		if ( gdata(GDATA_FLAG_MAIN_FOOL) + gdata(GDATA_FLAG_MAIN_KING) + gdata(GDATA_FLAG_MAIN_SAGE) >= 1 ) {
			sceneid = 21
			gosub *scene
			gdata(GDATA_FLAG_MAIN) = 116
		}
	}
	if ( gdata(GDATA_FLAG_MAIN) == 116 ) {
		if ( gdata(GDATA_FLAG_MAIN_FOOL) + gdata(GDATA_FLAG_MAIN_KING) + gdata(GDATA_FLAG_MAIN_SAGE) >= 2 ) {
			sceneid = 22
			gosub *scene
			gdata(GDATA_FLAG_MAIN) = 117
		}
	}
	if ( gdata(GDATA_FLAG_MAIN) == 117 ) {
		if ( gdata(GDATA_FLAG_MAIN_FOOL) + gdata(GDATA_FLAG_MAIN_KING) + gdata(GDATA_FLAG_MAIN_SAGE) >= 3 ) {
			sceneid = 23
			gosub *scene
			gdata(GDATA_FLAG_MAIN) = 120
		}
	}
	if ( gdata(GDATA_FLAG_MAIN) == 223 ) {
		if ( gdata(GDATA_FLAG_MAIN_ANKH) + gdata(GDATA_FLAG_MAIN_DATA_CHIP) + gdata(GDATA_FLAG_MAIN_CHAOS_WINGS) >= 1 ) {
			sceneid = 103
			gosub *scene
			gdata(GDATA_FLAG_MAIN) = 224
		}
	}
	if ( gdata(GDATA_FLAG_MAIN) == 224 ) {
		if ( gdata(GDATA_FLAG_MAIN_ANKH) + gdata(GDATA_FLAG_MAIN_DATA_CHIP) + gdata(GDATA_FLAG_MAIN_CHAOS_WINGS) >= 2 ) {
			sceneid = 104
			gosub *scene
			gdata(GDATA_FLAG_MAIN) = 225
		}
	}
	if ( gdata(GDATA_FLAG_MAIN) == 225 ) {
		if ( gdata(GDATA_FLAG_MAIN_ANKH) + gdata(GDATA_FLAG_MAIN_DATA_CHIP) + gdata(GDATA_FLAG_MAIN_CHAOS_WINGS) >= 3 ) {
			sceneid = 105
			gosub *scene
			gdata(GDATA_FLAG_MAIN) = 240
		}
	}
	if ( gdata(GDATA_FLAG_MAIN) == 250 ) {
		sceneid = 106
		gosub *scene
		gdata(GDATA_FLAG_MAIN) = 260
	}
	if ( gdata(GDATA_FLAG_MAIN) == 295 ) {
		sceneid = 113
		gosub *scene
		gdata(GDATA_FLAG_MAIN) = 300
	}
	if ( gdata(GDATA_FLAG_MAIN) == 310 ) {
		sceneid = 115
		gosub *scene
		gdata(GDATA_FLAG_MAIN) = 315
	}
	if ( gdata(GDATA_FLAG_MAIN) == 320 ) {
		sceneid = 116
		gosub *scene
		gdata(GDATA_FLAG_MAIN) = 325
	}
	if ( gdata(GDATA_FLAG_MAIN) == 367 ) {
		sceneid = 123
		gosub *scene
		gdata(GDATA_FLAG_MAIN) = 368
	}
	if ( gdata(GDATA_FLAG_MAIN) == 820 | gdata(GDATA_FLAG_MAIN) == 825 ) {
		evadd EVENT_NORNE
	}
	if ( gdata(GDATA_FLAG_MAIN) == 1000 ) {
		sceneid = 400
		gosub *scene
		gdata(GDATA_FLAG_MAIN) = 1010
	}
	if ( gdata(GDATA_AREA) == AREA_LESIMAS ) {
		if ( gdata(GDATA_FLAG_MAIN) == 10 ) {
			sceneid = 3
			gosub *scene
			gdata(GDATA_FLAG_MAIN) = 20
		}
		if ( gdata(GDATA_LEVEL) == 4 ) {
			if ( gdata(GDATA_FLAG_MAIN) == 65 ) {
				sceneid = 7
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 70
			}
		}
		if ( gdata(GDATA_LEVEL) == 7 ) {
			if ( gdata(GDATA_FLAG_MAIN) == 70 ) {
				sceneid = 8
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 75
			}
		}
		if ( gdata(GDATA_LEVEL) == 10 ) {
			if ( gdata(GDATA_FLAG_MAIN) == 75 ) {
				sceneid = 10
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 80
			}
		}
		if ( gdata(GDATA_LEVEL) == 14 ) {
			if ( gdata(GDATA_FLAG_MAIN) == 80 ) {
				sceneid = 11
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 85
			}
		}
		if ( gdata(GDATA_LEVEL) == 16 ) {
			if ( gdata(GDATA_FLAG_MAIN) == 85 ) {
				sceneid = 18
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 90
			}
		}
		if ( gdata(GDATA_LEVEL) == 26 ) {
			if ( gdata(GDATA_FLAG_MAIN) == 125 ) {
				sceneid = 24
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 130
			}
		}
		if ( gdata(GDATA_LEVEL) == 28 ) {
			if ( gdata(GDATA_FLAG_MAIN) == 130 ) {
				sceneid = 25
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 135
			}
		}
		if ( gdata(GDATA_LEVEL) == 31 ) {
			if ( gdata(GDATA_FLAG_MAIN) == 135 ) {
				sceneid = 26
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 140
			}
		}
		if ( gdata(GDATA_LEVEL) == 35 ) {
			if ( gdata(GDATA_FLAG_MAIN) == 140 ) {
				sceneid = 27
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 145
			}
		}
		if ( gdata(GDATA_LEVEL) == 38 ) {
			if ( gdata(GDATA_FLAG_MAIN) == 145 ) {
				sceneid = 28
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 150
			}
		}
		if ( gdata(GDATA_LEVEL) == 42 ) {
			if ( gdata(GDATA_FLAG_MAIN) == 150 ) {
				sceneid = 29
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 160
			}
		}
	}
	if ( gdata(GDATA_AREA) == AREA_REMIDO ) {
		if ( gdata(GDATA_LEVEL) == 102 ) {
			if ( gdata(GDATA_FLAG_MAIN) == 260 ) {
				sceneid = 107
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 265
			}
		}
		if ( gdata(GDATA_LEVEL) == 110 ) {
			if ( gdata(GDATA_FLAG_MAIN) == 267 ) {
				sceneid = 108
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 268
			}
		}
		if ( gdata(GDATA_LEVEL) == 115 ) {
			if ( gdata(GDATA_FLAG_MAIN) == 270 ) {
				sceneid = 109
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 275
			}
		}
		if ( gdata(GDATA_LEVEL) == 119 ) {
			if ( gdata(GDATA_FLAG_MAIN) == 275 ) {
				sceneid = 110
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 280
			}
		}
		if ( gdata(GDATA_LEVEL) == 125 ) {
			if ( gdata(GDATA_FLAG_MAIN) == 282 ) {
				sceneid = 111
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 285
			}
		}
		if ( gdata(GDATA_LEVEL) == 128 ) {
			if ( gdata(GDATA_FLAG_MAIN) == 285 ) {
				sceneid = 112
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 290
			}
		}
	}
	if ( gdata(GDATA_AREA) == AREA_CHAOS_CRADLE ) {
		if ( gdata(GDATA_LEVEL) == 140 ) {
			if ( gdata(GDATA_FLAG_MAIN) == 370 ) {
				sceneid = 124
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 375
			}
		}
		if ( gdata(GDATA_LEVEL) == 143 ) {
			if ( gdata(GDATA_FLAG_MAIN) == 375 ) {
				evadd EVENT_MARKA
				gdata(GDATA_FLAG_MAIN) = 378
			}
		}
		if ( gdata(GDATA_FLAG_MAIN) == 385 ) {
			sceneid = 127
			gosub *scene
			gdata(GDATA_FLAG_MAIN) = 387
		}
		if ( gdata(GDATA_LEVEL) == 146 ) {
			if ( gdata(GDATA_FLAG_MAIN) == 387 ) {
				sceneid = 128
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 390
			}
		}
		if ( gdata(GDATA_LEVEL) == 147 | gdata(GDATA_LEVEL) == 148 | gdata(GDATA_LEVEL) == 149 ) {
			if ( gdata(GDATA_FLAG_MAIN) == 455 ) {
				sceneid = 310
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 460
			}
		}
		if ( gdata(GDATA_LEVEL) == 149 ) {
			if ( gdata(GDATA_FLAG_MAIN) == 460 ) {
				sceneid = 315
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 470
			}
		}
		if ( gdata(GDATA_LEVEL) == 150 ) {
			if ( gdata(GDATA_FLAG_MAIN) == 490 ) {
				sceneid = 320
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 495
			}
		}
		if ( gdata(GDATA_LEVEL) == 152 ) {
			if ( gdata(GDATA_FLAG_MAIN) == 495 | gdata(GDATA_FLAG_MAIN) == 500 ) {
				sceneid = 325
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 505
			}
		}
		if ( gdata(GDATA_LEVEL) == 156 ) {
			if ( gdata(GDATA_FLAG_MAIN) == 525 | gdata(GDATA_FLAG_MAIN) == 530 ) {
				sceneid = 330
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 535
			}
		}
		if ( gdata(GDATA_LEVEL) == 158 ) {
			if ( gdata(GDATA_FLAG_MAIN) == 535 | gdata(GDATA_FLAG_MAIN) == 540 ) {
				sceneid = 335
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 545
			}
		}
		if ( gdata(GDATA_LEVEL) == 160 ) {
			if ( gdata(GDATA_FLAG_MAIN) == 550 | gdata(GDATA_FLAG_MAIN) == 560 ) {
				sceneid = 340
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 565
			}
		}
		if ( gdata(GDATA_LEVEL) == 162 ) {
			if ( gdata(GDATA_FLAG_MAIN) == 565 | gdata(GDATA_FLAG_MAIN) == 570 ) {
				sceneid = 345
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 575
			}
		}
		if ( gdata(GDATA_LEVEL) == 165 ) {
			if ( gdata(GDATA_FLAG_MAIN) == 590 ) {
				sceneid = 350
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 595
			}
		}
		if ( gdata(GDATA_LEVEL) == 167 ) {
			if ( gdata(GDATA_FLAG_MAIN) == 595 | gdata(GDATA_FLAG_MAIN) == 600 ) {
				sceneid = 355
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 605
			}
		}
		if ( gdata(GDATA_LEVEL) == 170 ) {
			if ( gdata(GDATA_FLAG_MAIN) == 620 ) {
				sceneid = 360
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 625
			}
		}
		if ( gdata(GDATA_LEVEL) == 172 ) {
			if ( gdata(GDATA_FLAG_MAIN) == 625 | gdata(GDATA_FLAG_MAIN) == 630 ) {
				sceneid = 365
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 635
			}
		}
		if ( gdata(GDATA_LEVEL) == 174 ) {
			if ( gdata(GDATA_FLAG_MAIN) == 640 ) {
				sceneid = 370
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 645
			}
		}
		if ( gdata(GDATA_LEVEL) == 176 ) {
			if ( gdata(GDATA_FLAG_MAIN) == 645 | gdata(GDATA_FLAG_MAIN) == 650 ) {
				sceneid = 375
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 655
			}
		}
		if ( gdata(GDATA_LEVEL) == 178 ) {
			if ( gdata(GDATA_FLAG_MAIN) == 655 | gdata(GDATA_FLAG_MAIN) == 660 ) {
				sceneid = 380
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 665
			}
		}
		if ( gdata(GDATA_FLAG_MAIN) == 695 ) {
			sceneid = 382
			gosub *scene
			gdata(GDATA_FLAG_MAIN) = 700
		}
		if ( gdata(GDATA_LEVEL) == 179 ) {
			if ( gdata(GDATA_FLAG_MAIN) == 700 ) {
				sceneid = 383
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 705
			}
		}
		if ( gdata(GDATA_LEVEL) == 179 ) {
			if ( gdata(GDATA_FLAG_MAIN) == 995 ) {
				gdata(GDATA_YEAR) += 3
				sceneid = 395
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 1000
				evadd EVENT_RETURN_FROM_CHAOS_CRADLE
			}
		}
	}
	if ( gdata(GDATA_AREA) == AREA_DOCK ) {
		if ( gdata(GDATA_LEVEL) == 70 ) {
			evadd EVENT_DOCK_WORKER
		}
	}
	proc "Map:Area specific"
	repeat MAX_CHARA_TOTAL
		if ( cdata(CDATA_ID, cnt) == CREATURE_ID_USER ) {
			if ( cdata(CDATA_PIC, cnt) < 693 | cdata(CDATA_PIC, cnt) > 724 ) {
				if ( cdata(CDATA_PIC, cnt) < 924 ) {
					cdata(CDATA_PIC, cnt) += 99
				}
			}
		}
		if ( cdata(CDATA_INIT_LIFEMANA, cnt) == 0 ) {
			cdata(CDATA_INIT_LIFEMANA, cnt) = limit(sorg(SKILL_ATTR_LIFE, cnt), 50, 200) + limit(sorg(SKILL_ATTR_MANA, cnt), 50, 200) / 2
		}
		if ( cdata(CDATA_INIT_ATTR, cnt) != 0 ) {
			continue
		}
		if ( cdata(CDATA_INIT_SPEED, cnt) != 0 ) {
			continue
		}
		cdata(CDATA_INIT_ATTR, cnt) = sorg(SKILL_ATTR_STR, cnt) + sorg(SKILL_ATTR_CON, cnt) + sorg(SKILL_ATTR_DEX, cnt) + sorg(SKILL_ATTR_PER, cnt) + sorg(SKILL_ATTR_LER, cnt) + sorg(SKILL_ATTR_WIL, cnt) + sorg(SKILL_ATTR_MAG, cnt) + sorg(SKILL_ATTR_CHA, cnt)
		cdata(CDATA_INIT_SPEED, cnt) = sorg(SKILL_ATTR_SPD, cnt)
	loop
	tc = findchara(CREATURE_ID_BIG_DADDY)
	if ( tc != CHARA_PLAYER ) {
		snd SOUNDLIST_BEAST02
		snd SOUNDLIST_BEAST02
		snd SOUNDLIST_BEAST02
		snd SOUNDLIST_BEAST02
		await 50
		snd SOUNDLIST_BEAST02
		snd SOUNDLIST_BEAST02
		snd SOUNDLIST_BEAST02
		snd SOUNDLIST_BEAST02
		await 50
		snd SOUNDLIST_BEAST02
		snd SOUNDLIST_BEAST02
		snd SOUNDLIST_BEAST02
		snd SOUNDLIST_BEAST02
		await 50
		snd SOUNDLIST_BEAST02
		snd SOUNDLIST_BEAST02
		snd SOUNDLIST_BEAST02
		snd SOUNDLIST_BEAST02
		txtef COLOR_BLUE
		msgtemp += lang("ビッグダディの唸り声が聞こえる…。", " You heard a growl of Big Daddy...")
	}
	if ( gdata(GDATA_AREA) == AREA_CHAOS_CRADLE ) {
		tc = findchara(CREATURE_ID_GETUEI_THE_NINJA_MASTER)
		if ( tc != CHARA_PLAYER ) {
			cbitmod CHARA_BIT_INVISIBLE, tc, 0
		}
	}
	if ( gdata(GDATA_AREA) == AREA_CHAOS_CRADLE ) {
		if ( gdata(GDATA_LEVEL) == 173 ) {
			tc = findchara(CREATURE_ID_ALFRED_THE_CANGNAN_WIND)
			if ( tc != CHARA_PLAYER ) {
				cdata(CDATA_CONDITION_DIM, tc) = 1000
				cdata(CDATA_HP, tc) = cdata(CDATA_MAX_HP, tc) / 2
			}
		}
	}
	if ( gdata(GDATA_AREA) == AREA_CHAOS_CRADLE ) {
		if ( gdata(GDATA_LEVEL) == 178 ) {
			tc = findchara(CREATURE_ID_BLACK_GAUNTLET_LEOLD)
			if ( tc == CHARA_PLAYER ) {
				if ( gdata(GDATA_FLAG_MAIN) == 680 ) {
					evadd EVENT_TEZCATLIPOCA2, 10, 7
				}
				tc = findchara(CREATURE_ID_TEZCATLIPOCA)
				if ( tc == CHARA_PLAYER ) {
					if ( gdata(GDATA_FLAG_MAIN) == 675 ) {
						if ( findchara(CREATURE_ID_BLACK_GAUNTLET_LEOLD) != 0 ) {
							chara_vanquish findchara(CREATURE_ID_BLACK_GAUNTLET_LEOLD)
						}
						evadd EVENT_TEZCATLIPOCA_ADDS2
					}
				}
			}
		}
	}
	if ( mdata(MDATA_TYPE) == MAP_TYPE_TOWN ) {
		if ( gdata(GDATA_FLAG_MAIN) >= 402 ) {
			if ( gdata(GDATA_FLAG_NEGATE_SPAWN_FRON) == 0 ) {
				if ( rnd(100) == 0 ) {
					tc = findchara(CREATURE_ID_FRON_THE_TOUR_PLANNER)
					if ( tc == CHARA_PLAYER ) {
						evadd EVENT_SPECIAL_SPAWN_COND
						gdata(GDATA_FLAG_NEGATE_SPAWN_FRON) = 1
					}
				}
			}
		}
	}
	if ( mdata(MDATA_TYPE) >= MAP_TYPE_DUNGEON_MIN ) {
		if ( zyuusann == 100 ) {
			if ( gdata(GDATA_LEVEL) >= 66 ) {
				if ( rnd(130) == 0 ) {
					if ( gdata(GDATA_DAY) == 1 | gdata(GDATA_DAY) == 3 | (gdata(GDATA_DAY) >= 11 & gdata(GDATA_DAY) <= 19) | gdata(GDATA_DAY) == 21 | gdata(GDATA_DAY) == 23 | gdata(GDATA_DAY) == 30 ) {
						snd SOUNDLIST_CURSE2
						txtef COLOR_RED
						msgtemp += lang("何かが階段から這い出してきた！", "Something has been crawled from the stairs!")
						evadd EVENT_SPECIAL_SPAWN_COND
					}
					zyuusann = 0
				}
			}
		}
	}
	repeat MAX_CHARA_TOTAL
		if ( cdata(CDATA_CHARACTER_TIER, cnt) != CHARACTER_TIER_SUMMONED_GOD_HOME ) {
			continue
		}
		if ( cdata(CDATA_CHARACTER_TIER, cnt) == CHARACTER_TIER_SUMMONED_GOD_HOME ) {
			chara_vanquish cnt
		}
	loop
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_TRUCE_GROUND ) {
		if ( gdata(GDATA_MONTH) != 11 ) {
			repeat MAX_CHARA_TOTAL - MAX_CHARA_SAVE, MAX_CHARA_SAVE
				if ( cdata(CDATA_CHARACTER_TIER, cnt) != CHARACTER_TIER_SUMMONED_GOD_TRUCE ) {
					continue
				}
				cdata(CDATA_EXIST, cnt) = CHAR_STATE_DEAD
				map(cdata(CDATA_X, cnt), cdata(CDATA_Y, cnt), 1) = 0
			loop
		}
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_TRUCE_GROUND ) {
		if ( gdata(GDATA_FLAG_TALKA_IN_TRUCE_GROUND) == 0 ) {
			if ( findchara(CREATURE_ID_TALKA_THE_LONG_TWINTAIL) != 0 ) {
				chara_vanquish findchara(CREATURE_ID_TALKA_THE_LONG_TWINTAIL)
			}
			evadd EVENT_SPAWN_EVENT_NPCS
			gdata(GDATA_FLAG_TALKA_IN_TRUCE_GROUND) = 1
		}
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_SISTER_MANSION ) {
		tc = findchara(CREATURE_ID_YOUNGER_SISTER2)
		if ( tc != CHARA_PLAYER ) {
			if ( cdata(CDATA_PORTRAIT, tc) != 39 ) {
				cdata(CDATA_PORTRAIT, tc) = 39
			}
		}
	}
	if ( gdata(GDATA_AREA) == AREA_ST_NORTH_BORDER ) {
		tc = findchara(CREATURE_ID_ZISILION_THE_MINE_KING)
		if ( tc != CHARA_PLAYER ) {
			if ( cdata(CDATA_ROLE, tc) == ROLE_SPECIAL ) {
				if ( cdata(CDATA_QUALITY, tc) != FIX_QUALITY_UNIQUE ) {
					cdata(CDATA_QUALITY, tc) = FIX_QUALITY_UNIQUE
				}
			}
		}
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_LESIMAS ) {
		if ( gdata(GDATA_LEVEL) == 20 ) {
			if ( gdata(STARTING_GDATA_FLAG + 361) == 0 ) {
				evadd EVENT_LESIMAS
				gdata(STARTING_GDATA_FLAG + 361) = 10
			}
		}
		if ( gdata(GDATA_LEVEL) == 25 ) {
			if ( gdata(STARTING_GDATA_FLAG + 361) == 10 ) {
				evadd EVENT_LESIMAS
				gdata(STARTING_GDATA_FLAG + 361) = 20
			}
		}
		if ( gdata(GDATA_LEVEL) == 30 ) {
			if ( gdata(STARTING_GDATA_FLAG + 361) == 20 ) {
				evadd EVENT_LESIMAS
				gdata(STARTING_GDATA_FLAG + 361) = 30
			}
		}
		if ( gdata(GDATA_LEVEL) == 34 ) {
			if ( gdata(STARTING_GDATA_FLAG + 361) == 35 ) {
				evadd EVENT_LESIMAS
				gdata(STARTING_GDATA_FLAG + 361) = 40
			}
		}
		if ( gdata(GDATA_LEVEL) == 40 ) {
			if ( gdata(STARTING_GDATA_FLAG + 361) == 40 ) {
				evadd EVENT_LESIMAS
				gdata(STARTING_GDATA_FLAG + 361) = 50
			}
		}
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_SEMINAR ) {
		if ( gdata(GDATA_LEVEL) >= 2 & gdata(GDATA_LEVEL) <= 5 ) {
			evadd EVENT_SEMINAR
		}
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_NOYEL ) {
		if ( adata(ADATA_MAX_LEVEL, gdata(GDATA_AREA)) == 1 ) {
			adata(ADATA_MAX_LEVEL, gdata(GDATA_AREA)) = 100
		}
		if ( gdata(GDATA_LEVEL) == 100 ) {
			if ( mapidou == 100 ) {
				mapidou = 0
				evadd EVENT_ERYSTIA
			}
		}
		tc = findchara(CREATURE_ID_LONELY_PAEL)
		if ( tc != CHARA_PLAYER ) {
			if ( cdata(CDATA_PORTRAIT, tc) != 62 ) {
				cdata(CDATA_PORTRAIT, tc) = 62
			}
		}
		tc = findchara(CREATURE_ID_PAELS_MOM_LILY)
		if ( tc != CHARA_PLAYER ) {
			cdata(CDATA_PORTRAIT, tc) = 63
			if ( gdata(GDATA_FLAG_SUB_MOTHER) >= 10 ) {
				cdata(CDATA_PIC, tc) = xy2pic(30, 10)
				cdata(CDATA_PORTRAIT, tc) = -1
			}
		}
		tc = findchara(CREATURE_ID_MOYER_THE_CROOKED)
		if ( tc != CHARA_PLAYER ) {
			if ( cdata(CDATA_PORTRAIT, tc) != 75 ) {
				cdata(CDATA_PORTRAIT, tc) = 75
			}
		}
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_MIROK_WORKSHOP ) {
		tc = findchara(CREATURE_ID_MIRAL_THE_LEGENDARY_SMITH)
		if ( tc != CHARA_PLAYER ) {
			if ( cdata(CDATA_PORTRAIT, tc) != 81 ) {
				cdata(CDATA_PORTRAIT, tc) = 81
			}
		}
		tc = findchara(CREATURE_ID_GAROK_THE_LEGENDARY_SMITH)
		if ( tc != CHARA_PLAYER ) {
			if ( cdata(CDATA_PORTRAIT, tc) != 82 ) {
				cdata(CDATA_PORTRAIT, tc) = 82
			}
		}
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_CYBER_DOME ) {
		if ( gdata(GDATA_FLAG_LEOLD_LOCATION_STATE) == 0 ) {
			if ( findchara(CREATURE_ID_BLACK_GAUNTLET_LEOLD) != 0 ) {
				chara_vanquish findchara(CREATURE_ID_BLACK_GAUNTLET_LEOLD)
			}
			evadd EVENT_SPAWN_EVENT_NPCS
			gdata(GDATA_FLAG_LEOLD_LOCATION_STATE) = 1
		}
		tc = findchara(CREATURE_ID_BLACK_GAUNTLET_LEOLD)
		if ( tc != CHARA_PLAYER ) {
			if ( gdata(GDATA_FLAG_LEOLD_LOCATION_STATE) >= 2 & gdata(GDATA_FLAG_MAIN) >= 200 ) {
				chara_vanquish findchara(CREATURE_ID_BLACK_GAUNTLET_LEOLD)
			}
		}
		tc = findchara(CREATURE_ID_STRANGE_SCIENTIST)
		if ( tc != CHARA_PLAYER ) {
			if ( cdata(CDATA_PORTRAIT, tc) != 46 ) {
				cdata(CDATA_PORTRAIT, tc) = 46
			}
		}
		repeat MAX_CHARA_TOTAL
			p = SKILL_WEAPON_FIREARM
			if ( cdata(CDATA_EXIST, cnt) != CHAR_STATE_ALIVE ) {
				continue
			}
			tc = cnt
			if ( sdataref(SKILL_DATAREF_USE, p) != 0 ) {
				if ( sdata(p, tc) != 0 ) {
					continue
				}
				skillgain tc, p, 1
				snd SOUNDLIST_DING2
			}
		loop
		r1 = tc
		gosub *charaRefresh
		inv_getheader 0
		f = 0
		repeat invrange, invhead
			if ( inv(INV_ITEM_NUM, cnt) > 0 ) {
				if ( inv(INV_ITEM_ID, cnt) == ITEM_ID_ANCIENT_BOOK & inv(INV_ITEM_PARAM1, cnt) >= 16 ) {
					f = 1
					txtef COLOR_YELLOW
					msgtemp += lang("異常な物質を感知。" + inv(INV_ITEM_ID, cnt) + "番消去プログラムの" + inv(INV_ITEM_PARAM1, cnt) + "号を作動…。", "Detect the abnormal material. ... Erase operation is complete.")
					inv(INV_ITEM_NUM, cnt) = 0
				}
			}
			if ( inv(INV_ITEM_NUM, cnt) > 0 ) {
				if ( inv(INV_ITEM_ID, cnt) == ITEM_ID_DEED & inv(INV_ITEM_PARAM1, cnt) >= 7 ) {
					f = 1
					txtef COLOR_YELLOW
					msgtemp += lang("異常な物質を感知。" + inv(INV_ITEM_ID, cnt) + "番消去プログラムの" + inv(INV_ITEM_PARAM1, cnt) + "号を作動…。", "Detect the abnormal material. ... Erase operation is complete.")
					inv(INV_ITEM_NUM, cnt) = 0
				}
			}
			if ( inv(INV_ITEM_NUM, cnt) > 0 ) {
				if ( inv(INV_ITEM_ID, cnt) == ITEM_ID_BAIT & inv(INV_ITEM_PARAM1, cnt) >= 6 ) {
					f = 1
					txtef COLOR_YELLOW
					msgtemp += lang("異常な物質を感知。" + inv(INV_ITEM_ID, cnt) + "番消去プログラムの" + inv(INV_ITEM_PARAM1, cnt) + "号を作動…。", "Detect the abnormal material. ... Erase operation is complete.")
					inv(INV_ITEM_NUM, cnt) = 0
				}
			}
			if ( inv(INV_ITEM_NUM, cnt) > 0 ) {
				if ( inv(INV_ITEM_ID, cnt) == ITEM_ID_EVITEM ) {
					if ( inv(INV_ITEM_PARAM1, cnt) < EVITEM_HEART_KING ) {
						inv(INV_ITEM_PARAM1, cnt) = EVITEM_HEART_EVOLUTION
						f = 1
						txtef COLOR_YELLOW
						msgtemp += lang("進化プログラムの再構成を完了…。", "Detect the abnormal material. ... Erase operation is complete.")
					}
				}
			}
		loop
	}
	if ( adata(ADATA_EXTRA_MEDAL, gdata(GDATA_AREA)) == 0 & adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_RANDOM_DUNGEON ) {
		adata(ADATA_EXTRA_MEDAL, gdata(GDATA_AREA)) = rnd(gdata(GDATA_LEVEL))
		if ( adata(ADATA_EXTRA_MEDAL, gdata(GDATA_AREA)) < 50 ) {
			adata(ADATA_EXTRA_MEDAL, gdata(GDATA_AREA)) = -1
		}
	}
	if ( adata(ADATA_WAKEUP_NEFIA, gdata(GDATA_AREA)) != WAKEUP_NEFIA_NONE ) {
		if ( adata(ADATA_NEFIA_GEM_CHANCE, gdata(GDATA_AREA)) == 0 ) {
			adata(ADATA_NEFIA_GEM_CHANCE, gdata(GDATA_AREA)) = rnd(gdata(GDATA_LEVEL))
			if ( adata(ADATA_NEFIA_GEM_CHANCE, gdata(GDATA_AREA)) < 50 ) {
				adata(ADATA_NEFIA_GEM_CHANCE, gdata(GDATA_AREA)) = -1
			}
			if ( adata(ADATA_NEFIA_GEM_CHANCE, gdata(GDATA_AREA)) >= 50 ) {
				adata(ADATA_NEFIA_GEM_CHANCE, gdata(GDATA_AREA)) = rnd(50) + 1
			}
		}
		evadd EVENT_NEFIA_EFFECT
		adata(ADATA_WAKEUP_NEFIA, gdata(GDATA_AREA)) = WAKEUP_NEFIA_NORMAL + gdata(GDATA_LEVEL) - gdata(GDATA_LEVEL) / 10 * 10
		if ( adata(ADATA_WAKEUP_NEFIA, gdata(GDATA_AREA)) == WAKEUP_NEFIA_NORMAL ) {
			msgtemp += lang("この階層は帯電しているようだ。", "The floor seems to be charged.")
		}
		if ( adata(ADATA_WAKEUP_NEFIA, gdata(GDATA_AREA)) == WAKEUP_NEFIA_TIME ) {
			msgtemp += lang("この階層は時の流れが不安定だ。", "Passage of time is unstable on this floor.")
		}
		if ( adata(ADATA_WAKEUP_NEFIA, gdata(GDATA_AREA)) == WAKEUP_NEFIA_POISON ) {
			msgtemp += lang("この階層には毒が充満しているようだ。", "Poison seems to fill this floor.")
		}
		if ( adata(ADATA_WAKEUP_NEFIA, gdata(GDATA_AREA)) == WAKEUP_NEFIA_GRAVITY ) {
			msgtemp += lang("この階層の重力は強い。", "Gravity is strong on this floor.")
		}
	}
	if ( gdata(GDATA_WORLD) == AREA_NORTH_TYRIS | gdata(GDATA_WORLD) == AREA_SOUTH_TYRIS ) {
		if ( mdata(MDATA_TYPE) == MAP_TYPE_TOWN ) {
			if ( adata(ADATA_REVIVED_CITIZENS, gdata(GDATA_AREA)) == 0 ) {
				repeat MAX_CHARA_TOTAL
					if ( cdata(CDATA_ID, cnt) == CREATURE_ID_CITIZEN | cdata(CDATA_ID, cnt) == CREATURE_ID_CITIZEN2 | cdata(CDATA_ID, cnt) == CREATURE_ID_CITIZEN4 | cdata(CDATA_ID, cnt) == CREATURE_ID_CITIZEN3 ) {
						if ( cdata(CDATA_ALLIED, cnt) == 0 ) {
							cdata(CDATA_EXIST, cnt) = CHAR_STATE_ALIVE
						}
					}
				loop
				adata(ADATA_REVIVED_CITIZENS, gdata(GDATA_AREA)) = 10
			}
		}
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_NT_SOUTH_BORDER | adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_ST_NORTH_BORDER ) {
		if ( adata(ADATA_MAX_LEVEL, gdata(GDATA_AREA)) == 1 ) {
			adata(ADATA_MAX_LEVEL, gdata(GDATA_AREA)) = 100
		}
		if ( gdata(GDATA_LEVEL) == 1 ) {
			if ( gdata(GDATA_AREA) == AREA_ST_NORTH_BORDER ) {
				if ( gdata(STARTING_GDATA_FLAG + 326) == 0 ) {
					evadd EVENT_SPAWN_EVENT_NPCS
					gdata(STARTING_GDATA_FLAG + 326) = 1
				}
			}
		}
		if ( gdata(GDATA_LEVEL) == 1 ) {
			if ( gdata(GDATA_AREA) == AREA_NT_SOUTH_BORDER ) {
				if ( gdata(GDATA_FLAG_MAIN) >= 404 ) {
					if ( gdata(GDATA_FLAG_SUB_REGULUS_ZANAN) == 1 ) {
						evadd EVENT_SPAWN_EVENT_NPCS
						gdata(GDATA_FLAG_SUB_REGULUS_ZANAN) = 2
					}
				}
			}
		}
		if ( gdata(GDATA_LEVEL) == 1 ) {
			if ( gdata(GDATA_AREA) == AREA_NT_SOUTH_BORDER ) {
				if ( gdata(GDATA_FLAG_MAIN) >= 505 ) {
					if ( gdata(GDATA_FLAG_SUB_REGULUS_ZANAN) == 1000 | gdata(GDATA_FLAG_SUB_REGULUS_ZANAN) == 1001 ) {
						evadd EVENT_SPAWN_EVENT_NPCS
						gdata(GDATA_FLAG_SUB_REGULUS_ZANAN) = 1002
					}
				}
			}
		}
		if ( gdata(GDATA_LEVEL) == 100 ) {
			if ( gdata(GDATA_AREA) == AREA_NT_SOUTH_BORDER ) {
				if ( mapidou == 100 ) {
					mapidou = 0
					evadd EVENT_ERYSTIA
				}
			}
		}
		if ( gdata(GDATA_FLAG_MAIN) == 430 ) {
			if ( gdata(GDATA_FLAG_SUB_REGULUS_ZANAN) + gdata(GDATA_FLAG_SUB_REGULUS_EULDERNA) + gdata(GDATA_FLAG_SUB_REGULUS_KIKKASU) + gdata(GDATA_FLAG_SUB_REGULUS_MAYROON) >= 4000 ) {
				sceneid = 300
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 440
			}
		}
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_BLIMP ) {
		if ( gdata(GDATA_LEVEL) == 100 ) {
			if ( mapidou == 100 ) {
				mapidou = 0
				evadd EVENT_ERYSTIA
			}
		}
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_DOCK ) {
		if ( gdata(GDATA_LEVEL) == 100 ) {
			if ( mapidou == 100 ) {
				mapidou = 0
				evadd EVENT_ERYSTIA
			}
		}
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_LUMIEST ) {
		if ( gdata(GDATA_LEVEL) == 3 ) {
			evadd EVENT_GUILD, gdata(GDATA_FLAG_GUILD_MAGE)
			tc = findchara(CREATURE_ID_REVLUS_THE_MAGE_GUILDMASTER)
			if ( tc != CHARA_PLAYER ) {
				if ( cdata(CDATA_PORTRAIT, tc) != 67 ) {
					cdata(CDATA_PORTRAIT, tc) = 67
				}
			}
		}
		tc = findchara(CREATURE_ID_RENTON_THE_SUFFERING_WIZARD)
		if ( tc != CHARA_PLAYER ) {
			if ( cdata(CDATA_PORTRAIT, tc) != 40 ) {
				cdata(CDATA_PORTRAIT, tc) = 40
			}
		}
		tc = findchara(CREATURE_ID_BALZAK_THE_JANITOR)
		if ( tc != CHARA_PLAYER ) {
			if ( cdata(CDATA_PORTRAIT, tc) != 64 ) {
				cdata(CDATA_PORTRAIT, tc) = 64
			}
		}
		tc = findchara(CREATURE_ID_LEXUS_THE_MAGE_WATCHMAN)
		if ( tc != CHARA_PLAYER ) {
			if ( cdata(CDATA_PORTRAIT, tc) != 66 ) {
				cdata(CDATA_PORTRAIT, tc) = 66
			}
		}
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_DERPHY ) {
		if ( gdata(GDATA_LEVEL) == 3 ) {
			evadd EVENT_GUILD, gdata(GDATA_FLAG_GUILD_THIEF)
			tc = findchara(CREATURE_ID_SIN_THE_THIEF_GUILDMASTER)
			if ( tc != CHARA_PLAYER ) {
				if ( cdata(CDATA_PORTRAIT, tc) != 68 ) {
					cdata(CDATA_PORTRAIT, tc) = 68
				}
			}
		}
		tc = findchara(CREATURE_ID_NOEL_THE_BOMBER)
		if ( tc != CHARA_PLAYER ) {
			if ( cdata(CDATA_PORTRAIT, tc) != 53 ) {
				cdata(CDATA_PORTRAIT, tc) = 53
			}
		}
		tc = findchara(CREATURE_ID_MARKS_THE_GREAT_THIEF)
		if ( tc != CHARA_PLAYER ) {
			if ( cdata(CDATA_PORTRAIT, tc) != 37 ) {
				cdata(CDATA_PORTRAIT, tc) = 37
			}
		}
		tc = findchara(CREATURE_ID_ABYSS_THE_THIEF_WATCHMAN)
		if ( tc != CHARA_PLAYER ) {
			if ( cdata(CDATA_PORTRAIT, tc) != 66 ) {
				cdata(CDATA_PORTRAIT, tc) = 66
			}
		}
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_PORT_KAPUL ) {
		if ( gdata(GDATA_LEVEL) == 3 ) {
			evadd EVENT_GUILD, gdata(GDATA_FLAG_GUILD_FIGHTER)
			tc = findchara(CREATURE_ID_FRAY_THE_FIGHTER_GUILDMASTER)
			if ( tc != CHARA_PLAYER ) {
				if ( cdata(CDATA_PORTRAIT, tc) != 64 ) {
					cdata(CDATA_PORTRAIT, tc) = 64
				}
			}
		}
		tc = findchara(CREATURE_ID_DORIA_THE_FIGHTER_WATCHMAN)
		if ( tc != CHARA_PLAYER ) {
			if ( cdata(CDATA_PORTRAIT, tc) != 66 ) {
				cdata(CDATA_PORTRAIT, tc) = 66
			}
		}
		tc = findchara(CREATURE_ID_RAPHAEL_THE_WOMANIZER)
		if ( tc != CHARA_PLAYER ) {
			if ( cdata(CDATA_PORTRAIT, tc) != 69 ) {
				cdata(CDATA_PORTRAIT, tc) = 69
			}
		}
		tc = findchara(CREATURE_ID_ICOLLE_THE_BIOLOGIST)
		if ( tc != CHARA_PLAYER ) {
			if ( cdata(CDATA_PORTRAIT, tc) != 71 ) {
				cdata(CDATA_PORTRAIT, tc) = 71
			}
		}
	}
	if ( gdata(GDATA_AREA) == AREA_VERNIS ) {
		if ( gdata(GDATA_FLAG_MAIN) == 0 ) {
			sceneid = 1
			gosub *scene
			gdata(GDATA_FLAG_MAIN) = 9
		}
		if ( gdata(GDATA_FLAG_ALLY) == 0 ) {
			gdata(GDATA_FLAG_ALLY) = 1
			evadd EVENT_FIRST_ALLY
		}
		if ( gdata(GDATA_FLAG_MAIN) == 770 ) {
			sceneid = 385
			gosub *scene
			evadd EVENT_NORNE
		}
	}
	if ( gdata(GDATA_AREA) == AREA_PALMIA ) {
		if ( gdata(GDATA_FLAG_MAIN) == 30 ) {
			sceneid = 4
			gosub *scene
			gdata(GDATA_FLAG_MAIN) = 40
		}
		if ( gdata(GDATA_FLAG_MAIN) == 100 ) {
			sceneid = 19
			gosub *scene
			gdata(GDATA_FLAG_MAIN) = 105
		}
		if ( gdata(GDATA_FLAG_MAIN) == 355 ) {
			sceneid = 120
			gosub *scene
			gdata(GDATA_FLAG_MAIN) = 360
		}
		if ( gdata(GDATA_FLAG_MAIN) == 402 ) {
			sceneid = 132
			gosub *scene
			gdata(GDATA_FLAG_MAIN) = 404
		}
		if ( gdata(GDATA_FLAG_SUB_MONOCHROME_DELIVERY_SERVICE) == 1 ) {
			if ( findchara(CREATURE_ID_KURON_THE_BLACK_CLOTH) != 0 ) {
				chara_vanquish findchara(CREATURE_ID_KURON_THE_BLACK_CLOTH)
			}
			evadd EVENT_SPAWN_EVENT_NPCS
			gdata(GDATA_FLAG_SUB_MONOCHROME_DELIVERY_SERVICE) = 2
		}
		tc = findchara(CREATURE_ID_KURON_THE_BLACK_CLOTH)
		if ( tc != CHARA_PLAYER ) {
			if ( cdata(CDATA_PORTRAIT, tc) != 32 ) {
				cdata(CDATA_PORTRAIT, tc) = 32
			}
		}
	}
	if ( gdata(GDATA_AREA) == AREA_YOWYN ) {
		tc = findchara(CREATURE_ID_TAM_THE_CAT_HATER)
		if ( tc != CHARA_PLAYER ) {
			if ( cdata(CDATA_PORTRAIT, tc) != 70 ) {
				cdata(CDATA_PORTRAIT, tc) = 70
			}
		}
	}
	if ( gdata(GDATA_AREA) == AREA_KURUALM ) {
		if ( gdata(GDATA_FLAG_SUB_LAW_OF_NINJAS) == 1000 ) {
			if ( findchara(CREATURE_ID_NEW_CITIZEN) != 0 ) {
				chara_vanquish findchara(CREATURE_ID_NEW_CITIZEN)
			}
			evadd EVENT_SPAWN_EVENT_NPCS
			gdata(GDATA_FLAG_SUB_LAW_OF_NINJAS) = 1001
		}
		tc = findchara(CREATURE_ID_MILOS_OF_THE_FORGOTTEN_WORLD)
		if ( tc != CHARA_PLAYER ) {
			if ( cdata(CDATA_PORTRAIT, tc) != 65 ) {
				cdata(CDATA_PORTRAIT, tc) = 65
			}
		}
		tc = findchara(CREATURE_ID_EILA_THE_FUGITIVE_KUNOICHI)
		if ( tc != CHARA_PLAYER ) {
			if ( cdata(CDATA_PORTRAIT, tc) != 47 ) {
				cdata(CDATA_PORTRAIT, tc) = 47
			}
		}
		tc = findchara(CREATURE_ID_NEW_CITIZEN)
		if ( tc != CHARA_PLAYER ) {
			if ( cdata(CDATA_PORTRAIT, tc) != 47 ) {
				cdata(CDATA_PORTRAIT, tc) = 47
			}
		}
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_DOJO ) {
		tc = findchara(CREATURE_ID_NAZUNA_THE_INSTRUCTOR)
		if ( tc != CHARA_PLAYER ) {
			if ( cdata(CDATA_PORTRAIT, tc) != 65 ) {
				cdata(CDATA_PORTRAIT, tc) = 65
			}
		}
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_EIREL ) {
		tc = findchara(CREATURE_ID_ALCHEMIST_NAPLUS)
		if ( tc != CHARA_PLAYER ) {
			if ( cdata(CDATA_PORTRAIT, tc) != 36 ) {
				cdata(CDATA_PORTRAIT, tc) = 36
			}
		}
		tc = findchara(CREATURE_ID_DOG_COP)
		if ( tc != CHARA_PLAYER ) {
			if ( cdata(CDATA_PORTRAIT, tc) != 38 ) {
				cdata(CDATA_PORTRAIT, tc) = 38
			}
		}
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_RUOZA ) {
		if ( gdata(GDATA_FLAG_LEOLD_LOCATION_STATE) == 2 ) {
			if ( findchara(CREATURE_ID_BLACK_GAUNTLET_LEOLD) != 0 ) {
				chara_vanquish findchara(CREATURE_ID_BLACK_GAUNTLET_LEOLD)
			}
			evadd EVENT_SPAWN_EVENT_NPCS
			gdata(GDATA_FLAG_LEOLD_LOCATION_STATE) = 3
		}
 		if ( gdata(GDATA_FLAG_MAIN) >= 625 ) {
 			if ( gdata(GDATA_FLAG_ENCOUNTER_HALION_IN_RUOZA) == 0 ) {
				if ( findchara(CREATURE_ID_MILOS_OF_THE_FORGOTTEN_WORLD) != 0 ) {
					chara_vanquish findchara(CREATURE_ID_MILOS_OF_THE_FORGOTTEN_WORLD)
				}
				if ( findchara(CREATURE_ID_HALION_THE_EXTREMIST) != 0 ) {
					chara_vanquish findchara(CREATURE_ID_HALION_THE_EXTREMIST)
				}
 				evadd EVENT_SOUTH_TYRIS
 				gdata(GDATA_FLAG_ENCOUNTER_HALION_IN_RUOZA) = 1
 			}
 		}
		tc = findchara(CREATURE_ID_BLACK_GAUNTLET_LEOLD)
		if ( tc != CHARA_PLAYER ) {
			if ( gdata(GDATA_FLAG_MAIN) >= 365 ) {
				chara_vanquish findchara(CREATURE_ID_BLACK_GAUNTLET_LEOLD)
			}
		}
		if ( gdata(GDATA_FLAG_MAIN) >= 835 ) {
			tc = findchara(CREATURE_ID_CARLA_OF_THE_FORGOTTEN_WORLD)
			if ( tc != CHARA_PLAYER ) {
				evname = lang("忘れられない世界の『カルラ』", "<Karura> the unforgettable singularity")
				evold = lang("忘れられた世界の『カルラ』", "<Karura> hail flom Erusia")
				if ( strmid(cdatan(CDATAN_NAME, tc), 0, strlen(evold)) == evold ) {
					cdatan(CDATAN_NAME, tc) = evname + strmid(cdatan(CDATAN_NAME, tc), strlen(evold), strlen(cdatan(CDATAN_NAME, tc)) - strlen(evold))
				}
				if ( strlen(cdatan(CDATAN_NAME, tc)) > strlen(evname) ) {
					cdatan(CDATAN_NAME, tc) = evname
				}
			}
			tc = findchara(CREATURE_ID_MILOS_OF_THE_FORGOTTEN_WORLD)
			if ( tc != CHARA_PLAYER ) {
				evname = lang("忘れられない世界の『ミロス』", "<Miros> the unforgettable singularity")
				evold = lang("忘れられた世界の『ミロス』", "<Miros> hail flom Erusia")
				if ( strmid(cdatan(CDATAN_NAME, tc), 0, strlen(evold)) == evold ) {
					cdatan(CDATAN_NAME, tc) = evname + strmid(cdatan(CDATAN_NAME, tc), strlen(evold), strlen(cdatan(CDATAN_NAME, tc)) - strlen(evold))
				}
				if ( strlen(cdatan(CDATAN_NAME, tc)) > strlen(evname) ) {
					cdatan(CDATAN_NAME, tc) = evname
				}
			}
		}
	}
	if ( gdata(GDATA_AREA) == AREA_LUDUS ) {
		tc = findchara(CREATURE_ID_BANKRUPT_GUO)
		if ( tc != CHARA_PLAYER ) {
			if ( cdata(CDATA_PORTRAIT, tc) != 72 ) {
				cdata(CDATA_PORTRAIT, tc) = 72
			}
		}
		tc = findchara(CREATURE_ID_SIRAHA_THE_WHITE_CLOTH)
		if ( tc != CHARA_PLAYER ) {
			if ( cdata(CDATA_PORTRAIT, tc) != 34 ) {
				cdata(CDATA_PORTRAIT, tc) = 34
			}
		}
		tc = findchara(CREATURE_ID_OLDER_SISTER2)
		if ( tc != CHARA_PLAYER ) {
			if ( cdata(CDATA_PORTRAIT, tc) != 66 ) {
				cdata(CDATA_PORTRAIT, tc) = 66
			}
			if ( adata(ADATA_FESTIVAL, gdata(GDATA_AREA)) == 0 ) {
				cdata(CDATA_PIC, tc) = xy2pic(23, 8)
			}
			if ( adata(ADATA_FESTIVAL, gdata(GDATA_AREA)) == 1 ) {
				cdata(CDATA_PIC, tc) = xy2pic(24, 15)
			}
		}
		if ( adata(ADATA_FESTIVAL, gdata(GDATA_AREA)) == 1 ) {
			evadd EVENT_FESTIVAL_MUSIC
		}
		if ( gdata(GDATA_LEVEL) == 3 & gdata(GDATA_FLAG_SUB_H_SISTER) < 2 ) {
			evadd EVENT_H_SISTER
		}
	}
	if ( gdata(GDATA_AREA) == AREA_MAID_MANSION ) {
		if ( gdata(GDATA_LEVEL) == 1 ) {
			if ( gdata(GDATA_FLAG_SUB_MANSION_FOR_SALE) < 1003 ) {
				if ( rnd(2) == 0 ) {
					evadd EVENT_SPAWN_EVENT_NPCS
					gdata(GDATA_FLAG_SUB_MANSION_FOR_SALE) = 1001
				}
			}
		}
		mdata(MDATA_NO_RENEW) = 0
	}
	if ( gdata(GDATA_AREA) == AREA_MELUGAS ) {
		mdata(MDATA_TILESET) = 8
		if ( gdata(GDATA_FLAG_MAIN) >= 390 ) {
			if ( gdata(GDATA_FLAG_VISITED_MELUGAS) == 0 ) {
				evadd EVENT_SPAWN_EVENT_NPCS
			}
		}
		if ( gdata(GDATA_FLAG_MAIN) >= 480 ) {
			if ( gdata(GDATA_FLAG_VISITED_MELUGAS) == 1 ) {
				evadd EVENT_SPAWN_EVENT_NPCS
			}
		}
		if ( gdata(GDATA_FLAG_MAIN) == 210 ) {
			sceneid = 102
			gosub *scene
			gdata(GDATA_FLAG_MAIN) = 215
		}
		if ( gdata(GDATA_FLAG_MAIN) == 440 ) {
			sceneid = 305
			gosub *scene
			gdata(GDATA_FLAG_MAIN) = 450
		}
		tc = findchara(CREATURE_ID_LEAD_DEVELOPER_DR_GAVELA)
		if ( tc != CHARA_PLAYER ) {
			if ( cdata(CDATA_PORTRAIT, tc) != 45 ) {
				cdata(CDATA_PORTRAIT, tc) = 45
			}
		}
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_ARCBELC ) {
		if ( gdata(GDATA_FLAG_VISITED_ARCBELC) == 0 ) {
			if ( findchara(CREATURE_ID_LENAS_THE_MAGE_REPORTER) != 0 ) {
				chara_vanquish findchara(CREATURE_ID_LENAS_THE_MAGE_REPORTER)
			}
			evadd EVENT_SPAWN_EVENT_NPCS
			gdata(GDATA_FLAG_VISITED_ARCBELC) = 1
		}
		tc = findchara(CREATURE_ID_ARMA_THE_TOUR_GUIDE)
		if ( tc != CHARA_PLAYER ) {
			if ( cdata(CDATA_PORTRAIT, tc) != 38 ) {
				cdata(CDATA_PORTRAIT, tc) = 38
			}
		}
		tc = findchara(CREATURE_ID_MEFAN_THE_BARD)
		if ( tc != CHARA_PLAYER ) {
			if ( cdata(CDATA_PORTRAIT, tc) != 41 ) {
				cdata(CDATA_PORTRAIT, tc) = 41
			}
		}
		tc = findchara(CREATURE_ID_RICH_PERSON_STOKE)
		if ( tc != CHARA_PLAYER ) {
			if ( cdata(CDATA_PORTRAIT, tc) != 73 ) {
				cdata(CDATA_PORTRAIT, tc) = 73
			}
		}
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_MELKAWN ) {
		if ( gdata(GDATA_FLAG_VISITED_MELKAWN) == 0 ) {
			if ( findchara(CREATURE_ID_NAGA_THE_THIEF_REPORTER) != 0 ) {
				chara_vanquish findchara(CREATURE_ID_NAGA_THE_THIEF_REPORTER)
			}
			evadd EVENT_SPAWN_EVENT_NPCS
			gdata(GDATA_FLAG_VISITED_MELKAWN) = 1
		}
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_VALM ) {
		if ( gdata(GDATA_FLAG_VISITED_VALM) == 0 ) {
			if ( gdata(GDATA_LEVEL) == 1 ) {
				if ( findchara(CREATURE_ID_RATIN_THE_FIGHTER_REPORTER) != 0 ) {
					chara_vanquish findchara(CREATURE_ID_RATIN_THE_FIGHTER_REPORTER)
				}
				evadd EVENT_SPAWN_EVENT_NPCS
				gdata(GDATA_FLAG_VISITED_VALM) = 1
			}
		}
 		if ( gdata(GDATA_FLAG_SUB_NINE_HEAD_DRAGON) == 3 ) {
 			if ( gdata(GDATA_LEVEL) == 1 ) {
				if ( findchara(CREATURE_ID_SNAIL_THE_ANDROID_RIDER) != 0 ) {
					chara_vanquish findchara(CREATURE_ID_SNAIL_THE_ANDROID_RIDER)
				}
				if ( findchara(CREATURE_ID_RECONCILED_CLEANER) != 0 ) {
					chara_vanquish findchara(CREATURE_ID_RECONCILED_CLEANER)
				}
 				evadd EVENT_SOUTH_TYRIS
 				gdata(GDATA_FLAG_SUB_NINE_HEAD_DRAGON) = 4
 			}
 		}
		if ( gdata(GDATA_LEVEL) == 3 ) {
			tc = findchara(CREATURE_ID_MIZUKI_THE_ABYSS_PRINCESS)
			if ( tc != CHARA_PLAYER ) {
				if ( cdata(CDATA_PORTRAIT, tc) != 35 ) {
					cdata(CDATA_PORTRAIT, tc) = 35
				}
			}
			if ( TweakData(51, 2) == 0 ) {
				gdata(GDATA_FLAG_INSIDE_DEEP_SEA_CASTLE) = 100
			}
		}
	}
	if ( gdata(GDATA_AREA) == AREA_LARNA ) {
		if ( gdata(GDATA_FLAG_VISITED_LARNA) == 0 ) {
			evadd EVENT_SPAWN_EVENT_NPCS
		}
		if ( gdata(GDATA_FLAG_SUB_NORNE_THE_GUIDE) == 0 ) {
			if ( gdata(GDATA_FLAG_MAIN) >= 394 ) {
				evadd EVENT_SPAWN_EVENT_NPCS
			}
		}
		if ( gdata(GDATA_FLAG_MAIN) == 394 ) {
			sceneid = 129
			gosub *scene
			gdata(GDATA_FLAG_MAIN) = 396
		}
		if ( gdata(GDATA_FLAG_MAIN) == 430 ) {
			if ( gdata(GDATA_FLAG_SUB_REGULUS_ZANAN) + gdata(GDATA_FLAG_SUB_REGULUS_EULDERNA) + gdata(GDATA_FLAG_SUB_REGULUS_KIKKASU) + gdata(GDATA_FLAG_SUB_REGULUS_MAYROON) >= 4000 ) {
				sceneid = 300
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 440
			}
		}
		tc = findchara(CREATURE_ID_CHILD_WEL)
		if ( tc != CHARA_PLAYER ) {
			if ( cdata(CDATA_PORTRAIT, tc) != 74 ) {
				cdata(CDATA_PORTRAIT, tc) = 74
			}
		}
	}
	if ( gdata(GDATA_AREA) == AREA_NORTH_TYRIS ) {
		if ( gdata(GDATA_FLAG_MAIN) == 180 ) {
			sceneid = 30
			gosub *scene
			gdata(GDATA_FLAG_MAIN) = 200
			gdata(GDATA_YEAR) += 3
		}
		if ( gdata(GDATA_FLAG_MAIN) == 351 ) {
			sceneid = 119
			gosub *scene
			gdata(GDATA_FLAG_MAIN) = 355
			msg_newline
			msgtemp = lang("  あなたはヨウィンで荷馬車から抜け出した。", "  You disembark from the wagon in Yowyn.")
		}
		if ( gdata(GDATA_FLAG_MAIN) == 400 ) {
			sceneid = 131
			gosub *scene
			gdata(GDATA_FLAG_MAIN) = 402
		}
		if ( gdata(GDATA_FLAG_MAIN) == 404 ) {
			if ( gdata(GDATA_FLAG_SUB_REGULUS_ZANAN) + gdata(GDATA_FLAG_SUB_REGULUS_EULDERNA) + gdata(GDATA_FLAG_SUB_REGULUS_KIKKASU) + gdata(GDATA_FLAG_SUB_REGULUS_MAYROON) >= 1000 ) {
				sceneid = 133
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 410
			}
		}
		if ( gdata(GDATA_FLAG_MAIN) == 410 ) {
			if ( gdata(GDATA_FLAG_SUB_REGULUS_ZANAN) + gdata(GDATA_FLAG_SUB_REGULUS_EULDERNA) + gdata(GDATA_FLAG_SUB_REGULUS_KIKKASU) + gdata(GDATA_FLAG_SUB_REGULUS_MAYROON) >= 2000 ) {
				sceneid = 134
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 420
			}
		}
		if ( gdata(GDATA_FLAG_MAIN) == 420 ) {
			if ( gdata(GDATA_FLAG_SUB_REGULUS_ZANAN) + gdata(GDATA_FLAG_SUB_REGULUS_EULDERNA) + gdata(GDATA_FLAG_SUB_REGULUS_KIKKASU) + gdata(GDATA_FLAG_SUB_REGULUS_MAYROON) >= 3000 ) {
				sceneid = 135
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 430
			}
		}
		if ( gdata(GDATA_FLAG_MAIN) == 765 ) {
			evadd EVENT_NORNE
		}
		if ( gdata(GDATA_FLAG_MAIN) == 830 ) {
			sceneid = 391
			gosub *scene
			gdata(GDATA_FLAG_MAIN) = 835
		}
	}
	if ( gdata(GDATA_AREA) == AREA_SOUTH_TYRIS ) {
		if ( gdata(GDATA_FLAG_MAIN) == 200 ) {
			sceneid = 101
			gosub *scene
			gdata(GDATA_FLAG_MAIN) = 210
		}
		if ( gdata(GDATA_FLAG_MAIN) == 345 ) {
			sceneid = 118
			gosub *scene
			gdata(GDATA_FLAG_MAIN) = 350
			gdata(GDATA_YEAR) += 3
		}
		if ( gdata(GDATA_FLAG_MAIN) == 396 ) {
			sceneid = 130
			gosub *scene
			gdata(GDATA_FLAG_MAIN) = 398
		}
		if ( gdata(GDATA_FLAG_MAIN) == 765 ) {
			evadd EVENT_NORNE
		}
		if ( gdata(GDATA_FLAG_MAIN) == 835 ) {
			sceneid = 392
			gosub *scene
			gdata(GDATA_FLAG_MAIN) = 840
		}
	}
	if ( gdata(GDATA_AREA) == AREA_LOST_YLVA ) {
		if ( gdata(GDATA_FLAG_MAIN) == 362 ) {
			sceneid = 121
			gosub *scene
			gdata(GDATA_FLAG_MAIN) = 363
			if ( gdata(GDATA_DAY) <= 28 ) {
				gdata(GDATA_DAY) += 2
			}
			evadd EVENT_NORNE
		}
		if ( gdata(GDATA_FLAG_MAIN) == 390 ) {
			evadd EVENT_NORNE
		}
		if ( gdata(GDATA_FLAG_MAIN) == 365 ) {
			evadd EVENT_MELUGAST
		}
		if ( gdata(GDATA_FLAG_MAIN) == 765 ) {
			evadd EVENT_NORNE
		}
	}
	if ( gdata(GDATA_AREA) == AREA_AIMWELL ) {
		if ( gdata(GDATA_FLAG_MAIN) == 780 ) {
			sceneid = 386
			gosub *scene
			evadd EVENT_NORNE
		}
	}
	if ( gdata(GDATA_AREA) == AREA_ULM_LESON ) {
		if ( gdata(GDATA_FLAG_MAIN) == 364 ) {
			sceneid = 122
			gosub *scene
			gdata(GDATA_FLAG_MAIN) = 365
		}
		if ( gdata(GDATA_FLAG_MAIN) >= 368 ) {
			if ( gdata(GDATA_FLAG_VISITED_ULM_LESON) == 0 ) {
				if ( findchara(CREATURE_ID_MELUGAST_TYPE0_THE_DIMENSION_DRIVER) != 0 ) {
					chara_vanquish findchara(CREATURE_ID_MELUGAST_TYPE0_THE_DIMENSION_DRIVER)
				}
				evadd EVENT_SPAWN_EVENT_NPCS
				gdata(GDATA_FLAG_VISITED_ULM_LESON) = 1
			}
		}
		if ( gdata(GDATA_FLAG_MAIN) == 378 ) {
			sceneid = 125
			gosub *scene
			gdata(GDATA_FLAG_MAIN) = 380
		}
		if ( gdata(GDATA_FLAG_MAIN) >= 605 ) {
			if ( gdata(STARTING_GDATA_FLAG + 319) == 0 ) {
				evadd EVENT_SOUTH_TYRIS
			}
		}
		if ( gdata(GDATA_FLAG_MAIN) >= 760 ) {
			if ( gdata(STARTING_GDATA_FLAG + 367) == 0 ) {
				evadd EVENT_SOUTH_TYRIS
			}
		}
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_YLVA_LIBRARY ) {
		adata(ADATA_START_ON, gdata(GDATA_AREA)) = 8
		if ( gdata(GDATA_FLAG_SUB_THE_TRUE_APPEARANCE) == 1001 ) {
			if ( findchara(CREATURE_ID_ARIBEL_THE_WHITE_ARMS) != 0 ) {
				chara_vanquish findchara(CREATURE_ID_ARIBEL_THE_WHITE_ARMS)
			}
			evadd EVENT_SPAWN_EVENT_NPCS
			gdata(GDATA_FLAG_SUB_THE_TRUE_APPEARANCE) = 1002
		}
		if ( gdata(GDATA_FLAG_MAIN) == 685 ) {
			sceneid = 381
			gosub *scene
			gdata(GDATA_FLAG_MAIN) = 690
		}
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_RUST_PLAZA | adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_MIRAGE_TOWER | adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_GUARDIAN_SHRINE ) {
		adata(ADATA_START_ON, gdata(GDATA_AREA)) = 8
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_CHAOS_CRADLE ) {
		if ( gdata(GDATA_LEVEL) == 164 ) {
			if ( gdata(GDATA_FLAG_MAIN) >= 640 ) {
				if ( findchara(CREATURE_ID_LANKATA_THE_LIGHTNING_OF_BLUE) != 0 ) {
					chara_vanquish findchara(CREATURE_ID_LANKATA_THE_LIGHTNING_OF_BLUE)
				}
			}
		}
		if ( gdata(GDATA_LEVEL) == 173 ) {
			if ( gdata(GDATA_FLAG_MAIN) >= 640 ) {
				if ( gdata(GDATA_FLAG_MAIN_CHAOS_CRADLE_25) == 0 ) {
					gdata(GDATA_FLAG_MAIN_CHAOS_CRADLE_25) = 100
					evadd EVENT_SPAWN_EVENT_NPCS
				}
			}
		}
		if ( gdata(GDATA_LEVEL) == 177 ) {
			if ( gdata(GDATA_FLAG_MAIN) >= 725 ) {
				if ( findchara(CREATURE_ID_BETHEL_THE_WHITE_HAWK) != 0 ) {
					chara_vanquish findchara(CREATURE_ID_BETHEL_THE_WHITE_HAWK)
				}
			}
		}
		if ( gdata(GDATA_LEVEL) == 179 ) {
			if ( gdata(GDATA_FLAG_MAIN) >= 845 & gdata(GDATA_FLAG_MAIN) < 990 ) {
				evadd EVENT_CHAOS_CRADLE_CHAT_ORPHE
			}
		}
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) != AREA_CHAOS_CRADLE ) {
		if ( gdata(GDATA_FLAG_MAIN) == 760 ) {
			sceneid = 384
			gosub *scene
			gdata(GDATA_FLAG_MAIN) = 765
		}
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_GUARDIAN_SHRINE ) {
		if ( gdata(GDATA_LEVEL) == 1 ) {
			if ( gdata(GDATA_FLAG_MAIN_CHAOS_CRADLE_34) == 100 ) {
				if ( findchara(CREATURE_ID_LANKATA_THE_LIGHTNING_OF_BLUE) != 0 ) {
					chara_vanquish findchara(CREATURE_ID_LANKATA_THE_LIGHTNING_OF_BLUE)
				}
				if ( findchara(CREATURE_ID_ALFRED_THE_CANGNAN_WIND) != 0 ) {
					chara_vanquish findchara(CREATURE_ID_ALFRED_THE_CANGNAN_WIND)
				}
				evadd EVENT_SPAWN_EVENT_NPCS
				gdata(GDATA_FLAG_MAIN_CHAOS_CRADLE_34) = 101
			}
			if ( gdata(GDATA_FLAG_GUARDIAN_SHRINE) == 0 ) {
				if ( findchara(CREATURE_ID_AIME_THE_STORY_TELLER) != 0 ) {
					chara_vanquish findchara(CREATURE_ID_AIME_THE_STORY_TELLER)
				}
				evadd EVENT_SOUTH_TYRIS
				gdata(GDATA_FLAG_GUARDIAN_SHRINE) = 1
			}
		}
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_AMUR_CAGE ) {
		if ( gdata(GDATA_LEVEL) <= 2 ) {
			evadd EVENT_SPAWN_EVENT_NPCS
		}
		if ( gdata(GDATA_LEVEL) == 1 ) {
			if ( gdata(GDATA_FLAG_SUB_AMURDAD) \ 10 == 1 ) {
				if ( soulstage >= 3 ) {
					evadd EVENT_AMURDEAD_SUB_FIREWORKS
				}
			}
		}
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_HARVEST_SHIP ) {
		if ( gdata(GDATA_LEVEL) == 140 ) {
			if ( gdata(GDATA_FLAG_MAIN) >= 1010 ) {
				if ( gdata(GDATA_FLAG_SUB_THE_DISTANT_SEA_OF_STARS) == 1000 ) {
					if ( findchara(CREATURE_ID_JIN_THE_MACHINE_REBEL) != 0 ) {
						chara_vanquish findchara(CREATURE_ID_JIN_THE_MACHINE_REBEL)
					}
					evadd EVENT_SPAWN_EVENT_NPCS
					gdata(GDATA_FLAG_SUB_THE_DISTANT_SEA_OF_STARS) = 1001
				}
			}
		}
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_ANCIENT_GARDEN ) {
		if ( gdata(GDATA_FLAG_MAIN) >= 368 ) {
			if ( gdata(GDATA_FLAG_VISITED_ANCIENT_GARDEN) == 0 ) {
				if ( findchara(CREATURE_ID_MELUGAST_TYPE0_THE_DIMENSION_DRIVER) != 0 ) {
					chara_vanquish findchara(CREATURE_ID_MELUGAST_TYPE0_THE_DIMENSION_DRIVER)
				}
				evadd EVENT_SPAWN_EVENT_NPCS
				gdata(GDATA_FLAG_VISITED_ANCIENT_GARDEN) = 1
			}
		}
		if ( gdata(GDATA_FLAG_MAIN) == 382 ) {
			sceneid = 126
			gosub *scene
			gdata(GDATA_FLAG_MAIN) = 385
		}
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_WEST_RASKILIS ) {
		if ( gdata(GDATA_FLAG_MAIN) == 790 & gdata(GDATA_LEVEL) == 2 ) {
			sceneid = 387
			gosub *scene
			gdata(GDATA_FLAG_MAIN) = 795
		}
		if ( gdata(GDATA_FLAG_MAIN) == 795 & gdata(GDATA_LEVEL) == 4 ) {
			sceneid = 388
			gosub *scene
			gdata(GDATA_FLAG_MAIN) = 800
		}
		if ( gdata(GDATA_LEVEL) == 3 ) {
			if ( gdata(GDATA_FLAG_SUB_RESEARCH_DESTRUCTION_CRISIS) < 900 ) {
				gdata(GDATA_FLAG_SUB_RESEARCH_DESTRUCTION_CRISIS) = 900
			}
		}
		if ( gdata(GDATA_FLAG_MAIN) == 800 & gdata(GDATA_LEVEL) == 6 ) {
			sceneid = 389
			gosub *scene
			gdata(GDATA_FLAG_MAIN) = 805
		}
		if ( gdata(GDATA_FLAG_MAIN) == 805 & gdata(GDATA_LEVEL) == 8 ) {
			sceneid = 390
			gosub *scene
			gdata(GDATA_FLAG_MAIN) = 810
		}
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_REMIDO ) {
		if ( gdata(GDATA_FLAG_MAIN) >= 265 & gdata(GDATA_FLAG_MAIN) < 266 & gdata(GDATA_LEVEL) == 106 ) {
			evadd EVENT_MOBILE_COMM_EQUIP
		}
		if ( gdata(GDATA_FLAG_MAIN) >= 280 & gdata(GDATA_FLAG_MAIN) < 281 & gdata(GDATA_LEVEL) == 122 ) {
			evadd EVENT_MOBILE_COMM_EQUIP
		}
		if ( gdata(GDATA_FLAG_MAIN) == 340 ) {
			sceneid = 117
			gosub *scene
			gdata(GDATA_FLAG_MAIN) = 345
		}
	}
	if ( gdata(GDATA_AREA) == AREA_OL_DRAN ) {
		if ( gdata(GDATA_LEVEL) == 1 ) {
			if ( gdata(GDATA_FLAG_VISITED_OL_DRAN) == 0 ) {
				if ( findchara(CREATURE_ID_MELGET_THE_INFORMER) != 0 ) {
					chara_vanquish findchara(CREATURE_ID_MELGET_THE_INFORMER)
				}
				evadd EVENT_SPAWN_EVENT_NPCS
				gdata(GDATA_FLAG_VISITED_OL_DRAN) = 10
			}
		}
		if ( gdata(GDATA_LEVEL) == 5 ) {
			evadd EVENT_KARAVIKA_MUSIC
		}
	}
	if ( gdata(GDATA_AREA) == AREA_DOCK ) {
		if ( gdata(GDATA_LEVEL) == 1 ) {
			if ( gdata(GDATA_FLAG_SUB_SOCKS_THIEF) == 0 ) {
				if ( findchara(CREATURE_ID_KUROYA_THE_LOOKING_UNIVERSE) != 0 ) {
					chara_vanquish findchara(CREATURE_ID_KUROYA_THE_LOOKING_UNIVERSE)
				}
				evadd EVENT_SPAWN_EVENT_NPCS
				gdata(GDATA_FLAG_SUB_SOCKS_THIEF) = 10
			}
		}
		if ( gdata(GDATA_LEVEL) == 60 ) {
			if ( gdata(GDATA_FLAG_SUB_REGULUS_KIKKASU) == 1 ) {
				if ( findchara(CREATURE_ID_SHURAIDA_THE_EXPERT_MERC) != 0 ) {
					chara_vanquish findchara(CREATURE_ID_SHURAIDA_THE_EXPERT_MERC)
				}
				evadd EVENT_SPAWN_EVENT_NPCS
				gdata(GDATA_FLAG_SUB_REGULUS_KIKKASU) = 2
			}
		}
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_ANCIENT_GARDEN ) {
		evadd EVENT_GUILD
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_HARVEST_SHIP ) {
		if ( gdata(GDATA_LEVEL) == 141 ) {
			if ( gdata(GDATA_FLAG_SUB_THE_DISTANT_SEA_OF_STARS) < 1000 ) {
				evadd EVENT_GUILD
			}
		}
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_RUOZA ) {
		if ( gdata(GDATA_LEVEL) == 10 ) {
			if ( gdata(GDATA_FLAG_SUB_THE_RESULT_OF_REVENGE) < 1002 ) {
				evadd EVENT_GUILD
			}
		}
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_MAID_MANSION ) {
		if ( gdata(GDATA_LEVEL) == 3 ) {
			if ( gdata(GDATA_FLAG_SUB_MANSION_FOR_SALE) == 1001 ) {
				txt lang("この屋敷の地下室は思ったより広い…とあなたは感じた。", "...The basement is larger than you thought.")
			}
		}
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_MOUNTAIN_PASS_WINDY ) {
		if ( gdata(GDATA_LEVEL) == 112 ) {
			if ( gdata(GDATA_FLAG_MAIN) == 300 ) {
				sceneid = 114
				gosub *scene
				gdata(GDATA_FLAG_MAIN) = 305
			}
		}
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_RANDOM_DUNGEON ) {
		if ( gdata(GDATA_LEVEL) == adata(ADATA_MAX_LEVEL, gdata(GDATA_AREA)) ) {
			if ( adata(ADATA_BOSS, gdata(GDATA_AREA)) == (-1) ) {
				msgtemp += lang("辺りからは何の緊張感も感じられない。" + mapname(gdata(GDATA_AREA)) + "の主はもういないようだ。", "This place is pretty dull. The dungeon master is no longer sighted here.")
			}
		}
	}
	proc "Map:Init music"
	gosub *music_play
	gosub *fixOnMapEnter
	proc "Map:Init world"
	noaggrorefresh = 0
	if ( adata(ADATA_TYPE, gdata(GDATA_AREA)) == MAP_TYPE_WORLD ) {
		gosub *cloud_init
		if ( rnd(150) == 0 ) {
			gdata(GDATA_WORLD_RENEW) = 1
			gosub *world_newRandArea
		}
		gosub *world_update
	}
	proc "Map:Continue"
	if ( mode == MODELIST_CONTINUE ) {
		mode = MODELIST_MAIN
		if ( mapsubroutine == 0 ) {
			screenupdate = -1
			gosub *screen_refreshFull
			txt_conv
			gosub *screen_draw
			if ( evnum == 0 ) {
				goto *pc_turn
			}
			else {
				goto *main_init
			}
		}
		else {
			mapsubroutine = 0
			return
		}
	}
	proc "Map:Update area"
	wake_up
	pcattacker = 0
	cdata(CDATA_TARGET, CHARA_PLAYER) = 0
	gdata(GDATA_SCOPE) = 0
	mode = MODELIST_MAIN
	screenupdate = -1
	gosub *screen_refreshFull
	txt_conv
	if ( gdata(GDATA_AREA) == AREA_HOME ) {
		if ( gdata(GDATA_FLAG_MAIN) != 0 ) {
			if ( findchara(CREATURE_ID_LARNNEIRE_THE_LISTENER_OF_WIND) != 0 ) {
				chara_vanquish findchara(CREATURE_ID_LARNNEIRE_THE_LISTENER_OF_WIND)
			}
			if ( findchara(CREATURE_ID_LOMIAS_THE_MESSENGER_FROM_VINDALE) != 0 ) {
				chara_vanquish findchara(CREATURE_ID_LOMIAS_THE_MESSENGER_FROM_VINDALE)
			}
		}
	}
	if ( gdata(GDATA_AREA) == AREA_PALMIA ) {
		if ( gdata(GDATA_FLAG_MAIN) >= 90 ) {
			if ( findchara(CREATURE_ID_XABI_THE_KING_OF_PALMIA) != 0 ) {
				chara_vanquish findchara(CREATURE_ID_XABI_THE_KING_OF_PALMIA)
			}
		}
	}
	if ( gdata(GDATA_AREA) == AREA_KURUALM ) {
		if ( gdata(GDATA_FLAG_MAIN) >= 625 ) {
			if ( findchara(CREATURE_ID_MILOS_OF_THE_FORGOTTEN_WORLD) != 0 ) {
				chara_vanquish findchara(CREATURE_ID_MILOS_OF_THE_FORGOTTEN_WORLD)
			}
		}
	}
	if ( gdata(GDATA_AREA) == AREA_NOYEL ) {
		if ( gdata(GDATA_FLAG_SUB_REGULUS_MAYROON) == 1 ) {
			if ( findchara(CREATURE_ID_MARKA_THE_SILVER_BEAR) != 0 ) {
				chara_vanquish findchara(CREATURE_ID_MARKA_THE_SILVER_BEAR)
			}
			evadd EVENT_SPAWN_EVENT_NPCS
			gdata(GDATA_FLAG_SUB_REGULUS_MAYROON) = 2
		}
	}
	if ( gdata(GDATA_AREA) == AREA_YOWYN ) {
		if ( gdata(GDATA_FLAG_MAIN) >= 200 ) {
			if ( findchara(CREATURE_ID_GWEN_THE_INNOCENT) != 0 ) {
				chara_vanquish findchara(CREATURE_ID_GWEN_THE_INNOCENT)
			}
			if ( gdata(GDATA_FLAG_MAIN) >= 200 & gdata(GDATA_FLAG_GWEN_STAGE) == 0 ) {
				if ( findchara(CREATURE_ID_GWEN_THE_PITILESS) != 0 ) {
					chara_vanquish findchara(CREATURE_ID_GWEN_THE_PITILESS)
				}
				evadd EVENT_SPAWN_EVENT_NPCS
				gdata(GDATA_FLAG_GWEN_STAGE) = 1001
			}
		}
	}
	if ( gdata(GDATA_AREA) == AREA_VALM ) {
		if ( gdata(GDATA_FLAG_MAIN) >= 396 & gdata(GDATA_FLAG_MAIN) < 400 ) {
			if ( findchara(CREATURE_ID_SNAIL_THE_ANDROID_RIDER) != 0 ) {
				chara_vanquish findchara(CREATURE_ID_SNAIL_THE_ANDROID_RIDER)
			}
			if ( findchara(CREATURE_ID_RECONCILED_CLEANER) != 0 ) {
				chara_vanquish findchara(CREATURE_ID_RECONCILED_CLEANER)
			}
		}
	}
	if ( gdata(GDATA_AREA) == AREA_RUST_PLAZA ) {
		if ( findchara(CREATURE_ID_THALIA_THE_STAR_VIEWER) != 0 ) {
			if ( findchara(CREATURE_ID_IRMA_THE_INDOMITABLE_SMITH) != 0 ) {
				if ( gdata(GDATA_FLAG_SUB_BEYOND_THE_GENERATIONS) == 7 ) {
					chara_vanquish findchara(CREATURE_ID_THALIA_THE_STAR_VIEWER)
					chara_vanquish findchara(CREATURE_ID_IRMA_THE_INDOMITABLE_SMITH)
					gdata(GDATA_FLAG_SUB_BEYOND_THE_GENERATIONS) = 8
					txt_questupdate
				}
			}
		}
	}
	if ( gdata(GDATA_AREA) == AREA_IRMA_THALIA_WORKSHOP ) {
		if ( gdata(GDATA_FLAG_SUB_BEYOND_THE_GENERATIONS) == 8 ) {
			gdata(GDATA_FLAG_SUB_BEYOND_THE_GENERATIONS) = 9
		}
	}
	if ( gdata(GDATA_AREA) == AREA_LUDUS ) {
		if ( adata(ADATA_TYPE, gdata(GDATA_AREA)) != MAP_TYPE_TOWN ) {
			adata(ADATA_TYPE, gdata(GDATA_AREA)) = MAP_TYPE_TOWN
		}
	}
	if ( mdata(MDATA_TYPE) == MAP_TYPE_TOWN | gdata(GDATA_AREA) == AREA_LUDUS ) {
		repeat gdata(GDATA_CLIENT)
			if ( qdata(QDATA_EXIST, cnt) == QUEST_TYPE_ESCORT ) {
				if ( qdata(QDATA_STATUS, cnt) == QUEST_STATE_ONGOING ) {
					cnt2 = cnt
					repeat MAX_CHARA_FOLLOWER
						if ( cbit(CHARA_BIT_BODYGUARD, cnt) == 1 ) {
							if ( cdata(CDATA_EXIST, cnt) == CHAR_STATE_ALIVE ) {
								if ( cdata(CDATA_ID, cnt) == qdata(QDATA_PARAM2, cnt2) ) {
									if ( qdata(QDATA_PARAM1, cnt2) == gdata(GDATA_AREA) ) {
										evadd EVENT_CLIENT_REACHED, cnt2, cnt
										cbitmod CHARA_BIT_BODYGUARD, cnt, 0
										break
									}
								}
							}
						}
					loop
				}
			}
		loop
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_MUSEUM | adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_SHOP ) {
		repeat 5
			gosub *chara_spawn
		loop
	}
	if ( mdata(MDATA_CAN_SAVE) == 1 ) {
		gosub *item_rot
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_SHOP ) {
		gosub *shop_update
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_MUSEUM ) {
		gosub *museum_update
	}
	if ( gdata(GDATA_AREA) == AREA_HOME ) {
		gosub *house_update
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_RANCH ) {
		repeat MAX_CHARA_TOTAL
			if ( cbit(CHARA_BIT_LIVESTOCK, cnt) == 1 ) {
				cdata(CDATA_AI_AGGRO, cnt) = 0
				cdata(CDATA_RELATION, cnt) = -1
				cdata(CDATA_RELATION_ORG, cnt) = -1
			}
			if ( TweakData(54, 2) == 1 & adata(ADATA_MAX_LEVEL, gdata(GDATA_AREA)) == 1 ) {
				if ( cbit(CHARA_BIT_LIVESTOCK, cnt) == 1 ) {
					cdata(CDATA_SPRITE_SIZE_MILK, cnt) = -5
				}
			}
		loop
		if ( adata(ADATA_MAX_LEVEL, gdata(GDATA_AREA)) == 1 ) {
			adata(ADATA_MAX_LEVEL, gdata(GDATA_AREA)) = 2
		}
	}
	proc "Map:Init final"
	if ( mdata(MDATA_TYPE) == MAP_TYPE_WORLD ) {
		if ( cfg_extrahelp ) {
			if ( gdata(STARTING_GDATA_HELP + 2) == 0 ) {
				if ( mode == MODELIST_MAIN ) {
					if ( cdata(CDATA_ACTION_PERIOD, CHARA_PLAYER) == 0 ) {
						gdata(STARTING_GDATA_HELP + 2) = 1
						ghelp = 2
						gosub *elona_help
					}
				}
			}
		}
	}
	if ( mdata(MDATA_TYPE) == MAP_TYPE_TOWN ) {
		if ( cfg_extrahelp ) {
			if ( gdata(STARTING_GDATA_HELP + 3) == 0 ) {
				if ( mode == MODELIST_MAIN ) {
					if ( cdata(CDATA_ACTION_PERIOD, CHARA_PLAYER) == 0 ) {
						gdata(STARTING_GDATA_HELP + 3) = 1
						ghelp = 3
						gosub *elona_help
					}
				}
			}
		}
	}
	if ( gdata(GDATA_AREA) == AREA_SHELTER ) {
		if ( cfg_extrahelp ) {
			if ( gdata(STARTING_GDATA_HELP + 14) == 0 ) {
				if ( mode == MODELIST_MAIN ) {
					if ( cdata(CDATA_ACTION_PERIOD, CHARA_PLAYER) == 0 ) {
						gdata(STARTING_GDATA_HELP + 14) = 1
						ghelp = 14
						gosub *elona_help
					}
				}
			}
		}
	}
	if ( mdata(MDATA_TYPE) == MAP_TYPE_TOWN | gdata(GDATA_AREA) == AREA_HOME | mdata(MDATA_TYPE) == MAP_TYPE_VILLAGE ) {
		if ( gdata(GDATA_TRAVEL_DISTANCE) >= 300 ) {
			p = gdata(GDATA_HOUR) + gdata(GDATA_DAY) * 24 + gdata(GDATA_MONTH) * 24 * 30 + gdata(GDATA_YEAR) * 24 * 30 * 12 - gdata(GDATA_TRAVEL_TIME)
			txtmore
			txt lang(cnvdate(gdata(GDATA_TRAVEL_TIME)) + "に" + mapname(gdata(GDATA_LAST_TOWN)) + "を発ってから、" + p / 24 + "日と" + p \ 24 + "時間の旅を終えた。", "" + p / 24 + " days and " + p \ 24 + " hours have passed since you left " + mapname(gdata(GDATA_LAST_TOWN)) + ".")
			p = 0
			repeat MAX_CHARA_FOLLOWER
				if ( cdata(CDATA_EXIST, cnt) != CHAR_STATE_ALIVE ) {
					continue
				}
				if ( cdata(CDATA_EXIST, cnt) == CHAR_STATE_ALLY_WORK ) {
					continue
				}
				if ( sdata(SKILL_NORMAL_TRAVELING, cnt) == 0 ) {
					continue
				}
				tc = cnt
				skillexp SKILL_NORMAL_TRAVELING, tc, 5 + gdata(GDATA_TRAVEL_DISTANCE) * 2 / 5, 0, 1000
				if ( cdata(CDATA_IMPRESSION, cnt) >= 100 ) {
					if ( sdata(SKILL_NORMAL_MINING, cnt) > 0 ) {
						if ( limit(sdata(SKILL_NORMAL_MINING, cnt), 0, 100) + gdata(GDATA_TRAVEL_DISTANCE) > rnd(1000) ) {
							cdata(CDATA_MATERIAL1_COUNTER, cnt) += 50
						}
					}
					if ( sdata(SKILL_NORMAL_FISHING, cnt) > 0 ) {
						if ( limit(sdata(SKILL_NORMAL_FISHING, cnt), 0, 100) + gdata(GDATA_TRAVEL_DISTANCE) > rnd(1000) ) {
							cdata(CDATA_MATERIAL2_COUNTER, cnt) += 50
						}
					}
					if ( sdata(SKILL_NORMAL_GARDENING, cnt) > 0 ) {
						if ( limit(sdata(SKILL_NORMAL_GARDENING, cnt), 0, 100) + gdata(GDATA_TRAVEL_DISTANCE) > rnd(1000) ) {
							cdata(CDATA_MATERIAL3_COUNTER, cnt) += 50
						}
					}
					if ( sdata(SKILL_NORMAL_GENE_ENGINEER, cnt) > 0 ) {
						if ( limit(sdata(SKILL_NORMAL_GENE_ENGINEER, cnt), 0, 100) + gdata(GDATA_TRAVEL_DISTANCE) > rnd(1000) ) {
							cdata(CDATA_MATERIAL4_COUNTER, cnt) += 50
						}
					}
					if ( sdata(SKILL_NORMAL_DETECTION, cnt) > 0 ) {
						if ( limit(sdata(SKILL_NORMAL_DETECTION, cnt), 0, 100) + gdata(GDATA_TRAVEL_DISTANCE) > rnd(1000) ) {
							cdata(CDATA_MATERIAL5_COUNTER, cnt) += 50
						}
					}
				}
				skillexp SKILL_ATTR_STR, tc, limit(sdata(SKILL_NORMAL_TRAVELING, tc) * 1 / 4 + gdata(GDATA_TRAVEL_DISTANCE) / 2 + rnd(gdata(GDATA_TRAVEL_DISTANCE) / 2), 1, 2000)
				skillexp SKILL_ATTR_CON, tc, limit(sdata(SKILL_NORMAL_TRAVELING, tc) * 1 / 4 + gdata(GDATA_TRAVEL_DISTANCE) / 2 + rnd(gdata(GDATA_TRAVEL_DISTANCE) / 2), 1, 2000)
				skillexp SKILL_ATTR_DEX, tc, limit(sdata(SKILL_NORMAL_TRAVELING, tc) * 1 / 4 + gdata(GDATA_TRAVEL_DISTANCE) / 2 + rnd(gdata(GDATA_TRAVEL_DISTANCE) / 2), 1, 2000)
				skillexp SKILL_ATTR_PER, tc, limit(sdata(SKILL_NORMAL_TRAVELING, tc) * 1 / 4 + gdata(GDATA_TRAVEL_DISTANCE) / 2 + rnd(gdata(GDATA_TRAVEL_DISTANCE) / 2), 1, 2000)
				skillexp SKILL_ATTR_LER, tc, limit(sdata(SKILL_NORMAL_TRAVELING, tc) * 1 / 4 + gdata(GDATA_TRAVEL_DISTANCE) / 2 + rnd(gdata(GDATA_TRAVEL_DISTANCE) / 2), 1, 2000)
				skillexp SKILL_ATTR_WIL, tc, limit(sdata(SKILL_NORMAL_TRAVELING, tc) * 1 / 4 + gdata(GDATA_TRAVEL_DISTANCE) / 2 + rnd(gdata(GDATA_TRAVEL_DISTANCE) / 2), 1, 2000)
				skillexp SKILL_ATTR_MAG, tc, limit(sdata(SKILL_NORMAL_TRAVELING, tc) * 1 / 4 + gdata(GDATA_TRAVEL_DISTANCE) / 2 + rnd(gdata(GDATA_TRAVEL_DISTANCE) / 2), 1, 2000)
				skillexp SKILL_ATTR_CHA, tc, limit(sdata(SKILL_NORMAL_TRAVELING, tc) * 1 / 4 + gdata(GDATA_TRAVEL_DISTANCE) / 2 + rnd(gdata(GDATA_TRAVEL_DISTANCE) / 2), 1, 2000)
				repeat MAX_SKILL_WEAPON - STARTING_SKILL_WEAPON, STARTING_SKILL_WEAPON
					if ( sorg(cnt, tc) == 0 ) {
						continue
					}
					skillexp cnt, tc, limit(sdata(SKILL_NORMAL_TRAVELING, tc) * 1 / 4 + gdata(GDATA_TRAVEL_DISTANCE) / 2 + rnd(gdata(GDATA_TRAVEL_DISTANCE) / 2), 1, 2000)
				loop
				repeat MAX_SKILL_NORMAL - STARTING_SKILL_NORMAL, STARTING_SKILL_NORMAL
					if ( sorg(cnt, tc) == 0 ) {
						continue
					}
					skillexp cnt, tc, limit(sdata(SKILL_NORMAL_TRAVELING, tc) * 1 / 4 + gdata(GDATA_TRAVEL_DISTANCE) / 2 + rnd(gdata(GDATA_TRAVEL_DISTANCE) / 2), 1, 2000)
				loop
				repeat MAX_SKILL_ACTIVE - STARTING_SKILL_ACTIVE, STARTING_SKILL_ACTIVE
					if ( sorg(cnt, tc) == 0 ) {
						continue
					}
					skillexp cnt, tc, limit(sdata(SKILL_NORMAL_TRAVELING, tc) * 1 / 4 + gdata(GDATA_TRAVEL_DISTANCE) / 2 + rnd(gdata(GDATA_TRAVEL_DISTANCE) / 2), 1, 2000)
				loop
			loop
			if ( sdata(SKILL_NORMAL_TRAVELING, CHARA_PLAYER) > 0 ) {
				tc = CHARA_PLAYER
				skillexp SKILL_NORMAL_TRAVELING, tc, 5 + gdata(GDATA_TRAVEL_DISTANCE) * 2 / 5, 0, 1000
				skillexp SKILL_ATTR_STR, tc, limit(sdata(SKILL_NORMAL_TRAVELING, tc) * 1 / 4 + gdata(GDATA_TRAVEL_DISTANCE) / 2 + rnd(gdata(GDATA_TRAVEL_DISTANCE) / 2), 1, 2000)
				skillexp SKILL_ATTR_CON, tc, limit(sdata(SKILL_NORMAL_TRAVELING, tc) * 1 / 4 + gdata(GDATA_TRAVEL_DISTANCE) / 2 + rnd(gdata(GDATA_TRAVEL_DISTANCE) / 2), 1, 2000)
				skillexp SKILL_ATTR_DEX, tc, limit(sdata(SKILL_NORMAL_TRAVELING, tc) * 1 / 4 + gdata(GDATA_TRAVEL_DISTANCE) / 2 + rnd(gdata(GDATA_TRAVEL_DISTANCE) / 2), 1, 2000)
				skillexp SKILL_ATTR_PER, tc, limit(sdata(SKILL_NORMAL_TRAVELING, tc) * 1 / 4 + gdata(GDATA_TRAVEL_DISTANCE) / 2 + rnd(gdata(GDATA_TRAVEL_DISTANCE) / 2), 1, 2000)
				skillexp SKILL_ATTR_LER, tc, limit(sdata(SKILL_NORMAL_TRAVELING, tc) * 1 / 4 + gdata(GDATA_TRAVEL_DISTANCE) / 2 + rnd(gdata(GDATA_TRAVEL_DISTANCE) / 2), 1, 2000)
				skillexp SKILL_ATTR_WIL, tc, limit(sdata(SKILL_NORMAL_TRAVELING, tc) * 1 / 4 + gdata(GDATA_TRAVEL_DISTANCE) / 2 + rnd(gdata(GDATA_TRAVEL_DISTANCE) / 2), 1, 2000)
				skillexp SKILL_ATTR_MAG, tc, limit(sdata(SKILL_NORMAL_TRAVELING, tc) * 1 / 4 + gdata(GDATA_TRAVEL_DISTANCE) / 2 + rnd(gdata(GDATA_TRAVEL_DISTANCE) / 2), 1, 2000)
				skillexp SKILL_ATTR_CHA, tc, limit(sdata(SKILL_NORMAL_TRAVELING, tc) * 1 / 4 + gdata(GDATA_TRAVEL_DISTANCE) / 2 + rnd(gdata(GDATA_TRAVEL_DISTANCE) / 2), 1, 2000)
				repeat MAX_SKILL_WEAPON - STARTING_SKILL_WEAPON, STARTING_SKILL_WEAPON
					if ( sorg(cnt, tc) == 0 ) {
						continue
					}
					skillexp cnt, tc, limit(sdata(SKILL_NORMAL_TRAVELING, tc) * 1 / 4 + gdata(GDATA_TRAVEL_DISTANCE) / 2 + rnd(gdata(GDATA_TRAVEL_DISTANCE) / 2), 1, 2000)
				loop
				repeat MAX_SKILL_NORMAL - STARTING_SKILL_NORMAL, STARTING_SKILL_NORMAL
					if ( sorg(cnt, tc) == 0 ) {
						continue
					}
					skillexp cnt, tc, limit(sdata(SKILL_NORMAL_TRAVELING, tc) * 1 / 4 + gdata(GDATA_TRAVEL_DISTANCE) / 2 + rnd(gdata(GDATA_TRAVEL_DISTANCE) / 2), 1, 2000)
				loop
				repeat MAX_SKILL_ACTIVE - STARTING_SKILL_ACTIVE, STARTING_SKILL_ACTIVE
					if ( sorg(cnt, tc) == 0 ) {
						continue
					}
					skillexp cnt, tc, limit(sdata(SKILL_NORMAL_TRAVELING, tc) * 1 / 4 + gdata(GDATA_TRAVEL_DISTANCE) / 2 + rnd(gdata(GDATA_TRAVEL_DISTANCE) / 2), 1, 2000)
				loop
			}
			locvar_map_begin_friends = 0
			locvar_map_begin_friendtc = 0
			repeat MAX_CHARA_TOTAL
				if ( cdata(CDATA_EXIST, cnt) != CHAR_STATE_ALIVE ) {
					continue
				}
				if ( cc == cnt ) {
					continue
				}
				if ( cc < MAX_CHARA_FOLLOWER | cc == CHARA_PLAYER ) {
					if ( cnt >= MAX_CHARA_FOLLOWER ) {
						continue
					}
				}
				if ( cc >= MAX_CHARA_FOLLOWER ) {
					if ( cdata(CDATA_RELATION, cc) != cdata(CDATA_RELATION, cnt) ) {
						continue
					}
				}
				tc = cnt
				dx = cdata(CDATA_X, tc)
				dy = cdata(CDATA_Y, tc)
				if ( dist(cdata(CDATA_X, cc), cdata(CDATA_Y, cc), dx, dy) > sdataref(SKILL_DATAREF_TG_RANGE, SKILL_SPACT_CHEER) \ EXT_SDATAREF + 1 ) {
					continue
				}
				if ( fov_los(cdata(CDATA_X, cc), cdata(CDATA_Y, cc), dx, dy) == 0 ) {
					continue
				}
				locvar_map_begin_friends++
				locvar_map_begin_friendtc = tc
				ens2 += limit((sdata(SKILL_NORMAL_LITERACY, tc) + sdata(SKILL_NORMAL_MEMORIZATION, tc) + 1) / 2, 3, 3 + sdata(SKILL_NORMAL_LITERACY, cc) / 5)
			loop
			if ( locvar_map_begin_friends == 0 ) {
				s = lang("あなた", "You've")
			}
			else {
				if ( locvar_map_begin_friends == 1 ) {
					s = lang("あなたと" + name(locvar_map_begin_friendtc), "You and " + name(locvar_map_begin_friendtc) + " have")
				}
				else {
					s = lang("あなたとその仲間", "You and your friends have")
				}
			}
			txtmore
			txt lang(s + "は" + gdata(GDATA_TRAVEL_DISTANCE) + "マイルの距離を歩き、経験を積んだ。", s + " walked about " + gdata(GDATA_TRAVEL_DISTANCE) + " miles and have gained experience.")
			gdata(GDATA_TRAVEL_DISTANCE) = 0
		}
	}
	if ( gdata(GDATA_AREA) == AREA_DOJO & gdata(GDATA_DOJO_TURNS) >= 100 & gdata(GDATA_PETS_IN_DOJO) != 0 ) {
		repeat MAX_CHARA_TOTAL
			if ( cdata(CDATA_EXIST, cnt) != CHAR_STATE_ALIVE ) {
				continue
			}
			if ( cbit(CHARA_BIT_LIVESTOCK, cnt) != 1 ) {
				continue
			}
			if ( cnt == CHARA_PLAYER ) {
				continue
			}
			if ( cdata(CDATA_ALLIED, cnt) == 0 ) {
				continue
			}
			tc = cnt
			skillexp SKILL_ATTR_STR, tc, limit(gdata(GDATA_DOJO_TURNS) * 3 + rnd(gdata(GDATA_DOJO_TURNS)), 0, 200000)
			skillexp SKILL_ATTR_CON, tc, limit(gdata(GDATA_DOJO_TURNS) * 3 + rnd(gdata(GDATA_DOJO_TURNS)), 0, 200000)
			skillexp SKILL_ATTR_DEX, tc, limit(gdata(GDATA_DOJO_TURNS) * 3 + rnd(gdata(GDATA_DOJO_TURNS)), 0, 200000)
			skillexp SKILL_ATTR_PER, tc, limit(gdata(GDATA_DOJO_TURNS) * 3 + rnd(gdata(GDATA_DOJO_TURNS)), 0, 200000)
			skillexp SKILL_ATTR_LER, tc, limit(gdata(GDATA_DOJO_TURNS) * 3 + rnd(gdata(GDATA_DOJO_TURNS)), 0, 200000)
			skillexp SKILL_ATTR_WIL, tc, limit(gdata(GDATA_DOJO_TURNS) * 3 + rnd(gdata(GDATA_DOJO_TURNS)), 0, 200000)
			skillexp SKILL_ATTR_MAG, tc, limit(gdata(GDATA_DOJO_TURNS) * 3 + rnd(gdata(GDATA_DOJO_TURNS)), 0, 200000)
			skillexp SKILL_ATTR_CHA, tc, limit(gdata(GDATA_DOJO_TURNS) * 3 + rnd(gdata(GDATA_DOJO_TURNS)), 0, 200000)
			repeat MAX_SKILL_WEAPON - STARTING_SKILL_WEAPON, STARTING_SKILL_WEAPON
				if ( sorg(cnt, tc) == 0 ) {
					continue
				}
				skillexp cnt, tc, limit(gdata(GDATA_DOJO_TURNS) * 3 + rnd(gdata(GDATA_DOJO_TURNS)), 0, 200000)
			loop
			repeat MAX_SKILL_NORMAL - STARTING_SKILL_NORMAL, STARTING_SKILL_NORMAL
				if ( sorg(cnt, tc) == 0 ) {
					continue
				}
				skillexp cnt, tc, limit(gdata(GDATA_DOJO_TURNS) * 3 + rnd(gdata(GDATA_DOJO_TURNS)), 0, 200000)
			loop
			repeat MAX_SKILL_ACTIVE - STARTING_SKILL_ACTIVE, STARTING_SKILL_ACTIVE
				if ( sorg(cnt, tc) == 0 ) {
					continue
				}
				skillexp cnt, tc, limit(gdata(GDATA_DOJO_TURNS) * 3 + rnd(gdata(GDATA_DOJO_TURNS)), 0, 200000)
			loop
		loop
		txtef COLOR_YELLOW
		txtmore
		txt lang("門下生は修行で少し成長しているようだ。", "The students seem to have improved a bit through training.")
		gdata(GDATA_DOJO_TURNS) = 0
	}
	proc "Map:Quest message"
	if ( gdata(GDATA_AREA) == AREA_QUEST ) {
		if ( gdata(GDATA_QUEST) == QUEST_TYPE_PARTY ) {
			txtef COLOR_SKY_BLUE
			txt lang("" + gdata(GDATA_TIME_LIMIT) + "分間の間にパーティーを盛り上げよう。目標は" + qdata(QDATA_PARAM1, gdata(GDATA_QUEST_REF)) + "ポイント。", "You have to warm up the party within " + gdata(GDATA_TIME_LIMIT) + " minutes. Your target score is " + qdata(QDATA_PARAM1, gdata(GDATA_QUEST_REF)) + " points.")
		}
		if ( gdata(GDATA_QUEST) == QUEST_TYPE_HARVEST ) {
			if ( qdata(QDATA_PARAM1, gdata(GDATA_QUEST_REF)) <= 0 ) {
				qdata(QDATA_PARAM1, gdata(GDATA_QUEST_REF)) = 15000
				qdata(QDATA_REWARD, gdata(GDATA_QUEST_REF)) = 400
			}
			txtef COLOR_SKY_BLUE
			txt lang("" + gdata(GDATA_TIME_LIMIT) + "分以内に、納入箱に" + cnvweight(qdata(QDATA_PARAM1, gdata(GDATA_QUEST_REF))) + "の作物を納入しよう。", "To complete the quest, you have to harvest " + cnvweight(qdata(QDATA_PARAM1, gdata(GDATA_QUEST_REF))) + " worth farm products and put them into the delivery chest within " + gdata(GDATA_TIME_LIMIT) + " minutes.")
		}
		if ( gdata(GDATA_QUEST) == QUEST_TYPE_MINEFIELD ) {
			txtef COLOR_SKY_BLUE
			txt lang("" + gdata(GDATA_TIME_LIMIT) + "分以内に、罠を可能な限り撤去しよう。目標は" + qdata(QDATA_PARAM1, gdata(GDATA_QUEST_REF)) + "ポイント。", "To complete the quest, you have to remove " + qdata(QDATA_PARAM1, gdata(GDATA_QUEST_REF)) + " traps within " + gdata(GDATA_TIME_LIMIT) + " minutes.")
		}
		if ( gdata(GDATA_QUEST) == QUEST_TYPE_CONQUER ) {
			txtef COLOR_SKY_BLUE
			txt lang("" + gdata(GDATA_TIME_LIMIT) + "分以内に、" + refchara(qdata(QDATA_PARAM1, gdata(GDATA_QUEST_REF)), DBSPEC_CHARA_NAME_ORG, 1) + "を討伐しなければならない。", "You have to slay " + refchara(qdata(QDATA_PARAM1, gdata(GDATA_QUEST_REF)), DBSPEC_CHARA_NAME_ORG, 1) + " within " + gdata(GDATA_TIME_LIMIT) + " minutes.")
		}
	}
	goto *main_init

*check_renew
	if ( gdata(GDATA_HOUR) + gdata(GDATA_DAY) * 24 + gdata(GDATA_MONTH) * 24 * 30 + gdata(GDATA_YEAR) * 24 * 30 * 12 >= adata(ADATA_RANDOM_RENEW, gdata(GDATA_AREA)) ) {
		adata(ADATA_RANDOM_SEED, gdata(GDATA_AREA)) = rnd(10000)
		adata(ADATA_RANDOM_RENEW, gdata(GDATA_AREA)) = gdata(GDATA_HOUR) + gdata(GDATA_DAY) * 24 + gdata(GDATA_MONTH) * 24 * 30 + gdata(GDATA_YEAR) * 24 * 30 * 12 + 24
	}
	if ( gdata(GDATA_HOUR) + gdata(GDATA_DAY) * 24 + gdata(GDATA_MONTH) * 24 * 30 + gdata(GDATA_YEAR) * 24 * 30 * 12 >= mdata(MDATA_RENEW) ) {
		proc "renew_major"
		if ( mdata(MDATA_NO_RENEW) == 0 ) {
			if ( mdata(MDATA_RENEW) != 0 ) {
				if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_RANCH ) {
					repeat MAX_CHARA_TOTAL - MAX_CHARA_SAVE, MAX_CHARA_SAVE
						rc = cnt
						gosub *renewStatus
						if ( cdata(CDATA_EXIST, cnt) != CHAR_STATE_ALIVE ) {
							continue
						}
					loop
					repeat MAX_CHARA_TOTAL
						if ( cdata(CDATA_EXIST, cnt) != CHAR_STATE_ALIVE ) {
							continue
						}
						if ( cbit(CHARA_BIT_BRUSHED, cnt) == 1 ) {
							cbitmod CHARA_BIT_BRUSHED, cnt, 0
						}
						if ( cbit(CHARA_BIT_SQUEEZED, cnt) == 1 ) {
							cbitmod CHARA_BIT_SQUEEZED, cnt, 0
						}
					loop
				}
				if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_CROP ) {
					repeat mdata(MDATA_HEIGHT)
						y = cnt
						repeat mdata(MDATA_WIDTH)
							if ( map(cnt, y, 0) != 0 ) {
								cell_featread cnt, y
								x = cnt
								gosub *mapchip_init
								if ( chipm(CHIPM_ROLE, map(x, y, 0)) == MAP_CHIP_ROLE_COMPOST ) {
									cell_itemlist x, y
									f = 0
									repeat listmax
										p = list(0, cnt)
										if ( inv(INV_ITEM_MATERIAL, p) == ITEM_MATERIAL_RAW | inv(INV_ITEM_ID, p) == ITEM_ID_WOOD_CHIP | inv(INV_ITEM_ID, p) == ITEM_ID_GARBAGE | inv(INV_ITEM_ID, p) == ITEM_ID_BONE_FRAGMENT | inv(INV_ITEM_ID, p) == ITEM_ID_SKELETON | inv(INV_ITEM_ID, p) == ITEM_ID_DEAD_FISH | inv(INV_ITEM_ID, p) == ITEM_ID_STRAW | inv(INV_ITEM_ID, p) == ITEM_ID_ANIMAL_BONE | inv(INV_ITEM_ID, p) == ITEM_ID_LARGE_BOUQUET | inv(INV_ITEM_ID, p) == ITEM_ID_STUMP | inv(INV_ITEM_ID, p) == ITEM_ID_SHIT ) {
											inv(INV_ITEM_NUM, p)--
											flt
											itemcreate -1, ITEM_ID_ORGANIC_FERTILIZER, x, y, 0
											break
										}
									loop
									cell_refresh x, y
								}
							}
						loop
					loop
					repeat MAX_CHARA_TOTAL - MAX_CHARA_SAVE, MAX_CHARA_SAVE
						rc = cnt
						gosub *renewStatus
						if ( cdata(CDATA_EXIST, cnt) != CHAR_STATE_ALIVE ) {
							continue
						}
						if ( cbit(CHARA_BIT_SUMMONED, cnt) == 1 & cdata(CDATA_RELATION, cnt) == (-3) ) {
							if ( cbit(CHARA_BIT_SANDBAG, cnt) == 0 ) {
								if ( rnd(10) > 1 ) {
									cdata(CDATA_EXIST, cnt) = CHAR_STATE_DEAD
									map(cdata(CDATA_X, cnt), cdata(CDATA_Y, cnt), 1) = 0
								}
							}
						}
					loop
					if ( rnd(sdata(SKILL_NORMAL_GARDENING, CHARA_PLAYER) + 1) > 20 + sdata(SKILL_NORMAL_GARDENING, CHARA_PLAYER) / 2 ) {
						evadd EVENT_SPAWN_EVENT_NPCS
					}
				}
				repeat mdata(MDATA_HEIGHT)
					y = cnt
					repeat mdata(MDATA_WIDTH)
						if ( map(cnt, y, 6) != 0 ) {
							cell_featread cnt, y
							if ( feat(1) >= CELL_FEATURE_SAMPLING_SPOT_DETECTION & feat(1) <= CELL_FEATURE_SAMPLING_SPOT_GARDENING ) {
								cell_featclear cnt, y
							}
						}
					loop
				loop
				inv_getheader -1
				repeat invrange, invhead
					if ( inv(INV_ITEM_NUM, cnt) == 0 ) {
						continue
					}
					if ( inv(INV_ITEM_ID, cnt) == ITEM_ID_TREE_FRUIT ) {
						if ( inv(INV_ITEM_PARAM1, cnt) < 10 ) {
							inv(INV_ITEM_PARAM1, cnt) += 1
							inv(INV_ITEM_PIC, cnt) = xy2pic(30, 17)
							cell_refresh inv(INV_ITEM_X, cnt), inv(INV_ITEM_Y, cnt)
						}
					}
					if ( mdata(MDATA_TYPE) == MAP_TYPE_TOWN | mdata(MDATA_TYPE) == MAP_TYPE_VILLAGE ) {
						if ( inv(INV_ITEM_PROPERTY, cnt) < PROP_NONE ) {
							inv(INV_ITEM_PROPERTY, cnt)++
						}
						if ( inv(INV_ITEM_PROPERTY, cnt) == PROP_NONE ) {
							inv(INV_ITEM_NUM, cnt) = 0
							cell_refresh inv(INV_ITEM_X, cnt), inv(INV_ITEM_Y, cnt)
						}
					}
				loop
			}
			p = 0
			hometc = 0
			repeat MAX_CHARA_TOTAL - MAX_CHARA_SAVE, MAX_CHARA_SAVE
				rc = cnt
				gosub *renewStatus
				if ( cdata(CDATA_EXIST, cnt) != CHAR_STATE_ALIVE ) {
					continue
				}
				if ( cbit(CHARA_BIT_SUMMONED, cnt) == 1 & cdata(CDATA_RELATION, cnt) == (-3) | (cbit(CHARA_BIT_GUEST, cnt) == 1 & gdata(GDATA_AREA) == AREA_HOME) ) {
					if ( cbit(CHARA_BIT_SANDBAG, cnt) == 0 ) {
						if ( rnd(2) == 0 ) {
							cdata(CDATA_EXIST, cnt) = CHAR_STATE_DEAD
							map(cdata(CDATA_X, cnt), cdata(CDATA_Y, cnt), 1) = 0
						}
					}
				}
				if ( gdata(GDATA_AREA) == AREA_HOME ) {
					if ( cdata(CDATA_ID, cnt) == CREATURE_ID_MAGIC_BEE ) {
						p++
					}
					if ( cdata(CDATA_ID, cnt) == CREATURE_ID_OXODE_THE_QUEEN_BEE ) {
						if ( p <= 5 ) {
							hometc = cnt
						}
					}
				}
			loop
			if ( hometc != 0 ) {
				flt
				characreate -1, CREATURE_ID_MAGIC_BEE, cdata(CDATA_X, hometc), cdata(CDATA_Y, hometc)
				cbitmod CHARA_BIT_GUEST, rc, TRUE
				flt
				characreate -1, CREATURE_ID_MAGIC_BEE, cdata(CDATA_X, hometc), cdata(CDATA_Y, hometc)
				cbitmod CHARA_BIT_GUEST, rc, TRUE
				flt
				characreate -1, CREATURE_ID_MAGIC_BEE, cdata(CDATA_X, hometc), cdata(CDATA_Y, hometc)
				cbitmod CHARA_BIT_GUEST, rc, TRUE
			}
			p = rnd(mdata(MDATA_HEIGHT) * mdata(MDATA_WIDTH) / 400 + 3)
			if ( mdata(MDATA_TYPE) == MAP_TYPE_WORLD ) {
				p = rnd(40)
			}
			if ( mdata(MDATA_TYPE) == MAP_TYPE_TOWN ) {
				p = rnd(rnd(rnd(12) + 1) + 1)
			}
			if ( mdata(MDATA_TYPE) == MAP_TYPE_VILLAGE ) {
				p = rnd(p + 1)
			}
			if ( gdata(GDATA_AREA) == AREA_SOUTH_RASKILIS ) {
				p = 40 + rnd(10)
			}
			if ( gdata(GDATA_AREA) == AREA_WEST_RASKILIS ) {
				p = 20 + rnd(5)
			}
			if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_RANDOM_DUNGEON & gdata(STARTING_GDATA_FLAG + 353) == 100 ) {
				repeat p + 10
					map_fever
				loop
			}
			else {
				repeat p
					map_randsite
				loop
			}
		}
		mdata(MDATA_RENEW) = gdata(GDATA_HOUR) + gdata(GDATA_DAY) * 24 + gdata(GDATA_MONTH) * 24 * 30 + gdata(GDATA_YEAR) * 24 * 30 * 12 + 120
		if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_RANCH | adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_CROP | gdata(GDATA_AREA) == AREA_HOME ) {
			mdata(MDATA_RENEW) = gdata(GDATA_HOUR) + gdata(GDATA_DAY) * 24 + gdata(GDATA_MONTH) * 24 * 30 + gdata(GDATA_YEAR) * 24 * 30 * 12 + 24
		}
	}
	if ( gdata(GDATA_HOUR) + gdata(GDATA_DAY) * 24 + gdata(GDATA_MONTH) * 24 * 30 + gdata(GDATA_YEAR) * 24 * 30 * 12 >= mdata(MDATA_RENEW_MINOR) ) {
		proc "renew_minor"
		if ( mdata(MDATA_RENEW_MINOR) == 0 ) {
			renewmulti = 1
		}
		else {
			renewmulti = (gdata(GDATA_HOUR) + gdata(GDATA_DAY) * 24 + gdata(GDATA_MONTH) * 24 * 30 + gdata(GDATA_YEAR) * 24 * 30 * 12 - mdata(MDATA_RENEW_MINOR)) / 24 + 1
		}
		if ( mdata(MDATA_RENEW_MINOR) != 0 ) {
			if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_CROP ) {
				renewmulti = ((gdata(GDATA_HOUR) + gdata(GDATA_DAY) * 24 + gdata(GDATA_MONTH) * 24 * 30 + gdata(GDATA_YEAR) * 24 * 30 * 12 - mdata(MDATA_RENEW_MINOR)) / 24 + 1) * 2
			}
		}
		if ( mdata(MDATA_RENEW_MINOR) != 0 ) {
			if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_RANCH ) {
				if ( TweakData(54, 2) == 1 ) {
					renewmulti = limit((gdata(GDATA_HOUR) + gdata(GDATA_DAY) * 24 + gdata(GDATA_MONTH) * 24 * 30 + gdata(GDATA_YEAR) * 24 * 30 * 12 - mdata(MDATA_RENEW_MINOR)) / 24 + 1, 1, 30) * 5
				}
				else {
					renewmulti = ((gdata(GDATA_HOUR) + gdata(GDATA_DAY) * 24 + gdata(GDATA_MONTH) * 24 * 30 + gdata(GDATA_YEAR) * 24 * 30 * 12 - mdata(MDATA_RENEW_MINOR)) / 24 + 1) * 4
				}
			}
		}
		if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_RANCH ) {
			gosub *ranch_update
		}
		if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_HOME ) {
			repeat MAX_CHARA_TOTAL - MAX_CHARA_SAVE, MAX_CHARA_SAVE
				if ( cdata(CDATA_EXIST, cnt) != CHAR_STATE_ALIVE ) {
					continue
				}
				if ( cbit(CHARA_BIT_SUMMONED, cnt) == 1 & cdata(CDATA_RELATION, cnt) == (-3) ) {
					if ( cbit(CHARA_BIT_SANDBAG, cnt) == 0 ) {
						cdata(CDATA_EXIST, cnt) = CHAR_STATE_DEAD
						map(cdata(CDATA_X, cnt), cdata(CDATA_Y, cnt), 1) = 0
					}
				}
			loop
		}
		if ( mdata(MDATA_NO_RENEW) == 0 ) {
			repeat mdata(MDATA_HEIGHT)
				y = cnt
				repeat mdata(MDATA_WIDTH)
					if ( map(cnt, y, 6) != 0 ) {
						cell_featread cnt, y
						x = cnt
						if ( feat(1) == CELL_FEATURE_PLANTED_SEED ) {
							repeat renewmulti
								if ( feat >= tile_plant + 2 ) {
									break
								}
								gosub *mapchip_init
								if ( chipm(CHIPM_ROLE, map(x, y, 0)) == MAP_CHIP_ROLE_CROP ) {
									val = 1
								}
								else {
									val = 0
								}
								gosub *item_seedGrowth
							loop
							cell_featset cnt, y, feat, feat(1), feat(2), feat(3)
						}
					}
				loop
			loop
			if ( mdata(MDATA_TYPE) == MAP_TYPE_TOWN | mdata(MDATA_TYPE) == MAP_TYPE_VILLAGE | gdata(GDATA_AREA) == AREA_HOME ) {
				repeat MAX_CHARA_TOTAL - MAX_CHARA_SAVE, MAX_CHARA_SAVE
					if ( cdata(CDATA_EXIST, cnt) != CHAR_STATE_ALIVE ) {
						continue
					}
					generatemoney cnt
					if ( cdata(CDATA_ID, cnt) == CREATURE_ID_BARD ) {
						if ( itemfind(cnt, FILTER_FURNITURE_INSTRUMENT, 1) == (-1) ) {
							if ( rnd(150) == 0 ) {
								flt
								itemcreate cnt, ITEM_ID_STRADIVARIUS, -1, -1, 0
							}
							else {
								flt calcobjlv(cdata(CDATA_LEVEL, cnt)), calcfixlv()
								flttypeminor = FILTER_FURNITURE_INSTRUMENT
								itemcreate cnt, ITEM_ID_DUMMY, -1, -1, 0
							}
						}
					}
					rc = cnt
					if ( rnd(5) == 0 ) {
						if ( cbit(CHARA_BIT_LIVESTOCK, cnt) != 1 ) {
							if ( cdatan(CDATAN_CLASS, cnt) != "predator" ) {
								gosub *supplyEquip
							}
						}
					}
					if ( rnd(2) == 0 ) {
						if ( inv_sum(rc) < 8 ) {
							flt calcobjlv(cdata(CDATA_LEVEL, rc)), calcfixlv(FIX_QUALITY_GOOD)
							itemcreate rc, ITEM_ID_DUMMY, -1, -1, 0
							if ( stat != 0 ) {
								if ( inv(INV_ITEM_WEIGHT, ci) <= 0 | inv(INV_ITEM_WEIGHT, ci) >= 4000 ) {
									inv(INV_ITEM_NUM, ci) = 0
								}
							}
						}
					}
				loop
			}
		}
		mdata(MDATA_RENEW_MINOR) = gdata(GDATA_HOUR) + gdata(GDATA_DAY) * 24 + gdata(GDATA_MONTH) * 24 * 30 + gdata(GDATA_YEAR) * 24 * 30 * 12 + 24
	}
	return

*map_prepareTile
	proc "map_prepareTile:begin"
	if ( gdata(GDATA_AREA) == AREA_ZAILE ) {
		if ( adata(ADATA_TILE_FILE, gdata(GDATA_AREA)) != 3 ) {
			adata(ADATA_TILE_FILE, gdata(GDATA_AREA)) = 3
		}
		mdata(MDATA_TILE_FILE) = 3
	}
	gsel 6
	redraw 0
	if ( mdata(MDATA_TILE_FILE) != mtilefilecur ) {
		pos 0, 0
		picload exedir + "\\graphic\\map" + mdata(MDATA_TILE_FILE) + ".bmp", 1
		mtilefilecur = mdata(MDATA_TILE_FILE)
		gosub *mapchip_init
	}
	map_tileset mdata(MDATA_TILESET)
	gsel 2
	gmode 0
	pos 0, 0
	gcopy 6, 0, 0, 33 * inf_tiles, 25 * inf_tiles
	p = 5, 5, 5
	shade = 15
	if ( mdata(MDATA_FIELD) == MAP_FIELD_OUTDOOR ) {
		if ( gdata(GDATA_LIGHT_SOURCE) == 1 ) {
			if ( gdata(GDATA_HOUR) >= 24 ) {
				p = 80, 65, 50
				shade = 8
			}
			if ( gdata(GDATA_HOUR) >= 0 & gdata(GDATA_HOUR) < 4 ) {
				p = 80, 65, 50
				shade = 8
			}
			if ( gdata(GDATA_HOUR) >= 4 & gdata(GDATA_HOUR) < 9 ) {
				p = 60 - (gdata(GDATA_HOUR) - 3) * 10, 70 - (gdata(GDATA_HOUR) - 3) * 12, 50 - (gdata(GDATA_HOUR) - 3) * 10
				if ( p < 10 ) {
					p = 10
					shade = (gdata(GDATA_HOUR) - 3) * 2 + 8
				}
			}
			if ( gdata(GDATA_HOUR) >= 9 & gdata(GDATA_HOUR) < 12 ) {
				p = 5, 5, 5
				shade = 25
			}
			if ( gdata(GDATA_HOUR) >= 12 & gdata(GDATA_HOUR) < 18 ) {
				p = 0, 0, 0
				shade = 25
			}
			if ( gdata(GDATA_HOUR) >= 18 & gdata(GDATA_HOUR) < 21 ) {
				p = 0 + (gdata(GDATA_HOUR) - 18) * 20, 15 + (gdata(GDATA_HOUR) - 18) * 15, 10 + (gdata(GDATA_HOUR) - 18) * 10
				shade = 12
			}
			if ( gdata(GDATA_HOUR) >= 21 & gdata(GDATA_HOUR) < 24 ) {
				p = 50 + (gdata(GDATA_HOUR) - 21) * 10, 45 + (gdata(GDATA_HOUR) - 21) * 10, 30 + (gdata(GDATA_HOUR) - 21) * 5
				shade = 7
			}
			if ( gdata(GDATA_WEATHER) == WEATHER_RAIN ) {
				if ( p < 35 ) {
					p = 35, 35, 35
				}
			}
			if ( gdata(GDATA_WEATHER) == WEATHER_HARD_RAIN ) {
				if ( p < 55 ) {
					p = 55, 55, 55
				}
			}
			if ( gdata(GDATA_AREA) == AREA_NOYEL ) {
				if ( gdata(GDATA_HOUR) >= 17 | gdata(GDATA_HOUR) < 7 ) {
					p += 25
					p(1) += 25
					p(2) += 25
				}
			}
		}
		else {
			if ( gdata(GDATA_HOUR) >= 24 ) {
				p = 110, 90, 60
				shade = 8
			}
			if ( gdata(GDATA_HOUR) >= 0 & gdata(GDATA_HOUR) < 4 ) {
				p = 110, 90, 60
				shade = 8
			}
			if ( gdata(GDATA_HOUR) >= 4 & gdata(GDATA_HOUR) < 10 ) {
				p = 70 - (gdata(GDATA_HOUR) - 3) * 10, 80 - (gdata(GDATA_HOUR) - 3) * 12, 60 - (gdata(GDATA_HOUR) - 3) * 10
				if ( p < 10 ) {
					p = 10
					shade = (gdata(GDATA_HOUR) - 3) * 2 + 8
				}
			}
			if ( gdata(GDATA_HOUR) >= 10 & gdata(GDATA_HOUR) < 12 ) {
				p = 10, 10, 10
				shade = 25
			}
			if ( gdata(GDATA_HOUR) >= 12 & gdata(GDATA_HOUR) < 17 ) {
				p = 0, 0, 0
				shade = 25
			}
			if ( gdata(GDATA_HOUR) >= 17 & gdata(GDATA_HOUR) < 21 ) {
				p = 0 + (gdata(GDATA_HOUR) - 17) * 20, 15 + (gdata(GDATA_HOUR) - 16) * 15, 10 + (gdata(GDATA_HOUR) - 16) * 10
				shade = 12
			}
			if ( gdata(GDATA_HOUR) >= 21 & gdata(GDATA_HOUR) < 24 ) {
				p = 80 + (gdata(GDATA_HOUR) - 21) * 10, 70 + (gdata(GDATA_HOUR) - 21) * 10, 40 + (gdata(GDATA_HOUR) - 21) * 5
				shade = 7
			}
			if ( gdata(GDATA_WEATHER) == WEATHER_RAIN ) {
				if ( p < 40 ) {
					p = 40, 40, 40
				}
			}
			if ( gdata(GDATA_WEATHER) == WEATHER_HARD_RAIN ) {
				if ( p < 65 ) {
					p = 65, 65, 65
				}
			}
			if ( gdata(GDATA_AREA) == AREA_NOYEL ) {
				if ( gdata(GDATA_HOUR) >= 17 | gdata(GDATA_HOUR) < 7 ) {
					p += 35
					p(1) += 35
					p(2) += 35
				}
			}
		}
	}
	pos 0, 0
	gfini 33 * inf_tiles, 25 * inf_tiles
	gfdec2 p, p(1), p(2)
	color 255, 255, 255
	gmode 4, , , 30
	if ( mdata(MDATA_TILE_FILE) == 0 ) {
		pos 0, 192
		gcopy 6, 0, 192, 1360, 48
	}
	if ( mdata(MDATA_TILE_FILE) == 1 ) {
		pos 0, 1056
		gcopy 6, 0, 1056, 1360, 48
	}
	if ( mdata(MDATA_TILE_FILE) == 3 ) {
		pos 0, 1056
		gcopy 6, 0, 1056, 1360, 48
	}
	if ( mdata(MDATA_TILE_FILE) != 2 ) {
		pos 0, 336
		gcopy 6, 0, 336, 1360, 48
	}
	gmode 0
	gsel 0
	gmode 2, 24, 24
	proc "map_prepareTile:end"
	return

*world_newRandArea
	proc "world_newRandArea"
	p = 0
	repeat MAX_AREA_COUNT - STARTING_RANDOM_AREA, STARTING_RANDOM_AREA
		if ( adata(ADATA_ID, cnt) == AREA_RANDOM_DUNGEON ) {
			if ( adata(ADATA_BOSS, cnt) != (-1) ) {
				p++
			}
		}
	loop
	p = 40 - p
	if ( p < 1 ) {
		p = 1
	}
	if ( gdata(GDATA_WORLD) != AREA_AIMWELL ) {
		repeat p
			cxinit = rnd(mdata(MDATA_WIDTH))
			cyinit = rnd(mdata(MDATA_HEIGHT))
			gosub *map_createRandArea
		loop
	}
	gdata(GDATA_FLAG_STATUE_OPATOS) = 0
	gosub *world_refresh
	return 1

*world_update
	proc "world_update"
	if ( gdata(GDATA_WORLD_RENEW) == 1 ) {
		gosub *setArea
		gosub *world_refresh
		repeat MAX_AREA_COUNT - STARTING_RANDOM_AREA, STARTING_RANDOM_AREA
			adata(ADATA_ID, cnt) = AREA_NONE
		loop
		if ( gdata(GDATA_AREA) == AREA_NORTH_TYRIS ) {
			map_initcustom "ntyris"
			gosub *world_newRandArea
			map_placeplayer
		}
		if ( gdata(GDATA_AREA) == AREA_SOUTH_TYRIS ) {
			map_initcustom "styris"
			gosub *world_newRandArea
			map_placeplayer
		}
		if ( gdata(GDATA_AREA) == AREA_TEST_WORLD ) {
			map_initcustom "test"
			gosub *world_newRandArea
			map_placeplayer
		}
		if ( gdata(GDATA_AREA) == AREA_LOST_YLVA ) {
			map_initcustom "lost"
			gosub *world_newRandArea
			map_placeplayer
		}
		if ( gdata(GDATA_AREA) == AREA_AIMWELL ) {
			map_initcustom "ether"
			gosub *world_newRandArea
			map_placeplayer
		}
	}
	p = 0
	repeat MAX_AREA_COUNT - STARTING_RANDOM_AREA, STARTING_RANDOM_AREA
		if ( adata(ADATA_ID, cnt) == AREA_NONE ) {
			continue
		}
		if ( adata(ADATA_ID, cnt) == AREA_RANDOM_DUNGEON ) {
			if ( adata(ADATA_BOSS, cnt) != (-1) ) {
				p++
			}
		}
	loop
	if ( p <= 25 | gdata(GDATA_FLAG_RENEW_DUNGEON) != 0 | gdata(GDATA_WORLD_RENEW) ) {
		proc "world_update_rand_dungeon"
		gdata(GDATA_FLAG_RENEW_DUNGEON) = 0
		msgtemp += lang("この大陸に大きな地殻変動が起こった。", " A sudden diastrophism hits the continent.")
		repeat MAX_AREA_COUNT - STARTING_RANDOM_AREA, STARTING_RANDOM_AREA
			if ( adata(ADATA_ID, cnt) == AREA_RANDOM_DUNGEON ) {
				if ( gdata(GDATA_FLAG_STATUE_OPATOS) == 1 | rnd(5) == 0 | adata(ADATA_BOSS, cnt) == (-1) ) {
					adata(ADATA_ID, cnt) = AREA_NONE
					map(adata(ADATA_X, cnt), adata(ADATA_Y, cnt), 0) = 0
				}
			}
		loop
		gosub *world_newRandArea
		gosub *world_refresh
	}
	gdata(GDATA_WORLD_RENEW) = 0
	return

*world_refresh
	gosub *world_clear
	gosub *world_setArea
	return

*world_setArea
	proc "world_setArea:building"
	gosub *mapchip_init
	repeat 20
		cnt2 = cnt
		if ( gdata(GDATA_WORLD) != AREA_NORTH_TYRIS ) {
			break
		}
		repeat 10
			if ( bddata(0, cnt2, cnt) != 0 ) {
				p = bddata(0, cnt2, cnt)
				cell_featset bddata(1, cnt2, cnt), bddata(2, cnt2, cnt), bddata(3, cnt2, cnt), CELL_FEATURE_BUILDING, cnt2, cnt
			}
		loop
	loop
	repeat 500
		procid = (procid + 1) \ 4
		proclist(procid) = "world_setArea:fix:id" + cnt + "/" + adata(ADATA_ID, cnt) + " ct:" + ct
		if ( adata(ADATA_ID, cnt) == AREA_NONE | adata(ADATA_ICON, cnt) == 0 ) {
			continue
		}
		if ( adata(ADATA_PARENT, cnt) != gdata(GDATA_WORLD) ) {
			continue
		}
		if ( adata(ADATA_ID, cnt) == 900 ) {
			adata(ADATA_ID, cnt) = AREA_PET_ARENA
			continue
		}
		if ( adata(ADATA_ID, cnt) >= 900 ) {
			adata(ADATA_ID, cnt) -= 800
			continue
		}
		procid = (procid + 1) \ 4
		proclist(procid) = "world_setArea:fix:begin" + adata(ADATA_X, cnt) + "/" + adata(ADATA_Y, cnt) + " ct:" + ct
		if ( adata(ADATA_X, cnt) <= 0 | adata(ADATA_Y, cnt) <= 0 | adata(ADATA_X, cnt) >= mdata(MDATA_WIDTH) | adata(ADATA_Y, cnt) >= mdata(MDATA_HEIGHT) ) {
			adata(ADATA_X, cnt) = mdata(MDATA_WIDTH) / 2
			adata(ADATA_Y, cnt) = mdata(MDATA_HEIGHT) / 2
		}
		p = cnt
		if ( chipm(CHIPM_ATTRIB, map(adata(ADATA_X, cnt), adata(ADATA_Y, cnt), 0)) & CHIPM_ATTRIB_CANT_PASS | map(adata(ADATA_X, cnt), adata(ADATA_Y, cnt), 6) != 0 ) {
			proc "world_setArea:fix:loop"
			repeat
				await
				dx = limit(rnd(cnt / 4 + 1) + 1, 1, mdata(MDATA_WIDTH))
				dy = limit(rnd(cnt / 4 + 1) + 1, 1, mdata(MDATA_HEIGHT))
				x = adata(ADATA_X, p) + rnd(dx) - rnd(dx)
				y = adata(ADATA_Y, p) + rnd(dy) - rnd(dy)
				if ( x <= 0 | y <= 0 | x >= mdata(MDATA_WIDTH) - 1 | y >= mdata(MDATA_HEIGHT) - 1 ) {
					continue
				}
				if ( range_tileRoad(map(x, y, 0)) ) {
					continue
				}
				if ( chipm(CHIPM_ATTRIB, map(x, y, 0)) & CHIPM_ATTRIB_CANT_PASS ) {
					continue
				}
				if ( map(x, y, 6) != 0 ) {
					continue
				}
				adata(ADATA_X, p) = x
				adata(ADATA_Y, p) = y
				break
			loop
		}
		procid = (procid + 1) \ 4
		proclist(procid) = "world_setArea:fix:xy:" + x + ":" + y + " ct:" + ct
		procid = (procid + 1) \ 4
		proclist(procid) = "world_setArea:fix:map:" + map(adata(ADATA_X, cnt), adata(ADATA_Y, cnt), 0) + " ct:" + ct
		if ( range_tileRoad(map(adata(ADATA_X, cnt), adata(ADATA_Y, cnt), 0)) | chipm(CHIPM_ROLE, map(adata(ADATA_X, cnt), adata(ADATA_Y, cnt), 0)) == MAP_CHIP_ROLE_SNOW | chipm(CHIPM_ROLE_SUB, map(adata(ADATA_X, cnt), adata(ADATA_Y, cnt), 0)) == MAP_CHIP_ROLE_COAST ) {
            ; pass
        }
        else {
			map(adata(ADATA_X, cnt), adata(ADATA_Y, cnt), 0) = 0
		}
		cell_featset adata(ADATA_X, cnt), adata(ADATA_Y, cnt), adata(ADATA_ICON, cnt), CELL_FEATURE_NEFIA, cnt \ 100, cnt / 100
		proc "world_setArea:fix:'"
		if ( adata(ADATA_TYPE, cnt) == MAP_TYPE_TOWN | adata(ADATA_TYPE, cnt) == MAP_TYPE_VILLAGE ) {
			map(adata(ADATA_X, cnt), adata(ADATA_Y, cnt), 9) = 11
		}
	loop
	proc "world_setArea:end"
	return

*world_clear
	repeat mdata(MDATA_HEIGHT)
		y = cnt
		repeat mdata(MDATA_WIDTH)
			x = cnt
			cell_featread x, y
			if ( feat(1) < CELL_FEATURE_SAMPLING_SPOT_DETECTION | feat(1) > CELL_FEATURE_SAMPLING_SPOT_GARDENING ) {
				map(x, y, 6) = 0
			}
			map(x, y, 9) = 0
		loop
	loop
	return

*setArea
	p = AREA_AIMWELL
	adata(ADATA_ID, p) = AREA_AIMWELL
	adata(ADATA_ICON, p) = xy2pic(0, 0)
	adata(ADATA_TYPE, p) = MAP_TYPE_WORLD
	adata(ADATA_X, p) = 20
	adata(ADATA_Y, p) = 10
	adata(ADATA_START_ON, p) = 6
	adata(ADATA_TILE_FILE, p) = 2
	adata(ADATA_TILESET, p) = 1
	adata(ADATA_TIME_SCALE, p) = 50000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 1
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 0
	adata(ADATA_PARENT, p) = AREA_AIMWELL
	p = AREA_ZAILE
	adata(ADATA_ID, p) = AREA_ZAILE
	adata(ADATA_ICON, p) = xy2pic(16, 11)
	adata(ADATA_TYPE, p) = MAP_TYPE_VILLAGE
	adata(ADATA_X, p) = 20
	adata(ADATA_Y, p) = 10
	adata(ADATA_START_ON, p) = 3
	adata(ADATA_TILE_FILE, p) = 3
	adata(ADATA_TILESET, p) = tstown2
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 999
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_PARENT, p) = AREA_AIMWELL
	p = AREA_SOUTH_RASKILIS
	adata(ADATA_ID, p) = AREA_SOUTH_RASKILIS
	adata(ADATA_ICON, p) = xy2pic(21, 11)
	adata(ADATA_TYPE, p) = MAP_TYPE_FIELD
	adata(ADATA_X, p) = 25
	adata(ADATA_Y, p) = 14
	adata(ADATA_START_ON, p) = 3
	adata(ADATA_TILE_FILE, p) = 3
	adata(ADATA_TILESET, p) = tstown2
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 999
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_PARENT, p) = AREA_AIMWELL
	p = AREA_WEST_RASKILIS
	adata(ADATA_ID, p) = AREA_WEST_RASKILIS
	adata(ADATA_ICON, p) = xy2pic(21, 11)
	adata(ADATA_TYPE, p) = MAP_TYPE_FIELD
	adata(ADATA_X, p) = 21
	adata(ADATA_Y, p) = 12
	adata(ADATA_START_ON, p) = 3
	adata(ADATA_TILE_FILE, p) = 3
	adata(ADATA_TILESET, p) = tstown2
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 999
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_PARENT, p) = AREA_AIMWELL
	p = AREA_SEBI
	adata(ADATA_ID, p) = AREA_SEBI
	adata(ADATA_ICON, p) = xy2pic(16, 11)
	adata(ADATA_TYPE, p) = MAP_TYPE_VILLAGE
	adata(ADATA_X, p) = 15
	adata(ADATA_Y, p) = 19
	adata(ADATA_START_ON, p) = 3
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = tstown2
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 999
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_PARENT, p) = AREA_AIMWELL
	p = AREA_LOST_YLVA
	adata(ADATA_ID, p) = AREA_LOST_YLVA
	adata(ADATA_ICON, p) = xy2pic(0, 0)
	adata(ADATA_TYPE, p) = MAP_TYPE_WORLD
	adata(ADATA_X, p) = 6
	adata(ADATA_Y, p) = 21
	adata(ADATA_START_ON, p) = 6
	adata(ADATA_TILE_FILE, p) = 2
	adata(ADATA_TILESET, p) = 1
	adata(ADATA_TIME_SCALE, p) = 50000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 1
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 0
	adata(ADATA_PARENT, p) = AREA_LOST_YLVA
	p = AREA_TEST_WORLD
	adata(ADATA_ID, p) = AREA_TEST_WORLD
	adata(ADATA_ICON, p) = xy2pic(0, 0)
	adata(ADATA_TYPE, p) = MAP_TYPE_WORLD
	adata(ADATA_X, p) = 26
	adata(ADATA_Y, p) = 23
	adata(ADATA_START_ON, p) = 6
	adata(ADATA_TILE_FILE, p) = 2
	adata(ADATA_TILESET, p) = 1
	adata(ADATA_TIME_SCALE, p) = 50000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 1
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 0
	adata(ADATA_PARENT, p) = AREA_TEST_WORLD
	p = AREA_TW_NORTH_BORDER
	adata(ADATA_ID, p) = AREA_TW_NORTH_BORDER
	adata(ADATA_ICON, p) = xy2pic(26, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_VILLAGE
	adata(ADATA_X, p) = 28
	adata(ADATA_Y, p) = 1
	adata(ADATA_START_ON, p) = 8
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 2
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 1
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_PARENT, p) = AREA_TEST_WORLD
	p = AREA_SOUTH_TYRIS
	adata(ADATA_ID, p) = AREA_SOUTH_TYRIS
	adata(ADATA_ICON, p) = xy2pic(0, 0)
	adata(ADATA_TYPE, p) = MAP_TYPE_WORLD
	adata(ADATA_X, p) = 41
	adata(ADATA_Y, p) = 2
	adata(ADATA_START_ON, p) = 6
	adata(ADATA_TILE_FILE, p) = 2
	adata(ADATA_TILESET, p) = 1
	adata(ADATA_TIME_SCALE, p) = 50000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 1
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 0
	adata(ADATA_PARENT, p) = AREA_SOUTH_TYRIS
	p = AREA_ST_NORTH_BORDER
	adata(ADATA_ID, p) = AREA_ST_NORTH_BORDER
	adata(ADATA_ICON, p) = xy2pic(26, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_VILLAGE
	adata(ADATA_X, p) = 42
	adata(ADATA_Y, p) = 1
	adata(ADATA_START_ON, p) = 8
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 2
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 100
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_PARENT, p) = AREA_SOUTH_TYRIS
	p = AREA_SMOKE_AND_PIPE
	adata(ADATA_ID, p) = AREA_SMOKE_AND_PIPE
	adata(ADATA_ICON, p) = xy2pic(27, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_VILLAGE
	adata(ADATA_X, p) = 39
	adata(ADATA_Y, p) = 13
	adata(ADATA_START_ON, p) = 8
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 2
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 1
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_PARENT, p) = AREA_SOUTH_TYRIS
	p = AREA_REMIDO
	adata(ADATA_ID, p) = AREA_REMIDO
	adata(ADATA_ICON, p) = xy2pic(29, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_DUNGEON
	adata(ADATA_X, p) = 33
	adata(ADATA_Y, p) = 25
	adata(ADATA_START_ON, p) = 1
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 0
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 100
	adata(ADATA_MAX_LEVEL, p) = 129
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 0
	adata(ADATA_PARENT, p) = AREA_SOUTH_TYRIS
	p = AREA_CHAOS_CRADLE
	adata(ADATA_ID, p) = AREA_CHAOS_CRADLE
	adata(ADATA_ICON, p) = xy2pic(17, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_DUNGEON
	adata(ADATA_X, p) = 39
	adata(ADATA_Y, p) = 25
	adata(ADATA_START_ON, p) = 1
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 0
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 140
	adata(ADATA_MAX_LEVEL, p) = 180
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 0
	adata(ADATA_PARENT, p) = AREA_LOST_YLVA
	p = AREA_IRMA_THALIA_WORKSHOP
	adata(ADATA_ID, p) = AREA_IRMA_THALIA_WORKSHOP
	adata(ADATA_ICON, p) = xy2pic(31, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_FIELD
	adata(ADATA_X, p) = 62
	adata(ADATA_Y, p) = 25
	adata(ADATA_START_ON, p) = 8
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 2
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 1
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_PARENT, p) = AREA_LOST_YLVA
	p = AREA_OL_DRAN
	adata(ADATA_ID, p) = AREA_OL_DRAN
	adata(ADATA_ICON, p) = xy2pic(4, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_TOWN
	adata(ADATA_X, p) = 23
	adata(ADATA_Y, p) = 17
	adata(ADATA_START_ON, p) = 3
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 2
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 999
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_ECONOMY, p) = 0
	adata(ADATA_PARENT, p) = AREA_LOST_YLVA
	p = AREA_DOCK
	adata(ADATA_ID, p) = AREA_DOCK
	adata(ADATA_ICON, p) = xy2pic(10, 11)
	adata(ADATA_TYPE, p) = MAP_TYPE_VILLAGE
	adata(ADATA_X, p) = 40
	adata(ADATA_Y, p) = 4
	adata(ADATA_START_ON, p) = 1
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 8
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 999
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_ECONOMY, p) = 0
	adata(ADATA_PARENT, p) = AREA_LOST_YLVA
	p = AREA_WAR_GROUND
	adata(ADATA_ID, p) = AREA_WAR_GROUND
	adata(ADATA_ICON, p) = xy2pic(15, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_FIELD
	adata(ADATA_X, p) = 19
	adata(ADATA_Y, p) = 47
	adata(ADATA_START_ON, p) = 3
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 4
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 999
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_PARENT, p) = AREA_LOST_YLVA
	p = AREA_ULM_LESON
	adata(ADATA_ID, p) = AREA_ULM_LESON
	adata(ADATA_ICON, p) = xy2pic(9, 11)
	adata(ADATA_TYPE, p) = MAP_TYPE_VILLAGE
	adata(ADATA_X, p) = 6
	adata(ADATA_Y, p) = 21
	adata(ADATA_START_ON, p) = 3
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 2
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 999
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_ECONOMY, p) = 0
	adata(ADATA_PARENT, p) = AREA_LOST_YLVA
	p = AREA_YLVA_LIBRARY
	adata(ADATA_ID, p) = AREA_YLVA_LIBRARY
	adata(ADATA_ICON, p) = xy2pic(18, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_VILLAGE
	adata(ADATA_X, p) = 23
	adata(ADATA_Y, p) = 32
	adata(ADATA_START_ON, p) = 8
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 2
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 999
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_ECONOMY, p) = 0
	adata(ADATA_PARENT, p) = AREA_LOST_YLVA
	p = AREA_BLIMP
	adata(ADATA_ID, p) = AREA_BLIMP
	adata(ADATA_ICON, p) = xy2pic(7, 11)
	adata(ADATA_TYPE, p) = MAP_TYPE_VILLAGE
	adata(ADATA_X, p) = 34
	adata(ADATA_Y, p) = 52
	adata(ADATA_START_ON, p) = 3
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 2
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 999
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_ECONOMY, p) = 0
	adata(ADATA_PARENT, p) = AREA_LOST_YLVA
	p = AREA_AMUR_CAGE
	adata(ADATA_ID, p) = AREA_AMUR_CAGE
	adata(ADATA_ICON, p) = xy2pic(15, 2)
	adata(ADATA_TYPE, p) = MAP_TYPE_VILLAGE
	adata(ADATA_X, p) = 55
	adata(ADATA_Y, p) = 20
	adata(ADATA_START_ON, p) = 3
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 2
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 999
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_ECONOMY, p) = 0
	adata(ADATA_PARENT, p) = AREA_LOST_YLVA
	p = AREA_DRAGON_VOLCANO
	adata(ADATA_ID, p) = AREA_DRAGON_VOLCANO
	adata(ADATA_ICON, p) = xy2pic(8, 11)
	adata(ADATA_TYPE, p) = MAP_TYPE_DUNGEON
	adata(ADATA_X, p) = 10
	adata(ADATA_Y, p) = 38
	adata(ADATA_START_ON, p) = 1
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 0
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 160
	adata(ADATA_MAX_LEVEL, p) = 161
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 0
	adata(ADATA_PARENT, p) = AREA_LOST_YLVA
	p = AREA_HARVEST_SHIP
	adata(ADATA_ID, p) = AREA_HARVEST_SHIP
	adata(ADATA_ICON, p) = xy2pic(15, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_DUNGEON
	adata(ADATA_X, p) = 65
	adata(ADATA_Y, p) = 51
	adata(ADATA_START_ON, p) = 1
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 0
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 140
	adata(ADATA_MAX_LEVEL, p) = 141
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 0
	adata(ADATA_PARENT, p) = AREA_LOST_YLVA
	p = AREA_MIRAGE_TOWER
	adata(ADATA_ID, p) = AREA_MIRAGE_TOWER
	adata(ADATA_ICON, p) = xy2pic(20, 5)
	adata(ADATA_TYPE, p) = MAP_TYPE_VILLAGE
	adata(ADATA_X, p) = 61
	adata(ADATA_Y, p) = 48
	adata(ADATA_START_ON, p) = 8
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 2
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 999
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_ECONOMY, p) = 0
	adata(ADATA_PARENT, p) = AREA_LOST_YLVA
	p = AREA_RUST_PLAZA
	adata(ADATA_ID, p) = AREA_RUST_PLAZA
	adata(ADATA_ICON, p) = xy2pic(6, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_TOWN
	adata(ADATA_X, p) = 62
	adata(ADATA_Y, p) = 31
	adata(ADATA_START_ON, p) = 8
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 2
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 999
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_ECONOMY, p) = 0
	adata(ADATA_PARENT, p) = AREA_LOST_YLVA
	p = AREA_GUARDIAN_SHRINE
	adata(ADATA_ID, p) = AREA_GUARDIAN_SHRINE
	adata(ADATA_ICON, p) = xy2pic(29, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_VILLAGE
	adata(ADATA_X, p) = 39
	adata(ADATA_Y, p) = 28
	adata(ADATA_START_ON, p) = 8
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 2
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 999
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_ECONOMY, p) = 0
	adata(ADATA_PARENT, p) = AREA_LOST_YLVA
	p = AREA_OBLIVION_PALACE
	adata(ADATA_ID, p) = AREA_OBLIVION_PALACE
	adata(ADATA_ICON, p) = xy2pic(7, 0)
	adata(ADATA_TYPE, p) = MAP_TYPE_FIELD
	adata(ADATA_X, p) = 35
	adata(ADATA_Y, p) = 22
	adata(ADATA_START_ON, p) = 1
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 2
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 999
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_ECONOMY, p) = 0
	adata(ADATA_PARENT, p) = AREA_SOUTH_TYRIS
	p = AREA_EIREL
	adata(ADATA_ID, p) = AREA_EIREL
	adata(ADATA_ICON, p) = xy2pic(0, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_TOWN
	adata(ADATA_X, p) = 41
	adata(ADATA_Y, p) = 2
	adata(ADATA_START_ON, p) = 3
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 2
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 999
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_ECONOMY, p) = 8
	adata(ADATA_PARENT, p) = AREA_SOUTH_TYRIS
	p = AREA_RUOZA
	adata(ADATA_ID, p) = AREA_RUOZA
	adata(ADATA_ICON, p) = xy2pic(16, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_VILLAGE
	adata(ADATA_X, p) = 31
	adata(ADATA_Y, p) = 13
	adata(ADATA_START_ON, p) = 3
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 2
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 999
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_ECONOMY, p) = 9
	adata(ADATA_PARENT, p) = AREA_SOUTH_TYRIS
	p = AREA_MELKAWN
	adata(ADATA_ID, p) = AREA_MELKAWN
	adata(ADATA_ICON, p) = xy2pic(4, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_TOWN
	adata(ADATA_X, p) = 24
	adata(ADATA_Y, p) = 11
	adata(ADATA_START_ON, p) = 3
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 2
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 999
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_ECONOMY, p) = 10
	adata(ADATA_PARENT, p) = AREA_SOUTH_TYRIS
	p = AREA_KURUALM
	adata(ADATA_ID, p) = AREA_KURUALM
	adata(ADATA_ICON, p) = xy2pic(5, 11)
	adata(ADATA_TYPE, p) = MAP_TYPE_TOWN
	adata(ADATA_X, p) = 16
	adata(ADATA_Y, p) = 10
	adata(ADATA_START_ON, p) = 3
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 2
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 999
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_ECONOMY, p) = 11
	adata(ADATA_PARENT, p) = AREA_SOUTH_TYRIS
	p = AREA_VALM
	adata(ADATA_ID, p) = AREA_VALM
	adata(ADATA_ICON, p) = xy2pic(0, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_TOWN
	adata(ADATA_X, p) = 3
	adata(ADATA_Y, p) = 33
	adata(ADATA_START_ON, p) = 3
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 2
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 999
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_ECONOMY, p) = 12
	adata(ADATA_PARENT, p) = AREA_SOUTH_TYRIS
	p = AREA_MELUGAS
	adata(ADATA_ID, p) = AREA_MELUGAS
	adata(ADATA_ICON, p) = xy2pic(18, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_TOWN
	adata(ADATA_X, p) = 25
	adata(ADATA_Y, p) = 29
	adata(ADATA_START_ON, p) = 3
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 8
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 999
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_ECONOMY, p) = 13
	adata(ADATA_PARENT, p) = AREA_SOUTH_TYRIS
	p = AREA_ARCBELC
	adata(ADATA_ID, p) = AREA_ARCBELC
	adata(ADATA_ICON, p) = xy2pic(0, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_TOWN
	adata(ADATA_X, p) = 30
	adata(ADATA_Y, p) = 42
	adata(ADATA_START_ON, p) = 3
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 2
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 1
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_ECONOMY, p) = 14
	adata(ADATA_PARENT, p) = AREA_SOUTH_TYRIS
	p = AREA_LUDUS
	adata(ADATA_ID, p) = AREA_LUDUS
	adata(ADATA_ICON, p) = xy2pic(10, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_TOWN
	adata(ADATA_X, p) = 56
	adata(ADATA_Y, p) = 32
	adata(ADATA_START_ON, p) = 3
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 2
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 999
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_ECONOMY, p) = 15
	adata(ADATA_PARENT, p) = AREA_SOUTH_TYRIS
	p = AREA_MAID_MANSION
	adata(ADATA_ID, p) = AREA_MAID_MANSION
	adata(ADATA_ICON, p) = xy2pic(12, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_HOME
	adata(ADATA_X, p) = 21
	adata(ADATA_Y, p) = 37
	adata(ADATA_START_ON, p) = 3
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 3
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 3
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 0
	adata(ADATA_PARENT, p) = AREA_SOUTH_TYRIS
	p = AREA_MELKA_FOREST
	adata(ADATA_ID, p) = AREA_MELKA_FOREST
	adata(ADATA_ICON, p) = xy2pic(12, 11)
	adata(ADATA_TYPE, p) = MAP_TYPE_FOREST
	adata(ADATA_X, p) = 22
	adata(ADATA_Y, p) = 21
	adata(ADATA_START_ON, p) = 1
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 300
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 75
	adata(ADATA_MAX_LEVEL, p) = 81
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 0
	adata(ADATA_PARENT, p) = AREA_SOUTH_TYRIS
	p = AREA_GRAVITY_VALLEY
	adata(ADATA_ID, p) = AREA_GRAVITY_VALLEY
	adata(ADATA_ICON, p) = xy2pic(13, 11)
	adata(ADATA_TYPE, p) = MAP_TYPE_DUNGEON
	adata(ADATA_X, p) = 35
	adata(ADATA_Y, p) = 3
	adata(ADATA_START_ON, p) = 1
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 0
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 90
	adata(ADATA_MAX_LEVEL, p) = 96
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 0
	adata(ADATA_PARENT, p) = AREA_SOUTH_TYRIS
	p = AREA_MOUNTAIN_RUIN
	adata(ADATA_ID, p) = AREA_MOUNTAIN_RUIN
	adata(ADATA_ICON, p) = xy2pic(14, 11)
	adata(ADATA_TYPE, p) = MAP_TYPE_FORT
	adata(ADATA_X, p) = 46
	adata(ADATA_Y, p) = 19
	adata(ADATA_START_ON, p) = 1
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 0
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 105
	adata(ADATA_MAX_LEVEL, p) = 110
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 0
	adata(ADATA_PARENT, p) = AREA_SOUTH_TYRIS
	p = AREA_CHAOS_SHRINE
	adata(ADATA_ID, p) = AREA_CHAOS_SHRINE
	adata(ADATA_ICON, p) = xy2pic(9, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_DUNGEON
	adata(ADATA_X, p) = 45
	adata(ADATA_Y, p) = 22
	adata(ADATA_START_ON, p) = 1
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 0
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 55
	adata(ADATA_MAX_LEVEL, p) = 61
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 0
	adata(ADATA_PARENT, p) = AREA_SOUTH_TYRIS
	p = AREA_VALLEY_HADES
	adata(ADATA_ID, p) = AREA_VALLEY_HADES
	adata(ADATA_ICON, p) = xy2pic(30, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_DUNGEON
	adata(ADATA_X, p) = 59
	adata(ADATA_Y, p) = 46
	adata(ADATA_START_ON, p) = 1
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 0
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 70
	adata(ADATA_MAX_LEVEL, p) = 71
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 0
	adata(ADATA_PARENT, p) = AREA_SOUTH_TYRIS
	p = AREA_MACHINERY_FORT
	adata(ADATA_ID, p) = AREA_MACHINERY_FORT
	adata(ADATA_ICON, p) = xy2pic(18, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_FORT
	adata(ADATA_X, p) = 36
	adata(ADATA_Y, p) = 37
	adata(ADATA_START_ON, p) = 1
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 0
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 60
	adata(ADATA_MAX_LEVEL, p) = 65
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 0
	adata(ADATA_PARENT, p) = AREA_SOUTH_TYRIS
	p = AREA_NORTH_TYRIS
	adata(ADATA_ID, p) = AREA_NORTH_TYRIS
	adata(ADATA_ICON, p) = xy2pic(0, 0)
	adata(ADATA_TYPE, p) = MAP_TYPE_WORLD
	adata(ADATA_X, p) = 26
	adata(ADATA_Y, p) = 23
	adata(ADATA_START_ON, p) = 6
	adata(ADATA_TILE_FILE, p) = 2
	adata(ADATA_TILESET, p) = 1
	adata(ADATA_TIME_SCALE, p) = 50000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 1
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 0
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	p = AREA_VERNIS
	adata(ADATA_ID, p) = AREA_VERNIS
	adata(ADATA_ICON, p) = xy2pic(0, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_TOWN
	adata(ADATA_X, p) = 26
	adata(ADATA_Y, p) = 23
	adata(ADATA_START_ON, p) = 3
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = tstown2
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 999
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_ECONOMY, p) = 1
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	p = AREA_YOWYN
	adata(ADATA_ID, p) = AREA_YOWYN
	adata(ADATA_ICON, p) = xy2pic(10, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_TOWN
	adata(ADATA_X, p) = 43
	adata(ADATA_Y, p) = 32
	adata(ADATA_START_ON, p) = 3
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 2
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 999
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_ECONOMY, p) = 2
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	p = AREA_PALMIA
	adata(ADATA_ID, p) = AREA_PALMIA
	adata(ADATA_ICON, p) = xy2pic(4, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_TOWN
	adata(ADATA_X, p) = 53
	adata(ADATA_Y, p) = 24
	adata(ADATA_START_ON, p) = 3
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 2
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 1
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_ECONOMY, p) = 3
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	p = AREA_DERPHY
	adata(ADATA_ID, p) = AREA_DERPHY
	adata(ADATA_ICON, p) = xy2pic(10, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_TOWN
	adata(ADATA_X, p) = 14
	adata(ADATA_Y, p) = 35
	adata(ADATA_START_ON, p) = 3
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 2
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 999
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_ECONOMY, p) = 4
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	p = AREA_PORT_KAPUL
	adata(ADATA_ID, p) = AREA_PORT_KAPUL
	adata(ADATA_ICON, p) = xy2pic(0, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_TOWN
	adata(ADATA_X, p) = 3
	adata(ADATA_Y, p) = 15
	adata(ADATA_START_ON, p) = 3
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 2
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 999
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_ECONOMY, p) = 5
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	p = AREA_NOYEL
	adata(ADATA_ID, p) = AREA_NOYEL
	adata(ADATA_ICON, p) = xy2pic(24, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_TOWN
	adata(ADATA_X, p) = 89
	adata(ADATA_Y, p) = 14
	adata(ADATA_START_ON, p) = 3
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 2
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 100
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_ECONOMY, p) = 6
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	p = AREA_LUMIEST
	adata(ADATA_ID, p) = AREA_LUMIEST
	adata(ADATA_ICON, p) = xy2pic(0, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_TOWN
	adata(ADATA_X, p) = 61
	adata(ADATA_Y, p) = 32
	adata(ADATA_START_ON, p) = 3
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 2
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 999
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_ECONOMY, p) = 7
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	p = AREA_WILDERNESS
	adata(ADATA_ID, p) = AREA_WILDERNESS
	adata(ADATA_ICON, p) = xy2pic(0, 0)
	adata(ADATA_TYPE, p) = MAP_TYPE_LOCAL
	adata(ADATA_X, p) = 0
	adata(ADATA_Y, p) = 0
	adata(ADATA_START_ON, p) = 4
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 4
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 1
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 0
	adata(ADATA_RESTORE_POS, p) = 0
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	p = AREA_HOME
	adata(ADATA_ID, p) = AREA_HOME
	adata(ADATA_TYPE, p) = MAP_TYPE_HOME
	adata(ADATA_START_ON, p) = 8
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 10
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	if ( gdata(GDATA_HOME_LEVEL) == 0 ) {
		if ( gdata(GDATA_FLAG_HOME_MOVED) == 0 ) {
			adata(ADATA_ICON, p) = xy2pic(6, 4)
			adata(ADATA_X, p) = 22
			adata(ADATA_Y, p) = 21
			adata(ADATA_TILE_FILE, p) = 1
			adata(ADATA_TILESET, p) = 3
			adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
		}
	}
	p = AREA_SHOW_HOUSE
	adata(ADATA_ID, p) = AREA_SHOW_HOUSE
	adata(ADATA_TYPE, p) = MAP_TYPE_QUEST
	adata(ADATA_START_ON, p) = 8
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 1
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 0
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_ICON, p) = xy2pic(26, 4)
	adata(ADATA_X, p) = 35
	adata(ADATA_Y, p) = 27
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 3
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	p = AREA_ARENA
	adata(ADATA_ID, p) = AREA_ARENA
	adata(ADATA_ICON, p) = xy2pic(0, 0)
	adata(ADATA_TYPE, p) = MAP_TYPE_QUEST
	adata(ADATA_X, p) = 22
	adata(ADATA_Y, p) = 21
	adata(ADATA_START_ON, p) = 4
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 100
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 1
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 0
	adata(ADATA_RESTORE_POS, p) = 0
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	p = AREA_PET_ARENA
	adata(ADATA_ID, p) = AREA_PET_ARENA
	adata(ADATA_ICON, p) = xy2pic(0, 0)
	adata(ADATA_TYPE, p) = MAP_TYPE_QUEST
	adata(ADATA_X, p) = 23
	adata(ADATA_Y, p) = 21
	adata(ADATA_START_ON, p) = 1
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 100
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 1
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 0
	adata(ADATA_RESTORE_POS, p) = 0
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	p = AREA_QUEST
	adata(ADATA_ID, p) = AREA_QUEST
	adata(ADATA_ICON, p) = xy2pic(0, 0)
	adata(ADATA_TYPE, p) = MAP_TYPE_QUEST
	adata(ADATA_X, p) = 22
	adata(ADATA_Y, p) = 21
	adata(ADATA_START_ON, p) = 4
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 100
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 1
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 0
	adata(ADATA_RESTORE_POS, p) = 0
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	p = AREA_LESIMAS
	adata(ADATA_ID, p) = AREA_LESIMAS
	adata(ADATA_ICON, p) = xy2pic(7, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_DUNGEON
	adata(ADATA_X, p) = 23
	adata(ADATA_Y, p) = 29
	adata(ADATA_START_ON, p) = 1
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 0
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 45
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 0
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	p = AREA_VOID
	adata(ADATA_ID, p) = AREA_VOID
	adata(ADATA_ICON, p) = xy2pic(7, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_DUNGEON
	adata(ADATA_X, p) = 81
	adata(ADATA_Y, p) = 51
	adata(ADATA_START_ON, p) = 1
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 0
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 50
	adata(ADATA_MAX_LEVEL, p) = 99999999
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 0
	adata(ADATA_RESTORE_POS, p) = 0
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	p = AREA_SEMINAR
	adata(ADATA_ID, p) = AREA_SEMINAR
	adata(ADATA_ICON, p) = xy2pic(11, 11)
	adata(ADATA_TYPE, p) = MAP_TYPE_VILLAGE
	adata(ADATA_X, p) = 26
	adata(ADATA_Y, p) = 27
	adata(ADATA_START_ON, p) = 3
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 2
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 10
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	p = AREA_TOWER_OF_FIRE
	adata(ADATA_ID, p) = AREA_TOWER_OF_FIRE
	adata(ADATA_ICON, p) = xy2pic(13, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_TOWER
	adata(ADATA_X, p) = 43
	adata(ADATA_Y, p) = 4
	adata(ADATA_START_ON, p) = 1
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 0
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 15
	adata(ADATA_MAX_LEVEL, p) = 18
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 0
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	p = AREA_CRYPT_OF_THE_DAMNED
	adata(ADATA_ID, p) = AREA_CRYPT_OF_THE_DAMNED
	adata(ADATA_ICON, p) = xy2pic(9, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_DUNGEON
	adata(ADATA_X, p) = 37
	adata(ADATA_Y, p) = 20
	adata(ADATA_START_ON, p) = 1
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 0
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 25
	adata(ADATA_MAX_LEVEL, p) = 30
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 0
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	p = AREA_ANCIENT_CASTLE
	adata(ADATA_ID, p) = AREA_ANCIENT_CASTLE
	adata(ADATA_ICON, p) = xy2pic(12, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_FORT
	adata(ADATA_X, p) = 26
	adata(ADATA_Y, p) = 44
	adata(ADATA_START_ON, p) = 1
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 0
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 17
	adata(ADATA_MAX_LEVEL, p) = 22
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 0
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	p = AREA_DRAGON_NEST
	adata(ADATA_ID, p) = AREA_DRAGON_NEST
	adata(ADATA_ICON, p) = xy2pic(14, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_DUNGEON
	adata(ADATA_X, p) = 13
	adata(ADATA_Y, p) = 32
	adata(ADATA_START_ON, p) = 1
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 0
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 30
	adata(ADATA_MAX_LEVEL, p) = 33
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 0
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	p = AREA_MOUNTAIN_PASS
	adata(ADATA_ID, p) = AREA_MOUNTAIN_PASS
	adata(ADATA_ICON, p) = xy2pic(14, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_DUNGEON
	adata(ADATA_X, p) = 64
	adata(ADATA_Y, p) = 43
	adata(ADATA_START_ON, p) = 2
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 0
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 25
	adata(ADATA_MAX_LEVEL, p) = 29
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 0
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	p = AREA_MOUNTAIN_PASS_WINDY
	adata(ADATA_ID, p) = AREA_MOUNTAIN_PASS_WINDY
	adata(ADATA_ICON, p) = xy2pic(2, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_DUNGEON
	adata(ADATA_X, p) = 46
	adata(ADATA_Y, p) = 18
	adata(ADATA_START_ON, p) = 2
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 0
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 110
	adata(ADATA_MAX_LEVEL, p) = 114
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 0
	adata(ADATA_PARENT, p) = AREA_SOUTH_TYRIS
	p = AREA_PUPPY_CAVE
	adata(ADATA_ID, p) = AREA_PUPPY_CAVE
	adata(ADATA_ICON, p) = xy2pic(14, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_DUNGEON
	adata(ADATA_X, p) = 29
	adata(ADATA_Y, p) = 24
	adata(ADATA_START_ON, p) = 1
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 0
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 2
	adata(ADATA_MAX_LEVEL, p) = 5
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 0
	adata(ADATA_RESTORE_POS, p) = 0
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	p = AREA_DOGGOD_FOREST
	adata(ADATA_ID, p) = AREA_DOGGOD_FOREST
	adata(ADATA_ICON, p) = xy2pic(3, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_FOREST
	adata(ADATA_X, p) = 11
	adata(ADATA_Y, p) = 43
	adata(ADATA_START_ON, p) = 1
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 300
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 60
	adata(ADATA_MAX_LEVEL, p) = 65
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 0
	adata(ADATA_RESTORE_POS, p) = 0
	adata(ADATA_PARENT, p) = AREA_SOUTH_TYRIS
	p = AREA_MINOTAUR_NEST
	adata(ADATA_ID, p) = AREA_MINOTAUR_NEST
	adata(ADATA_ICON, p) = xy2pic(14, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_DUNGEON
	adata(ADATA_X, p) = 43
	adata(ADATA_Y, p) = 39
	adata(ADATA_START_ON, p) = 1
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 0
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 23
	adata(ADATA_MAX_LEVEL, p) = 27
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 0
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	p = AREA_YEEK_NEST
	adata(ADATA_ID, p) = AREA_YEEK_NEST
	adata(ADATA_ICON, p) = xy2pic(14, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_DUNGEON
	adata(ADATA_X, p) = 38
	adata(ADATA_Y, p) = 31
	adata(ADATA_START_ON, p) = 1
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 0
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 5
	adata(ADATA_MAX_LEVEL, p) = 5
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 0
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	p = AREA_PYRAMID
	adata(ADATA_ID, p) = AREA_PYRAMID
	adata(ADATA_ICON, p) = xy2pic(28, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_DUNGEON
	adata(ADATA_X, p) = 4
	adata(ADATA_Y, p) = 11
	adata(ADATA_START_ON, p) = 1
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 0
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 20
	adata(ADATA_MAX_LEVEL, p) = 21
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 0
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	p = AREA_GRAVEYARD
	adata(ADATA_ID, p) = AREA_GRAVEYARD
	adata(ADATA_ICON, p) = xy2pic(9, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_FIELD
	adata(ADATA_X, p) = 74
	adata(ADATA_Y, p) = 31
	adata(ADATA_START_ON, p) = 3
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 4
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 1
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	p = AREA_TRUCE_GROUND
	adata(ADATA_ID, p) = AREA_TRUCE_GROUND
	adata(ADATA_ICON, p) = xy2pic(15, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_FIELD
	adata(ADATA_X, p) = 51
	adata(ADATA_Y, p) = 9
	adata(ADATA_START_ON, p) = 3
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 4
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 1
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	p = AREA_JAIL
	adata(ADATA_ID, p) = AREA_JAIL
	adata(ADATA_ICON, p) = xy2pic(29, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_FIELD
	adata(ADATA_X, p) = 28
	adata(ADATA_Y, p) = 37
	adata(ADATA_START_ON, p) = 1
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 12
	adata(ADATA_TIME_SCALE, p) = 100000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 1
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 0
	adata(ADATA_RESTORE_POS, p) = 0
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	p = AREA_JAIL2
	adata(ADATA_ID, p) = AREA_JAIL2
	adata(ADATA_ICON, p) = xy2pic(29, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_FIELD
	adata(ADATA_X, p) = 28
	adata(ADATA_Y, p) = 37
	adata(ADATA_START_ON, p) = 1
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 12
	adata(ADATA_TIME_SCALE, p) = 100000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 1
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 0
	adata(ADATA_RESTORE_POS, p) = 0
	adata(ADATA_PARENT, p) = AREA_SOUTH_TYRIS
	p = AREA_CYBER_DOME
	adata(ADATA_ID, p) = AREA_CYBER_DOME
	adata(ADATA_ICON, p) = xy2pic(16, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_VILLAGE
	adata(ADATA_X, p) = 21
	adata(ADATA_Y, p) = 27
	adata(ADATA_START_ON, p) = 8
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 8
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 1
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	p = AREA_LARNA
	adata(ADATA_ID, p) = AREA_LARNA
	adata(ADATA_ICON, p) = xy2pic(10, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_VILLAGE
	adata(ADATA_X, p) = 64
	adata(ADATA_Y, p) = 47
	adata(ADATA_START_ON, p) = 3
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 9
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 1
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	p = AREA_ANCIENT_GARDEN
	adata(ADATA_ID, p) = AREA_ANCIENT_GARDEN
	adata(ADATA_ICON, p) = xy2pic(31, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_VILLAGE
	adata(ADATA_X, p) = 46
	adata(ADATA_Y, p) = 15
	adata(ADATA_START_ON, p) = 3
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 8
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 1
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_PARENT, p) = AREA_SOUTH_TYRIS
	p = AREA_MIROK_WORKSHOP
	adata(ADATA_ID, p) = AREA_MIROK_WORKSHOP
	adata(ADATA_ICON, p) = xy2pic(25, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_VILLAGE
	adata(ADATA_X, p) = 88
	adata(ADATA_Y, p) = 25
	adata(ADATA_START_ON, p) = 8
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 2
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 1
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	p = AREA_ABODE_OF_WITCH
	adata(ADATA_ID, p) = AREA_ABODE_OF_WITCH
	adata(ADATA_ICON, p) = xy2pic(25, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_VILLAGE
	adata(ADATA_X, p) = 62
	adata(ADATA_Y, p) = 14
	adata(ADATA_START_ON, p) = 8
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 2
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 1
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	p = AREA_DEVIL_CAPE
	adata(ADATA_ID, p) = AREA_DEVIL_CAPE
	adata(ADATA_ICON, p) = xy2pic(27, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_VILLAGE
	adata(ADATA_X, p) = 42
	adata(ADATA_Y, p) = 51
	adata(ADATA_START_ON, p) = 8
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 2
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 1
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	p = AREA_SISTER_MANSION
	adata(ADATA_ID, p) = AREA_SISTER_MANSION
	adata(ADATA_ICON, p) = xy2pic(31, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_FIELD
	adata(ADATA_X, p) = 18
	adata(ADATA_Y, p) = 2
	adata(ADATA_START_ON, p) = 8
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 2
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 1
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	p = AREA_EMBASSY
	adata(ADATA_ID, p) = AREA_EMBASSY
	adata(ADATA_ICON, p) = xy2pic(23, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_VILLAGE
	adata(ADATA_X, p) = 53
	adata(ADATA_Y, p) = 21
	adata(ADATA_START_ON, p) = 8
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 2
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 1
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	p = AREA_NT_SOUTH_BORDER
	adata(ADATA_ID, p) = AREA_NT_SOUTH_BORDER
	adata(ADATA_ICON, p) = xy2pic(26, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_VILLAGE
	adata(ADATA_X, p) = 27
	adata(ADATA_Y, p) = 52
	adata(ADATA_START_ON, p) = 8
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 2
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 100
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	p = AREA_BEAST_FORT
	adata(ADATA_ID, p) = AREA_BEAST_FORT
	adata(ADATA_ICON, p) = xy2pic(17, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_FIELD
	adata(ADATA_X, p) = 13
	adata(ADATA_Y, p) = 43
	adata(ADATA_START_ON, p) = 8
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 100
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 33
	adata(ADATA_MAX_LEVEL, p) = 33
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	p = AREA_MACHINE_FORT
	adata(ADATA_ID, p) = AREA_MACHINE_FORT
	adata(ADATA_ICON, p) = xy2pic(17, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_FIELD
	adata(ADATA_X, p) = 51
	adata(ADATA_Y, p) = 32
	adata(ADATA_START_ON, p) = 8
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 100
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 33
	adata(ADATA_MAX_LEVEL, p) = 33
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	p = AREA_COLLAPSED_FORT
	adata(ADATA_ID, p) = AREA_COLLAPSED_FORT
	adata(ADATA_ICON, p) = xy2pic(17, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_FIELD
	adata(ADATA_X, p) = 35
	adata(ADATA_Y, p) = 10
	adata(ADATA_START_ON, p) = 8
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 100
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 33
	adata(ADATA_MAX_LEVEL, p) = 33
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	p = AREA_DESTRUCTION_FORT
	adata(ADATA_ID, p) = AREA_DESTRUCTION_FORT
	adata(ADATA_ICON, p) = xy2pic(17, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_FIELD
	adata(ADATA_X, p) = 44
	adata(ADATA_Y, p) = 46
	adata(ADATA_START_ON, p) = 8
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 100
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 33
	adata(ADATA_MAX_LEVEL, p) = 33
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_PARENT, p) = AREA_SOUTH_TYRIS
	p = AREA_WEAPONS_FORT
	adata(ADATA_ID, p) = AREA_WEAPONS_FORT
	adata(ADATA_ICON, p) = xy2pic(17, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_FIELD
	adata(ADATA_X, p) = 33
	adata(ADATA_Y, p) = 55
	adata(ADATA_START_ON, p) = 8
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 100
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 33
	adata(ADATA_MAX_LEVEL, p) = 33
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_PARENT, p) = AREA_SOUTH_TYRIS
	p = AREA_HELL_FORT
	adata(ADATA_ID, p) = AREA_HELL_FORT
	adata(ADATA_ICON, p) = xy2pic(17, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_FIELD
	adata(ADATA_X, p) = 60
	adata(ADATA_Y, p) = 4
	adata(ADATA_START_ON, p) = 8
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 100
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 33
	adata(ADATA_MAX_LEVEL, p) = 33
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_PARENT, p) = AREA_SOUTH_TYRIS
	p = AREA_DOJO
	adata(ADATA_ID, p) = AREA_DOJO
	adata(ADATA_ICON, p) = xy2pic(32, 4)
	adata(ADATA_TYPE, p) = MAP_TYPE_VILLAGE
	adata(ADATA_X, p) = 28
	adata(ADATA_Y, p) = 47
	adata(ADATA_START_ON, p) = 8
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 9
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 1
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	p = AREA_SHELTER
	adata(ADATA_ID, p) = AREA_SHELTER
	adata(ADATA_ICON, p) = xy2pic(0, 0)
	adata(ADATA_TYPE, p) = MAP_TYPE_HOME
	adata(ADATA_X, p) = 35
	adata(ADATA_Y, p) = 10
	adata(ADATA_START_ON, p) = 1
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 100
	adata(ADATA_TIME_SCALE, p) = 1000000
	adata(ADATA_MIN_LEVEL, p) = -999999
	adata(ADATA_MAX_LEVEL, p) = 999999
	adata(ADATA_FIELD, p) = 1
	adata(ADATA_CAN_SAVE, p) = 1
	adata(ADATA_RESTORE_POS, p) = 1
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	p = AREA_TEST_GROUND
	adata(ADATA_ID, p) = AREA_TEST_GROUND
	adata(ADATA_ICON, p) = xy2pic(0, 0)
	adata(ADATA_TYPE, p) = MAP_TYPE_FIELD
	adata(ADATA_X, p) = 20
	adata(ADATA_Y, p) = 20
	adata(ADATA_START_ON, p) = 4
	adata(ADATA_TILE_FILE, p) = 1
	adata(ADATA_TILESET, p) = 4
	adata(ADATA_TIME_SCALE, p) = 10000
	adata(ADATA_MIN_LEVEL, p) = 1
	adata(ADATA_MAX_LEVEL, p) = 45
	adata(ADATA_FIELD, p) = 2
	adata(ADATA_CAN_SAVE, p) = 0
	adata(ADATA_RESTORE_POS, p) = 0
	adata(ADATA_PARENT, p) = AREA_NORTH_TYRIS
	return

*map_createRandArea
	repeat MAX_AREA_COUNT - STARTING_RANDOM_AREA, STARTING_RANDOM_AREA
		if ( adata(ADATA_ID, cnt) != AREA_NONE ) {
			continue
		}
		f = -1
		repeat 1000
			x = cxinit + rnd(cnt + 1) - rnd(cnt + 1)
			y = cyinit + rnd(cnt + 1) - rnd(cnt + 1)
			if ( x <= 5 | y <= 5 | x >= mdata(MDATA_WIDTH) - 6 | y >= mdata(MDATA_HEIGHT) - 6 ) {
				continue
			}
			if ( range_tileRoad(map(x, y, 0)) ) {
				continue
			}
			if ( map(x, y, 0) > 16 ) {
				continue
			}
			if ( map(x, y, 6) \ 1000 != 0 ) {
				continue
			}
			p = 1
			repeat 500
				if ( adata(ADATA_ID, cnt) == AREA_NONE ) {
					continue
				}
				if ( x >= adata(ADATA_X, cnt) - 2 & x <= adata(ADATA_X, cnt) + 2 ) {
					if ( y >= adata(ADATA_Y, cnt) - 2 & y <= adata(ADATA_Y, cnt) + 2 ) {
						p = 0
						break
					}
				}
			loop
			if ( p == 0 ) {
				continue
			}
			f = 1
			break
		loop
		if ( f == (-1) ) {
			p = -1
			break
		}
		p = cnt
		area = p
		fmode = 13
		gosub *game_ctrlFile
		adata(ADATA_TYPE, p) = MAP_TYPE_DUNGEON_MIN + rnd(MAP_TYPE_DUNGEON_RANGE)
		adata(ADATA_ID, p) = AREA_RANDOM_DUNGEON
		adata(ADATA_ICON, p) = xy2pic(1, 4)
		adata(ADATA_X, p) = x
		adata(ADATA_Y, p) = y
		adata(ADATA_START_ON, p) = 1
		adata(ADATA_TILE_FILE, p) = 1
		adata(ADATA_TILESET, p) = 1
		adata(ADATA_TIME_SCALE, p) = 10000
		adata(ADATA_FIELD, p) = 1
		adata(ADATA_PARENT, p) = gdata(GDATA_WORLD)
		mltype = rnd(4)
		if ( gdata(GDATA_DEEPEST_LEVEL) < gdata(GDATA_FLAG_MAIN) * 1 / 4 + 1 ) {
			gdata(GDATA_DEEPEST_LEVEL) = gdata(GDATA_FLAG_MAIN) * 1 / 4 + 1
		}
		if ( mltype == 0 ) {
			adata(ADATA_MIN_LEVEL, p) = gdata(GDATA_DEEPEST_LEVEL) / 2 + rnd(gdata(GDATA_DEEPEST_LEVEL) * 11 / 10 + 5) + 1
			if ( gdata(GDATA_FLAG_STATUE_OPATOS) == 1 ) {
				adata(ADATA_MIN_LEVEL, p) = adata(ADATA_MIN_LEVEL, p) / 4 + 1
			}
		}
		if ( mltype == 1 ) {
			adata(ADATA_MIN_LEVEL, p) = gdata(GDATA_DEEPEST_LEVEL) / 2 + rnd(gdata(GDATA_DEEPEST_LEVEL) * 11 / 10 + 5) + 1
			if ( gdata(GDATA_FLAG_STATUE_OPATOS) == 1 ) {
				adata(ADATA_MIN_LEVEL, p) = adata(ADATA_MIN_LEVEL, p) / 4 + 1
			}
			if ( gdata(GDATA_WORLD) == AREA_NORTH_TYRIS ) {
				adata(ADATA_MIN_LEVEL, p) = adata(ADATA_MIN_LEVEL, p) / 4 + 1
			}
			if ( gdata(GDATA_WORLD) == AREA_SOUTH_TYRIS ) {
				adata(ADATA_MIN_LEVEL, p) = adata(ADATA_MIN_LEVEL, p) / 2 + 1
			}
			if ( gdata(GDATA_WORLD) == AREA_LOST_YLVA ) {
				adata(ADATA_MIN_LEVEL, p) = adata(ADATA_MIN_LEVEL, p) * 3 / 4 + 1
			}
		}
		if ( mltype == 2 ) {
			adata(ADATA_MIN_LEVEL, p) = rnd(45) + 1
			if ( gdata(GDATA_WORLD) == AREA_SOUTH_TYRIS ) {
				adata(ADATA_MIN_LEVEL, p) = rnd(60) + 30
			}
			if ( gdata(GDATA_WORLD) == AREA_LOST_YLVA ) {
				adata(ADATA_MIN_LEVEL, p) = rnd(50) + 100
			}
		}
		if ( mltype == 3 ) {
			adata(ADATA_MIN_LEVEL, p) = gdata(GDATA_DEEPEST_LEVEL) * 9 / 10 + rnd(gdata(GDATA_DEEPEST_LEVEL) * 1 / 5 + 2) + 1
			if ( gdata(GDATA_FLAG_STATUE_OPATOS) == 1 ) {
				adata(ADATA_MIN_LEVEL, p) = adata(ADATA_MIN_LEVEL, p) / 4 + 1
			}
		}
		mltype = 0
		adata(ADATA_MAX_LEVEL, p) = adata(ADATA_MIN_LEVEL, p) + rnd(4) + 2
		adata(ADATA_CAN_SAVE, p) = 1
		adata(ADATA_RESTORE_POS, p) = 0
		adata(ADATA_BOSS, p) = 0
		adata(ADATA_NAME, p) = rnd(length(mapnamerd))
		map(x, y, 6) = 1
		if ( adata(ADATA_TYPE, p) == MAP_TYPE_DUNGEON ) {
			adata(ADATA_ICON, p) = xy2pic(1, 4)
			adata(ADATA_TILESET, p) = 0
		}
		if ( adata(ADATA_TYPE, p) == MAP_TYPE_TOWER ) {
			adata(ADATA_ICON, p) = xy2pic(5, 4)
			adata(ADATA_TILESET, p) = 100
		}
		if ( adata(ADATA_TYPE, p) == MAP_TYPE_FORT ) {
			adata(ADATA_ICON, p) = xy2pic(8, 4)
			adata(ADATA_TILESET, p) = 200
		}
		if ( adata(ADATA_TYPE, p) == MAP_TYPE_FOREST ) {
			adata(ADATA_ICON, p) = xy2pic(3, 4)
			adata(ADATA_TILESET, p) = 300
		}
		if ( adata(ADATA_TYPE, p) == MAP_TYPE_NEST ) {
			adata(ADATA_ICON, p) = xy2pic(17, 11)
			adata(ADATA_TILESET, p) = 15
		}
		if ( adata(ADATA_TYPE, p) == MAP_TYPE_CEMETERY ) {
			adata(ADATA_ICON, p) = xy2pic(18, 11)
			adata(ADATA_TILESET, p) = 16
		}
		if ( adata(ADATA_TYPE, p) == MAP_TYPE_MINE ) {
			adata(ADATA_ICON, p) = xy2pic(19, 11)
			adata(ADATA_TILESET, p) = 17
		}
		if ( adata(ADATA_TYPE, p) == MAP_TYPE_LAKE ) {
			adata(ADATA_ICON, p) = xy2pic(20, 11)
			adata(ADATA_TILESET, p) = 18
		}
		break
	loop
	return p

*mapEvent
	if ( gdata(GDATA_AREA) == AREA_NOYEL ) {
		if ( gdata(GDATA_FLAG_FIRE_GIANT) == 1 ) {
			if ( cdata(CDATA_EXIST, gdata(GDATA_FLAG_GIANT_ID)) == CHAR_STATE_ALIVE ) {
				if ( gdata(GDATA_CROWD) < 30 ) {
					if ( rnd(4) == 0 ) {
						flt
						objlv = 1
						characreate -1, CREATURE_ID_PALMIAN_ELITE_SOLDIER, -3, 0
					}
					if ( rnd(10) == 0 ) {
						flt
						objlv = 1
						characreate -1, CREATURE_ID_TOURIST, -3, 0
					}
				}
			}
		}
	}
	if ( gdata(GDATA_QUEST) == QUEST_TYPE_CONQUER ) {
		if ( qdata(QDATA_STATUS, gdata(GDATA_QUEST_REF)) != QUEST_STATE_SUCCESS ) {
			if ( gdata(GDATA_CROWD) < gdata(GDATA_TIME_LIMIT) / 300 ) {
				dbid = 0
				if ( rnd(4) == 0 ) {
					dbid = CREATURE_ID_PALMIAN_ELITE_SOLDIER
				}
				if ( rnd(20) == 0 ) {
					dbid = CREATURE_ID_TOURIST
				}
				if ( dbid != 0 ) {
					flt
					objlv = 1
					characreate -1, dbid, -3, 0
					if ( stat != 0 ) {
						cdata(CDATA_RELATION, rc) = -1
						cdata(CDATA_RELATION_ORG, rc) = -1
						cdata(CDATA_AI_AGGRO, rc) = 100
						cdata(CDATA_TARGET, rc) = qdata(QDATA_PARAM2, gdata(GDATA_QUEST_REF))
					}
				}
			}
		}
	}
	if ( gdata(GDATA_AREA) == AREA_TOWER_OF_FIRE ) {
		if ( rnd(5) == 0 ) {
			r = sdata(SKILL_RES_FIRE, CHARA_PLAYER) / 50
			if ( r < 3 ) {
				dmg = (4 - r) * (4 - r) * 2
				txtef COLOR_RED
				txtmore
				txt lang("熱い！", "It's hot!")
				dmghp cc, dmg, DAMAGE_FROM_FIRE
			}
		}
		return
	}
	if ( cdata(CDATA_FRIENDSHIP, CHARA_PLAYER) == (-1) ) {
		if ( rnd(5) == 0 ) {
			snd SOUNDLIST_BOLT1
			tuex = rnd(mdata(MDATA_WIDTH))
			tuey = rnd(mdata(MDATA_HEIGHT))
			txtef COLOR_SKY_BLUE
			if ( rnd(2) == 0 ) {
				txt lang("空を裂いて何かが落ちてきた！", "Something falls through the sky!")
			}
			else {
				txt lang("神の杖が地上に振り下ろされた！", "A rods from God is swung down!")
			}
			snd SOUNDLIST_ATK_FIRE
			range = 6
			ele = SKILL_RES_CHAOS
			aniref = range
			animeid = ANIMATION_BALL_NUKE
			anix = tuex
			aniy = tuey
			gosub *anime
			gosub *screen_draw
			repeat range * 2 + 1
				dy = tuey - range + cnt
				if ( dy < 0 | dy >= mdata(MDATA_HEIGHT) ) {
					continue
				}
				repeat range * 2 + 1
					dx = tuex - range + cnt
					if ( dx < 0 | dx >= mdata(MDATA_WIDTH) ) {
						continue
					}
					if ( dist(tuex, tuey, dx, dy) > range ) {
						continue
					}
					f = 0
					if ( map(dx, dy, MAP_TILE_ID) != xy2pic(8, 21) & map(dx, dy, MAP_TILE_ID) != xy2pic(11, 20) ) {
						map(dx, dy, MAP_TILE_ID) = xy2pic(4, 1)
					}
					if ( map(dx, dy, MAP_CHARA_INDEX_PLUS_ONE) != 0 ) {
						tc = map(dx, dy, MAP_CHARA_INDEX_PLUS_ONE) - 1
						if ( cdata(CDATA_IN_TAGTEAM, tc) != 0 ) {
							if ( tc != CHARA_PLAYER ) {
								if ( rnd(cdata(CDATA_HP, tc) + 1) < rnd(cdata(CDATA_HP, cdata(CDATA_TAGTEAM_PARTNER, tc)) + 1) ) {
									tc = cdata(CDATA_TAGTEAM_PARTNER, tc)
								}
								txt lang(name(tc) + "は" + name(cdata(CDATA_TAGTEAM_PARTNER, tc)) + "をかばった！", name(tc) + " guarded " + name(cdata(CDATA_TAGTEAM_PARTNER, tc)) + ".")
							}
						}
						dmg = 1000
						dmghp tc, dmg, DAMAGE_FROM_TRAP
					}
				loop
			loop
		}
	}
	if ( gdata(GDATA_AREA) == AREA_NT_SOUTH_BORDER ) {
		if ( gdata(GDATA_LEVEL) == 100 ) {
			if ( rnd(20) == 0 ) {
				txtef COLOR_RED
				txtmore
				txt lang("神経ガスが漂ってきた！", "Nerve gas was released!")
				snd SOUNDLIST_ATK_NERVE
				repeat MAX_CHARA_TOTAL
					if ( cdata(CDATA_EXIST, cnt) != CHAR_STATE_ALIVE ) {
						continue
					}
					if ( cdata(CDATA_ID, cnt) != CREATURE_ID_REGULUS_THE_ALTERED & cdatan(CDATAN_RACE, cnt) != "bacteria" ) {
						if ( cdata(CDATA_HP, cnt) > cdata(CDATA_MAX_HP, cnt) / 5 ) {
							dmghp cnt, 200, DAMAGE_FROM_TRAP, SKILL_RES_NERVE, 200
						}
						else {
							if ( cdata(CDATA_CONDITION_PARALYZE, cnt) == 0 ) {
								cdata(CDATA_CONDITION_PARALYZE, cnt)++
							}
						}
					}
					else {
						if ( cdata(CDATA_CONDITION_PARALYZE, cnt) == 0 ) {
							cdata(CDATA_CONDITION_PARALYZE, cnt)++
						}
					}
				loop
			}
			return
		}
	}
	if ( gdata(GDATA_AREA) == AREA_DOCK ) {
		if ( gdata(GDATA_LEVEL) == 100 ) {
			if ( rnd(15) == 0 ) {
				snd SOUNDLIST_FISH_GET
				repeat MAX_CHARA_TOTAL
					if ( cdata(CDATA_EXIST, cnt) != CHAR_STATE_ALIVE ) {
						continue
					}
					if ( cdata(CDATA_RELATION, cnt) == (-3) ) {
						continue
					}
					dmgcon cnt, CONDITION_BLEED, 50
					dmgcon cnt, CONDITION_POISON, 60
				loop
			}
			return
		}
	}
	if ( gdata(GDATA_AREA) == AREA_BLIMP ) {
		if ( gdata(GDATA_LEVEL) == 100 ) {
			if ( gdata(GDATA_FLAG_SUB_REGULUS_EULDERNA) < 100 ) {
				if ( rnd(20) == 0 ) {
					repeat MAX_CHARA_TOTAL
						if ( cdata(CDATA_EXIST, cnt) != CHAR_STATE_ALIVE ) {
							continue
						}
						if ( cdata(CDATA_ID, cnt) != CREATURE_ID_MAGIC_ARCHER & cdata(CDATA_ID, cnt) != CREATURE_ID_EULDERNA_SUMMONKNIGHT ) {
							continue
						}
						if ( cdata(CDATA_ALLIED, cnt) != 0 ) {
							continue
						}
						if ( cnt == CHARA_PLAYER ) {
							continue
						}
						if ( cdata(CDATA_POWER_GAUGE, cnt) < 50 ) {
							cdata(CDATA_POWER_GAUGE, cnt) = 50
							reve = 100
						}
					loop
					if ( reve == 100 ) {
						txtef COLOR_RED
						txt lang("敵の魔法使いたちは復讐心を煽られた。", "Rebel magicians were fueled by revenge.")
					}
					reve = 0
				}
				return
			}
		}
	}
	if ( gdata(GDATA_AREA) == AREA_CHAOS_CRADLE ) {
		if ( gdata(GDATA_LEVEL) == 149 ) {
			if ( gdata(GDATA_FLAG_MAIN) == 470 ) {
				if ( rnd(15) == 0 ) {
					snd SOUNDLIST_CURSE2
					txtef COLOR_RED
					txt lang("悪魔による空間干渉が始まった。", "Distortion jammers")
					tc = findcharala(CREATURE_ID_MELUGAST_TYPEM)
					if ( rnd(100) >= 94 ) {
						tc = CHARA_PLAYER
					}
					if ( tc == CHARA_PLAYER ) {
						repeat MAX_CHARA_TOTAL
							if ( cdata(CDATA_EXIST, cnt) != CHAR_STATE_ALIVE ) {
								continue
							}
							if ( cdata(CDATA_ID, cnt) == CREATURE_ID_EGELVEIL_THE_BIND ) {
								addbuff cnt, BUFF_RETENTION, 400, 50
							}
							cdata(CDATA_CONDITION_BIND, cnt) = 50
						loop
					}
					else {
						txtef COLOR_BLUE
						txt lang("…Ｄジャマーで軽減されたようだ。", "Distortion jammer was activated.")
						repeat MAX_CHARA_TOTAL
							if ( cdata(CDATA_EXIST, cnt) != CHAR_STATE_ALIVE ) {
								continue
							}
							cdata(CDATA_CONDITION_BIND, cnt) = 5
						loop
					}
				}
				return
			}
		}
	}
	if ( gdata(GDATA_AREA) == AREA_CHAOS_CRADLE ) {
		if ( gdata(GDATA_LEVEL) == 164 ) {
			if ( findchara(CREATURE_ID_LANKATA_THE_LIGHTNING_OF_BLUE) != 0 ) {
				if ( gdata(GDATA_FLAG_MAIN_CHAOS_CRADLE_25) == 0 ) {
					if ( rnd(20) == 0 ) {
						snd SOUNDLIST_CHEER
						txtef COLOR_RED
						txt lang("「奮い立て！ロスリアの理想のために命を賭けよ！」", "Soldiers morale went up.")
						repeat MAX_CHARA_TOTAL
							if ( cdata(CDATA_EXIST, cnt) != CHAR_STATE_ALIVE ) {
								continue
							}
							if ( cdata(CDATA_RELATION, cnt) != (-3) ) {
								continue
							}
							addbuff cnt, BUFF_SPEED, 271 * 3 + 50, 75
							addbuff cnt, BUFF_HERO, 271 * 3 + 100, 75
							if ( cdata(CDATA_POWER_GAUGE, cnt) < 50 ) {
								cdata(CDATA_POWER_GAUGE, cnt) += 10
							}
						loop
					}
				}
			}
		}
	}
	if ( gdata(GDATA_AREA) == AREA_DRAGON_VOLCANO ) {
		if ( rnd(10) == 0 ) {
			txtef COLOR_RED
			txtmore
			txt lang("熱風が吹き抜けた！", "It's hot!")
			repeat MAX_CHARA_TOTAL
				if ( sdata(SKILL_RES_FIRE, cnt) / 50 < 6 ) {
					dmghp cnt, gdata(GDATA_LEVEL) * 2 + 50, DAMAGE_FROM_TRAP, SKILL_RES_FIRE, 1000
				}
			loop
		}
		return
	}
	if ( adata(ADATA_WAKEUP_NEFIA, gdata(GDATA_AREA)) == WAKEUP_NEFIA_NORMAL ) {
		if ( rnd(10) == 0 ) {
			txtef COLOR_RED
			txtmore
			txt lang("ネフィアが放電を行った！", "Nefia released an electrical discharge!")
			snd SOUNDLIST_PUNISH1
			repeat MAX_CHARA_TOTAL
				if ( cdata(CDATA_EXIST, cnt) != CHAR_STATE_ALIVE ) {
					continue
				}
				dmghp cnt, gdata(GDATA_LEVEL) * 2 + 50, DAMAGE_FROM_TRAP, SKILL_RES_LIGHTNING, 1000
			loop
		}
		return
	}
	if ( adata(ADATA_WAKEUP_NEFIA, gdata(GDATA_AREA)) == WAKEUP_NEFIA_POISON ) {
		if ( rnd(20) == 0 ) {
			txtef COLOR_RED
			txtmore
			txt lang("ネフィアが猛毒を噴きだした！", "Nefia released deadly poison!")
			snd SOUNDLIST_ATK_POISON
			repeat MAX_CHARA_TOTAL
				if ( cdata(CDATA_EXIST, cnt) != CHAR_STATE_ALIVE ) {
					continue
				}
				dmghp cnt, gdata(GDATA_LEVEL) * 2 + 50, DAMAGE_FROM_POISON, SKILL_RES_POISON, gdata(GDATA_LEVEL) + 200
			loop
		}
		return
	}
	if ( adata(ADATA_WAKEUP_NEFIA, gdata(GDATA_AREA)) == WAKEUP_NEFIA_GRAVITY | (gdata(GDATA_AREA) == AREA_GRAVITY_VALLEY & gdata(STARTING_GDATA_FLAG + 370) < 1000) ) {
		if ( rnd(5) == 0 ) {
			txtef COLOR_RED
			txtmore
			txt lang("ネフィアが重力を発した！", "Nefia generated gravity!")
			snd SOUNDLIST_POP3
			snd SOUNDLIST_POP3
			repeat MAX_CHARA_TOTAL
				if ( cdata(CDATA_EXIST, cnt) != CHAR_STATE_ALIVE ) {
					continue
				}
				if ( cdata(CDATA_CONDITION_GRAVITY, cnt) < 50 ) {
					cdata(CDATA_CONDITION_GRAVITY, cnt) = 50
				}
			loop
		}
		return
	}
	if ( gdata(GDATA_AREA) == AREA_VALM ) {
		if ( gdata(GDATA_LEVEL) == 30 ) {
			if ( gdata(GDATA_FLAG_MAIN) < 400 ) {
				if ( rnd(10) == 0 ) {
					txtef COLOR_RED
					txtmore
					txt lang("頭の中におぞましい呼び声が響いた…。", "A horrifying call rings in your head...")
					snd SOUNDLIST_CURSE2
					repeat MAX_CHARA_TOTAL
						if ( cdata(CDATA_EXIST, cnt) != CHAR_STATE_ALIVE ) {
							continue
						}
						if ( cdatan(CDATAN_RACE, cnt) == "yith" ) {
							continue
						}
						if ( cdatan(CDATAN_RACE, cnt) == "seamonster" ) {
							continue
						}
						if ( cdata(CDATA_ID, cnt) == CREATURE_ID_ATLACH_NACHA ) {
							continue
						}
						if ( cnt > MAX_CHARA_FOLLOWER ) {
							if ( cdata(CDATA_QUALITY, cnt) >= FIX_QUALITY_MIRACLE ) {
								continue
							}
						}
						if ( sdata(SKILL_RES_MIND, cnt) / 50 < rnd(15) + cdata(CDATA_SANITY, cnt) ) {
							cdata(CDATA_SANITY, cnt)++
						}
						if ( cdata(CDATA_SANITY, cnt) > 4 ) {
							dmgcon cnt, CONDITION_INSANE, cdata(CDATA_SANITY, cnt) / 2 + 1
						}
					loop
					if ( cdata(CDATA_SANITY, CHARA_PLAYER) >= 100 ) {
						txt lang("レイキ「これ以上は精神が壊れてしまいます！」", "Leiki says: \"If you go any further your mind will break! I'm getting you out!\"")
						msg_halt
						evadd EVENT_QUEST_TIMEOUT
					}
				}
				return
			}
		}
	}
	if ( gdata(GDATA_AREA) == AREA_ANCIENT_GARDEN | gdata(GDATA_AREA) == AREA_MOUNTAIN_PASS_WINDY ) {
		if ( rnd(20) == 0 ) {
			if ( cc != CHARA_PLAYER ) {
				return
			}
			if ( synccheck(cc, -1) ) {
				txtef COLOR_PURPLE
				txt lang("エーテルがあなたの体を蝕む…。", "Ether corrupts your body...")
			}
			modcorrupt 100
			return
		}
		return
	}
	if ( gdata(GDATA_AREA) == AREA_OL_DRAN ) {
		if ( gdata(GDATA_LEVEL) == 5 ) {
			gdata(GDATA_FLAG_KAMIKAZE)++
			if ( gdata(GDATA_FLAG_KAMIKAZE) == 500 ) {
				if ( gdata(GDATA_FLAG_SUB_KARAVIKA_OF_SONG_AND_DANCE) \ 3 == 2 ) {
					gdata(GDATA_FLAG_SUB_KARAVIKA_OF_SONG_AND_DANCE)++
				}
				evadd EVENT_KARAVIKA_SETUP_MAP, 0
			}
			if ( gdata(GDATA_FLAG_KAMIKAZE) \ 20 != 0 ) {
				return
			}
			spo = rnd(6)
			if ( spo == 0 ) {
				x = 9
				y = 4
			}
			if ( spo == 1 ) {
				x = 10
				y = 4
			}
			if ( spo == 2 ) {
				x = 9
				y = 5
			}
			if ( spo == 3 ) {
				x = 18
				y = 2
			}
			if ( spo == 4 ) {
				x = 18
				y = 3
			}
			if ( spo == 5 ) {
				x = 18
				y = 4
			}
			if ( gdata(GDATA_FLAG_KAMIKAZE) > 200 ) {
				if ( rnd(3) ) {
					if ( spo == 0 ) {
						x = 0
						y = 11
					}
					if ( spo == 1 ) {
						x = 1
						y = 11
					}
					if ( spo == 2 ) {
						x = 2
						y = 11
					}
					if ( spo == 3 ) {
						x = 28
						y = 11
					}
					if ( spo == 4 ) {
						x = 27
						y = 13
					}
					if ( spo == 5 ) {
						x = 26
						y = 14
					}
				}
			}
			if ( gdata(GDATA_FLAG_KAMIKAZE) > 300 ) {
				if ( rnd(3) ) {
					if ( spo == 0 ) {
						x = 0
						y = 24
					}
					if ( spo == 1 ) {
						x = 0
						y = 25
					}
					if ( spo == 2 ) {
						x = 0
						y = 26
					}
					if ( spo == 3 ) {
						x = 27
						y = 22
					}
					if ( spo == 4 ) {
						x = 27
						y = 23
					}
					if ( spo == 5 ) {
						x = 28
						y = 23
					}
				}
			}
			p = CREATURE_ID_DEMON
			if ( gdata(GDATA_FLAG_KAMIKAZE) > 50 ) {
				if ( rnd(10) == 0 ) {
					p = CREATURE_ID_DEMONS_LORD
				}
			}
			if ( gdata(GDATA_FLAG_KAMIKAZE) > 100 ) {
				if ( rnd(10) == 0 ) {
					p = CREATURE_ID_FALLEN_ANGEL
				}
			}
			if ( gdata(GDATA_FLAG_KAMIKAZE) > 150 ) {
				if ( rnd(10) == 0 ) {
					p = CREATURE_ID_ALKONOST
				}
			}
			qtc = findcharala(CREATURE_ID_KARAVIKA)
			if ( qtc == (-1) ) {
				qtc = 0
			}
			if ( gdata(GDATA_FLAG_KAMIKAZE) < 400 ) {
				flt
				characreate -1, p, x, y
				cdata(CDATA_AI_AGGRO, rc) = 3000
				cbitmod CHARA_BIT_SUMMONED, rc, 1
				cdata(CDATA_TARGET, rc) = qtc
				cdatan(CDATAN_NAME, rc) = lang("カラヴィカのストーカー", "Stalker of Karavika")
			}
			if ( gdata(GDATA_FLAG_KAMIKAZE) >= 400 ) {
				flt , 4
				characreate -1, p, x, y
				cdata(CDATA_AI_AGGRO, rc) = 3000
				cbitmod CHARA_BIT_SUMMONED, rc, 1
				cdata(CDATA_TARGET, rc) = qtc
				cdatan(CDATAN_NAME, rc) = lang("『カラヴィカのストーカー』", "<Stalker of Karavika>")
			}
			return
		}
	}
	if ( gdata(GDATA_AREA) == AREA_PORT_KAPUL ) {
		if ( gdata(GDATA_LEVEL) == 25 ) {
			gdata(GDATA_FLAG_KAMIKAZE)++
			x = 1
			y = rnd(mdata(MDATA_HEIGHT))
			if ( rnd(4) == 0 ) {
				x = mdata(MDATA_WIDTH) - 2
				y = rnd(mdata(MDATA_HEIGHT))
			}
			if ( rnd(5) == 0 ) {
				x = rnd(mdata(MDATA_WIDTH))
				y = 1
			}
			if ( rnd(6) == 0 ) {
				x = rnd(mdata(MDATA_WIDTH))
				y = mdata(MDATA_HEIGHT) - 2
			}
			p = 237
			if ( gdata(GDATA_FLAG_KAMIKAZE) > 50 ) {
				if ( rnd(10) == 0 ) {
					p = CREATURE_ID_BOMB_ROCK
				}
			}
			if ( gdata(GDATA_FLAG_KAMIKAZE) > 100 ) {
				if ( rnd(10) == 0 ) {
					p = CREATURE_ID_KAMIKAZE_SAMURAI
				}
			}
			if ( gdata(GDATA_FLAG_KAMIKAZE) > 150 ) {
				if ( rnd(10) == 0 ) {
					p = CREATURE_ID_KAMIKAZE_SAMURAI
				}
			}
			if ( gdata(GDATA_FLAG_KAMIKAZE) == 250 ) {
				txt_questupdate
				gdata(GDATA_FLAG_SUB_KAMIKAZE) = 3
				snd SOUNDLIST_SIREN
				txtef COLOR_SKY_BLUE
				txt lang("伝令「パルミア軍の撤退が完了しました！これ以上ここに留まる必要はありません。機を見て地下から退却してください！」", "The messenger says: \"The retreat of our army is over now. You don't need to fight them any more. Please leave at once!\"")
				txtmore
				txt lang("階段が現れた。", "Suddenly, stairs appear.")
				cell_featset 18, 9, tile_downstairs, CELL_FEATURE_DOWNSTAIRS, 1
			}
			if ( gdata(GDATA_FLAG_KAMIKAZE) \ 2 == 1 ) {
				return
			}
			flt
			characreate -1, p, x, y
			cdata(CDATA_AI_AGGRO, rc) = 1000
			cdata(CDATA_TARGET, rc) = 0
			return
		}
	}
	if ( gdata(GDATA_AREA) == AREA_MAID_MANSION ) {
		if ( gdata(GDATA_LEVEL) == 3 ) {
			if ( gdata(GDATA_FLAG_SUB_MANSION_FOR_SALE) < 1003 ) {
				if ( rnd(10) == 0 ) {
					x = 28
					y = 16
					flt
					characreate -1, CREATURE_ID_MURDER_COCKROACH, x, y
					cbitmod CHARA_BIT_SUMMONED, rc, TRUE
					cdata(CDATA_AI_AGGRO, rc) = 1000
					cdata(CDATA_TARGET, rc) = 0
					return
				}
			}
		}
	}
	if ( gdata(GDATA_AREA) == AREA_WEST_RASKILIS ) {
		if ( gdata(GDATA_LEVEL) >= 2 & gdata(GDATA_LEVEL) <= 6 ) {
			if ( gdata(GDATA_FLAG_MAIN) < 1000 ) {
				if ( rnd(100) == 0 ) {
					x = cdata(CDATA_X, CHARA_PLAYER)
					y = cdata(CDATA_Y, CHARA_PLAYER)
					if ( gdata(GDATA_LEVEL) == 2 ) {
						x = 78
						y = 12
					}
					if ( gdata(GDATA_LEVEL) == 3 ) {
						x = 22
						y = 6
					}
					if ( gdata(GDATA_LEVEL) == 4 ) {
						x = 41
						y = 26
					}
					if ( gdata(GDATA_LEVEL) == 5 ) {
						x = 22
						y = 31
					}
					if ( gdata(GDATA_LEVEL) == 6 ) {
						x = 37
						y = 16
					}
					flt
					characreate -1, CREATURE_ID_OBLIVION_BEAST, x, y
					cbitmod CHARA_BIT_SUMMONED, rc, TRUE
					cdata(CDATA_AI_AGGRO, rc) = 1000
					cdata(CDATA_TARGET, rc) = 0
					return
				}
			}
		}
	}
	if ( gdata(GDATA_AREA) == AREA_VALM ) {
		if ( gdata(GDATA_LEVEL) == 3 ) {
			if ( gdata(GDATA_SLEEP) >= 15 ) {
				gdata(GDATA_SLEEP) = 15 - 2
			}
			mdata(MDATA_TIMESCALE) = 5000000
		}
	}
	if ( gdata(GDATA_AREA) == AREA_JAIL ) {
		if ( rnd(50) == 0 ) {
			if ( cdata(CDATA_KARMA, CHARA_PLAYER) < (-30) ) {
				txt lang("あなたは罪を悔いた。", "You repent of your sin.")
				modkarma CHARA_PLAYER, 1
				p = rnd(MAX_SKILL_ATTR_BASIC) + STARTING_SKILL_ATTR
				if ( sorg(p, CHARA_PLAYER) >= STARTING_SKILL_ATTR ) {
					skillmod p, CHARA_PLAYER, -300
				}
			}
		}
		if ( cdata(CDATA_KARMA, CHARA_PLAYER) >= (-30) ) {
			if ( rnd(10) == 0 ) {
				cell_featread 29, 6
				if ( feat(1) == CELL_FEATURE_DOOR_CLOSED ) {
					txt lang("あなたはガードの足音が近づいてくるのに気付いた。", "You hear footsteps coming towards your cell.")
					txt lang("「そこのお前、出てもいいぞ」", cnvtalk("Hey punk, our boss says you can leave the jail now. Do not come back, okay?"))
					txt lang("ガードは面倒くさそうにあなたの牢の扉を開けた。", "A guard unenthusiastically unlocks your cell.")
					cell_featset 29, 6, tile_dooropen, CELL_FEATURE_DOOR_OPENED, 0, -1
					snd SOUNDLIST_DOOR1
				}
			}
		}
	}
	if ( gdata(GDATA_AREA) == AREA_SHELTER ) {
		if ( gdata(GDATA_WEATHER) == WEATHER_SNOW | gdata(GDATA_WEATHER) == WEATHER_HARD_RAIN | gdata(GDATA_WEATHER) == WEATHER_ETHER ) {
			if ( cdata(CDATA_HUNGER, CHARA_PLAYER) < 5000 ) {
				if ( cbit(CHARA_BIT_ANOREXIA, CHARA_PLAYER) == 0 ) {
					snd SOUNDLIST_EAT1
					txt lang("シェルターの貯蔵食品を食べた。", "You eat stored food.")
					cdata(CDATA_HUNGER, CHARA_PLAYER) += 5000
					gosub *eat_finish
				}
			}
			if ( TweakData(TWEAK_GAMEPLAY_CG_DISABLE_THIRST, TWEAK_CATEGORY_GAMEPLAY) == FALSE ) {
				if ( cdata(CDATA_THIRST, CHARA_PLAYER) < 5000 ) {
					snd SOUNDLIST_DRINK1
					txt lang("シェルターの貯蔵飲料を飲んだ。", "You drink some beverages stored in the shelter.")
					cdata(CDATA_THIRST, CHARA_PLAYER) += 5000
				}
			}
			if ( gdata(GDATA_SLEEP) >= 15 ) {
				gdata(GDATA_SLEEP) = 15 - 2
			}
			mdata(MDATA_TIMESCALE) = 1000000
		}
		else {
			if ( mdata(MDATA_TIMESCALE) == 1000000 ) {
				mdata(MDATA_TIMESCALE) = 10000
				repeat MAX_CHARA_TOTAL
					cdata(CDATA_SPEED_SUM, cnt) = 0
				loop
				txt lang("もうシェルターの中にいる必要は無い。", "You don't need to stay in the shelter any longer.")
			}
		}
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_MUSEUM ) {
		if ( gdata(GDATA_CROWD) > 0 ) {
			if ( rnd(25) == 0 ) {
				txtef COLOR_SKY_BLUE
				txtmore
				txt lang(" *ざわざわ* ", "*noise*"), lang("「ふむ…悪くないな」", cnvtalk("Hmm. Not bad.")), lang("「何だろう、これは」", cnvtalk("What's this?")), lang("「ほほう…」", cnvtalk("Ohh...")), lang("「私も死んだらはく製に…」", cnvtalk("I want to be stuffed...")), lang("「ここが噂の…」", cnvtalk("So this is the famous..."))
			}
			if ( rnd(25) == 0 ) {
				txtef COLOR_SKY_BLUE
				txtmore
				txt lang(" *がやがや* ", "*murmur*"), lang("「やだっ気持ち悪い」", cnvtalk("Gross! Disgusting.")), lang("「ねーねーこれ死んでるんでしょ？」", cnvtalk("Hey. Is it really dead?")), lang("「かわ、いー♪」", cnvtalk("Scut!")), lang("「今日はとことん見るぜ」", cnvtalk("Absolutely amazing.")), lang("「触ってもいいの？」", cnvtalk("Can I touch?"))
			}
			if ( rnd(15) == 0 ) {
				txtef COLOR_SKY_BLUE
				txtmore
				repeat 1
					if ( en ) {
						break
					}
					if ( gdata(GDATA_RANK_MUSEUM) > 8000 ) {
						txt "「退屈ぅー」", "「あまり見るものがないな」", "「こんなので見物料とるの？」", "館内は少し寂しい…"
						break
					}
					if ( gdata(GDATA_RANK_MUSEUM) > 5000 ) {
						txt "「いいんじゃない〜」", "「まあ、普通の博物館だ」", "「恋人を連れてくればよかったかも」", "まあまあの客足だ。"
						break
					}
					if ( gdata(GDATA_RANK_MUSEUM) > 2500 ) {
						txt "「この雰囲気好きだなぁ」", "「もう一度来ようよ」", "「時間が経つのを忘れるね！」", "館内はなかなか賑わっている。"
						break
					}
					if ( gdata(GDATA_RANK_MUSEUM) > 500 ) {
						txt "「来て良かった♪」", "「よくこんなに集めたなあ」", "「むぅ…興味深い」", "客足が全く絶えない盛況ぶりだ。"
						break
					}
					txt "「素晴らしいコレクションだ！」", "「感動した」", "「帰りたくないわ♪」", "来客は食い入るように展示物を眺めている。"
				loop
			}
			return
		}
	}
	if ( adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_SHOP ) {
		if ( gdata(GDATA_CROWD) > 0 ) {
			if ( rnd(25) == 0 ) {
				txtef COLOR_SKY_BLUE
				txtmore
				txt lang(" *ざわざわ* ", " *murmur* "), lang("「これ欲しい〜」", cnvtalk("I want this! I want this!")), lang("「何だろう、これは」", cnvtalk("Oh what's this?")), lang("「お買い物♪」", cnvtalk("I'm just watching")), lang("「金が足りん…」", cnvtalk("My wallet is empty...")), lang("「ここが噂の…」", cnvtalk("So this is the famous..."))
			}
			return
		}
	}
	return

*ludus_festival
	inv_getheader -1
	repeat invrange, invhead
		if ( inv(INV_ITEM_ID, cnt) == ITEM_ID_SHELTER | inv(INV_ITEM_ID, cnt) == ITEM_ID_GIANTS_SHACKLE ) {
			continue
		}
		inv(INV_ITEM_NUM, cnt) = 0
		cell_refresh inv(INV_ITEM_X, cnt), inv(INV_ITEM_Y, cnt)
	loop
	if ( adata(ADATA_FESTIVAL, gdata(GDATA_AREA)) == 1 ) {
		flt
		characreate -1, CREATURE_ID_PART_TIME_WORKER2, 30, 22
		if ( stat != 0 ) {
			cbitmod CHARA_BIT_FESTIVAL, rc, 1
			cbitmod CHARA_BIT_SANDBAG, rc, 1
		}
		flt
		characreate -1, CREATURE_ID_BARTENDER, 9, 20
		if ( stat != 0 ) {
			cdata(CDATA_AI_CALM, rc) = 3
			cbitmod CHARA_BIT_FESTIVAL, rc, 1
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_FOOD, 10
			snfood cdatan(CDATAN_NAME, rc)
		}
		flt
		characreate -1, CREATURE_ID_HOT_SPRING_MANIAC, 16, 33
		if ( stat != 0 ) {
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_RELATION, rc) = 0
			cdata(CDATA_RELATION_ORG, rc) = 0
			cbitmod CHARA_BIT_FESTIVAL, rc, 1
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_MOUNTAIN2, 30
			cdatan(CDATAN_NAME, rc) = randomname()
			cdatan(CDATAN_NAME, rc) = lang("おみやげ屋の" + cdatan(CDATAN_NAME, rc), sncnv(cdatan(CDATAN_NAME, rc)) + "the souvenir vendor")
		}
		flt
		characreate -1, CREATURE_ID_ROGUE, 35, 33
		if ( stat != 0 ) {
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_RELATION, rc) = 0
			cdata(CDATA_RELATION_ORG, rc) = 0
			cbitmod CHARA_BIT_FESTIVAL, rc, 1
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_MOUNTAIN2, 30
			cdatan(CDATAN_NAME, rc) = randomname()
			cdatan(CDATAN_NAME, rc) = lang("おみやげ屋の" + cdatan(CDATAN_NAME, rc), sncnv(cdatan(CDATAN_NAME, rc)) + "the souvenir vendor")
		}
		flt
		characreate -1, CREATURE_ID_ROGUE, 13, 42
		if ( stat != 0 ) {
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_RELATION, rc) = 0
			cdata(CDATA_RELATION_ORG, rc) = 0
			cbitmod CHARA_BIT_FESTIVAL, rc, 1
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_FESTIVAL, 30
			cdatan(CDATAN_NAME, rc) = randomname()
			cdatan(CDATAN_NAME, rc) = lang("屋台商人の" + cdatan(CDATAN_NAME, rc), sncnv(cdatan(CDATAN_NAME, rc)) + "the street vendor")
		}
		flt
		characreate -1, CREATURE_ID_ROGUE, 21, 20
		if ( stat != 0 ) {
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_RELATION, rc) = 0
			cdata(CDATA_RELATION_ORG, rc) = 0
			cbitmod CHARA_BIT_FESTIVAL, rc, 1
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_FESTIVAL, 30
			cdatan(CDATAN_NAME, rc) = randomname()
			cdatan(CDATAN_NAME, rc) = lang("屋台商人の" + cdatan(CDATAN_NAME, rc), sncnv(cdatan(CDATAN_NAME, rc)) + "the street vendor")
		}
		flt
		characreate -1, CREATURE_ID_ROGUE, 34, 45
		if ( stat != 0 ) {
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_RELATION, rc) = 0
			cdata(CDATA_RELATION_ORG, rc) = 0
			cbitmod CHARA_BIT_FESTIVAL, rc, 1
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_FESTIVAL, 30
			cdatan(CDATAN_NAME, rc) = randomname()
			cdatan(CDATAN_NAME, rc) = lang("屋台商人の" + cdatan(CDATAN_NAME, rc), sncnv(cdatan(CDATAN_NAME, rc)) + "the street vendor")
		}
		repeat 10
			flt
			characreate -1, CREATURE_ID_FESTIVAL_TOURIST, -3, 0
			if ( stat != 0 ) {
				cbitmod CHARA_BIT_FESTIVAL, rc, 1
			}
		loop
		repeat 5
			flt
			characreate -1, CREATURE_ID_BARD, -3, 0
			if ( stat != 0 ) {
				cbitmod CHARA_BIT_FESTIVAL, rc, 1
			}
		loop
		repeat 5
			flt
			characreate -1, CREATURE_ID_TOURIST, -3, 0
			if ( stat != 0 ) {
				cbitmod CHARA_BIT_FESTIVAL, rc, 1
			}
			flt
			characreate -1, CREATURE_ID_ROGUE, -3, 0
			if ( stat != 0 ) {
				cbitmod CHARA_BIT_FESTIVAL, rc, 1
			}
			flt
			characreate -1, CREATURE_ID_TRAVELER, -3, 0
			if ( stat != 0 ) {
				cbitmod CHARA_BIT_FESTIVAL, rc, 1
			}
		loop
		repeat 3
			flt
			characreate -1, CREATURE_ID_CLEANER, -3, 0
			if ( stat != 0 ) {
				cbitmod CHARA_BIT_FESTIVAL, rc, 1
			}
		loop
	}
	else {
		repeat MAX_CHARA_TOTAL - MAX_CHARA_SAVE, MAX_CHARA_SAVE
			if ( cbit(CHARA_BIT_FESTIVAL, cnt) == 1 ) {
				chara_vanquish cnt
			}
		loop
	}
	return

*noyel_festival
	inv_getheader -1
	repeat invrange, invhead
		if ( inv(INV_ITEM_ID, cnt) == ITEM_ID_SHELTER | inv(INV_ITEM_ID, cnt) == ITEM_ID_GIANTS_SHACKLE ) {
			continue
		}
		inv(INV_ITEM_NUM, cnt) = 0
		cell_refresh inv(INV_ITEM_X, cnt), inv(INV_ITEM_Y, cnt)
	loop
	if ( adata(ADATA_FESTIVAL, gdata(GDATA_AREA)) == 1 ) {
		flt
		itemcreate -1, ITEM_ID_PEDESTAL, 29, 16, 0
		if ( stat != 0 ) {
			inv(INV_ITEM_PROPERTY, ci) = PROP_NPC
		}
		flt
		itemcreate -1, ITEM_ID_STATUE_JURE, 29, 16, 0
		if ( stat != 0 ) {
			inv(INV_ITEM_PROPERTY, ci) = PROP_NPC
		}
		flt
		itemcreate -1, ITEM_ID_ALTAR, 29, 17, 0
		if ( stat != 0 ) {
			inv(INV_ITEM_GOD, ci) = GOD_JURE
			inv(INV_ITEM_PROPERTY, ci) = PROP_NPC
		}
		flt
		itemcreate -1, ITEM_ID_MOCHI, 29, 17, 0
		if ( stat != 0 ) {
			inv(INV_ITEM_PROPERTY, ci) = PROP_SPECIAL
		}
		flt
		characreate -1, CREATURE_ID_KANEDA_BIKE, 48, 19
		if ( stat != 0 ) {
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			cbitmod CHARA_BIT_FESTIVAL, rc, 1
		}
		flt
		characreate -1, CREATURE_ID_PART_TIME_WORKER, 30, 17
		if ( stat != 0 ) {
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			cbitmod CHARA_BIT_FESTIVAL, rc, 1
		}
		flt
		characreate -1, CREATURE_ID_PUNK, 38, 19
		if ( stat != 0 ) {
			cbitmod CHARA_BIT_FESTIVAL, rc, 1
			cbitmod CHARA_BIT_SANDBAG, rc, 1
			cdatan(CDATAN_NAME, rc) = lang("オパートスの信者", "Opatos Fanatic")
			if ( rnd(2) ) {
				cdatan(CDATAN_NAME, rc) = lang("マニの信者", "Mani Fanatic")
			}
			else {
				cdatan(CDATAN_NAME, rc) = lang("エヘカトルの信者", "Ehekatl Fanatic")
			}
		}
		flt
		characreate -1, CREATURE_ID_JURE_FANATIC, 35, 19
		if ( stat != 0 ) {
			cbitmod CHARA_BIT_FESTIVAL, rc, 1
		}
		flt
		characreate -1, CREATURE_ID_JURE_FANATIC, 37, 18
		if ( stat != 0 ) {
			cbitmod CHARA_BIT_FESTIVAL, rc, 1
		}
		flt
		characreate -1, CREATURE_ID_JURE_FANATIC, 37, 21
		if ( stat != 0 ) {
			cbitmod CHARA_BIT_FESTIVAL, rc, 1
		}
		flt
		characreate -1, CREATURE_ID_JURE_FANATIC, 39, 20
		if ( stat != 0 ) {
			cbitmod CHARA_BIT_FESTIVAL, rc, 1
		}
		flt
		characreate -1, CREATURE_ID_JURE_FANATIC, 38, 21
		if ( stat != 0 ) {
			cbitmod CHARA_BIT_FESTIVAL, rc, 1
		}
		flt
		characreate -1, CREATURE_ID_BARTENDER, 17, 8
		if ( stat != 0 ) {
			cdata(CDATA_AI_CALM, rc) = 3
			cbitmod CHARA_BIT_FESTIVAL, rc, 1
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_FOOD, 10
			snfood cdatan(CDATAN_NAME, rc)
		}
		flt
		characreate -1, CREATURE_ID_HOT_SPRING_MANIAC, 25, 8
		if ( stat != 0 ) {
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_RELATION, rc) = 0
			cdata(CDATA_RELATION_ORG, rc) = 0
			cbitmod CHARA_BIT_FESTIVAL, rc, 1
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_MOUNTAIN2, 30
			cdatan(CDATAN_NAME, rc) = randomname()
			cdatan(CDATAN_NAME, rc) = lang("おみやげ屋の" + cdatan(CDATAN_NAME, rc), sncnv(cdatan(CDATAN_NAME, rc)) + "the souvenir vendor")
		}
		flt
		characreate -1, CREATURE_ID_ROGUE, 24, 22
		if ( stat != 0 ) {
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_RELATION, rc) = 0
			cdata(CDATA_RELATION_ORG, rc) = 0
			cbitmod CHARA_BIT_FESTIVAL, rc, 1
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_MOUNTAIN2, 30
			cdatan(CDATAN_NAME, rc) = randomname()
			cdatan(CDATAN_NAME, rc) = lang("おみやげ屋の" + cdatan(CDATAN_NAME, rc), sncnv(cdatan(CDATAN_NAME, rc)) + "the souvenir vendor")
		}
		flt
		characreate -1, CREATURE_ID_SHOPKEEPER, 38, 12
		if ( stat != 0 ) {
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_BLACKMARKET, 10
			snblack cdatan(CDATAN_NAME, rc)
			cbitmod CHARA_BIT_FESTIVAL, rc, 1
		}
		flt
		characreate -1, CREATURE_ID_ROGUE, 28, 9
		if ( stat != 0 ) {
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_RELATION, rc) = 0
			cdata(CDATA_RELATION_ORG, rc) = 0
			cbitmod CHARA_BIT_FESTIVAL, rc, 1
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_FESTIVAL, 30
			cdatan(CDATAN_NAME, rc) = randomname()
			cdatan(CDATAN_NAME, rc) = lang("屋台商人の" + cdatan(CDATAN_NAME, rc), sncnv(cdatan(CDATAN_NAME, rc)) + "the street vendor")
		}
		flt
		characreate -1, CREATURE_ID_ROGUE, 29, 24
		if ( stat != 0 ) {
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_RELATION, rc) = 0
			cdata(CDATA_RELATION_ORG, rc) = 0
			cbitmod CHARA_BIT_FESTIVAL, rc, 1
			cdata(CDATA_ROLE, rc) = ROLE_SHOP_FESTIVAL, 30
			cdatan(CDATAN_NAME, rc) = randomname()
			cdatan(CDATAN_NAME, rc) = lang("屋台商人屋の" + cdatan(CDATAN_NAME, rc), sncnv(cdatan(CDATAN_NAME, rc)) + "the street vendor")
		}
		repeat 20
			flt
			characreate -1, CREATURE_ID_HOLY_BEAST, -3, 0
			if ( stat != 0 ) {
				cbitmod CHARA_BIT_FESTIVAL, rc, 1
			}
			flt
			characreate -1, CREATURE_ID_FESTIVAL_TOURIST, -3, 0
			if ( stat != 0 ) {
				cbitmod CHARA_BIT_FESTIVAL, rc, 1
			}
		loop
		repeat 15
			flt
			characreate -1, CREATURE_ID_BARD, -3, 0
			if ( stat != 0 ) {
				cbitmod CHARA_BIT_FESTIVAL, rc, 1
			}
		loop
		repeat 7
			flt
			characreate -1, CREATURE_ID_PROSTITUTE, -3, 0
			if ( stat != 0 ) {
				cbitmod CHARA_BIT_FESTIVAL, rc, 1
			}
			flt
			characreate -1, CREATURE_ID_TOURIST, -3, 0
			if ( stat != 0 ) {
				cbitmod CHARA_BIT_FESTIVAL, rc, 1
			}
			flt
			characreate -1, CREATURE_ID_NOBLE, -3, 0
			if ( stat != 0 ) {
				cbitmod CHARA_BIT_FESTIVAL, rc, 1
			}
			flt
			characreate -1, CREATURE_ID_PUNK, -3, 0
			if ( stat != 0 ) {
				cbitmod CHARA_BIT_FESTIVAL, rc, 1
			}
		loop
		repeat 3
			flt
			characreate -1, CREATURE_ID_STRAY_CAT, -3, 0
			if ( stat != 0 ) {
				cbitmod CHARA_BIT_FESTIVAL, rc, 1
			}
			flt
			characreate -1, CREATURE_ID_TOURIST, -3, 0
			if ( stat != 0 ) {
				cbitmod CHARA_BIT_FESTIVAL, rc, 1
			}
		loop
	}
	else {
		repeat MAX_CHARA_TOTAL - MAX_CHARA_SAVE, MAX_CHARA_SAVE
			if ( cbit(CHARA_BIT_FESTIVAL, cnt) == 1 ) {
				chara_vanquish cnt
			}
		loop
	}
	return

